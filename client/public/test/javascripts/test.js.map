{"version":3,"file":"public/test/javascripts/test.js","sources":["test/application_collection_test.coffee","test/application_view_test.coffee","test/home_view_test.coffee","test/test-helpers.coffee"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;;AAAC,CAAD,EAA0B,kBAA1B,IAA0B;;AACzB,CADD,EACgB,QADhB,SACgB;;AACf,CAFD,EAEqB,aAFrB,SAEqB;;AAErB,CAJA,CAImC,MAAnC,CAAmC,eAAnC;CAEI,EAAO,GAAP,GAAO;CACH,EAAY,CAAZ,YAAY;CAAZ,GACA;CADA,GAEA;CACC,EAAW,CAAX,OAAD,UAAY;CAJhB,EAAO;CAAP,CAMA,CAAM,EAAN,IAAM;CANN,CASA,CAA0B,KAA1B,CAA0B,MAA1B;CAEI,EAAwE,CAAxE,KAAwE,0DAAxE;CACI,GAAC,EAAD,KAAc;CACV,CAAM,EAAN;CAAA,CACU,EADV,EACE;CAFN,OAAc;CAAd,EAGA,CAAC,EAAD,KAAc;CACV,CAAM,EAAN;CAAA,CACU,EADV,EACE;CAFN,OAAc;CAHd,EAMA,CAAC,EAAD,KAAc;CACV,CAAM,EAAN;CAAA,CACU,EADV,EACE;CAFN,OAAc;CAGb,MAAD;CAVJ,IAAwE;CAYrE,CAAH,CAA8C,QAA9C;CACW,CAA4C,EAA3C,CAAR,mBAAO;CADX,IAA8C;CAdlD,EAA0B;CAiBjB,CAAe,MAAxB;CAEI,EAAyC,CAAzC,KAAyC,2BAAzC;CACI,GAAC,EAAD;CAAA,CACA,EAAC,CAAD;CACC,EAAD,CAAC,OAAa,EAAd;CACI,CAAM,EAAN;CADJ,OAAc;CAHlB,IAAyC;CAOtC,CAAH,CAA6C,QAA7C;CACW,CAA4C,EAA3C,CAAR,mBAAO;CADX,IAA6C;CATjD,EAAwB;CA5BO;;;;ACJnC;;AAAC,CAAD,EAAqB,aAArB,SAAqB;;AACpB,CADD,EACgB,QADhB,SACgB;;AAEhB,CAHA,CAGgC,MAAhC,CAAgC,YAAhC;CAEI,EAAO,GAAP,GAAO;CACH,EAAY,CAAZ,YAAY;CAAZ,GACA;CACC,UAAD;CAHJ,EAAO;CAAP,CAKA,CAAuB,KAAvB,CAAuB,GAAvB;CAEI,EAAqB,CAArB,KAAqB,OAArB;CACI,GAAC,EAAD,KAAyB,GAAzB;CACI,CAAM,EAAN;CADJ,OAAyB;CAElB,CAAkC,EAAjC,CAAR,SAAO;CAHX,IAAqB;CAArB,CAKA,CAAgB,CAAhB,KAAgB,EAAhB;CACI,GAAC,EAAD;CACO,CAAkC,EAAjC,CAAR,SAAO;CAFX,IAAgB;CALhB,CASA,CAAgB,CAAhB,KAAgB,EAAhB;CACI;CAAA,EAAO,CAAP;CAAO,CAAK,CAAL;CAAP;CAAA,CACsC,CAAI,CAAlC,CAAR,IAAO;CADP,EAEY,CAAR,EAAJ;CAFA,CAGsC,CAAI,CAAlC,CAAR,IAAO;CAHP,EAImB,CAAf,EAAJ;CAJA,CAKsC,EAA9B,CAAR,IAAO;CALP,EAMmB,CAAf,EAAJ;CANA,CAOsC,EAA9B,CAAR,IAAO;CAPP,EAQmB,CAAf,EAAJ;CARA,CASsC,CAAI,CAAlC,CAAR,IAAO;CATP,EAUA,CAAI,EAAJ,EAVA;CAWO,CAA+B,EAA9B,CAAR,IAAO,IAAP;CAZJ,IAAgB;CAThB,CAuBA,CAAkB,CAAlB,KAAkB,IAAlB;CACI,GAAC,EAAD;CAAA,CACO,EAAC,EAAR,GAAsB,CAAf;CACA,CAA0B,EAAzB,CAAR,IAAsB,IAAtB;CAHJ,IAAkB;CAvBlB,CA4BA,CAAmB,CAAnB,KAAmB,KAAnB;CACI,GAAC,EAAD;CAAA,CACO,EAAC,EAAR,IAAuB;CADvB,CAEkC,EAA1B,CAAR,KAAuB;CAChB,EAAsC,CAArC,EAAR,GAAsB,CAAf,GAAP;CAJJ,IAAmB;CAMhB,CAAH,CAA0B,QAA1B;CACI,GAAC,EAAD,KAAyB,GAAzB;CACI,CAAM,EAAN;CADJ,OAAyB;CAAzB,GAEC,EAAD;CAFA,CAG2B,EAAnB,EAAR;CAHA,GAIC,EAAD;CACO,CAAoB,CAAI,CAAvB,EAAR;CANJ,IAA0B;CApC9B,EAAuB;CALvB,CAkDA,CAAsC,KAAtC,CAAsC,kBAAtC;CACI,EAA6C,CAA7C,KAA6C,+BAA7C;CACI,GAAC,EAAD,aAAyB;CACxB,IAAD,eAA0B;CAF9B,IAA6C;CAA7C,CAIA,CAA6C,CAA7C,KAA6C,+BAA7C;CACW,GAAC,EAAR,IAAO,GAAP,MAAgC;CADpC,IAA6C;CAJ7C,CAOA,CAA6C,CAA7C,KAA6C,+BAA7C;CACK,IAAD,eAA0B;CAD9B,IAA6C;CAP7C,CAUA,CAAwB,CAAxB,KAAwB,UAAxB;CACW,EAAgD,CAA/C,EAAR,IAAO,GAAP,MAAgC;CADpC,IAAwB;CAVxB,CAaA,CAA0D,CAA1D,KAA0D,4CAA1D;CACI,GAAC,CAAD,eAA0B;CACzB,IAAD,mBAA8B;CAFlC,IAA0D;CAIvD,CAAH,CAAwB,QAAxB;CACW,EAAgD,CAA/C,EAAR,IAAO,GAAP,MAAgC;CADpC,IAAwB;CAlB5B,EAAsC;CAsB7B,CAAyB,MAAlC;CAEa,CAAc,MAAvB,CAAuB,EAAvB;CACI,EAAiD,GAAjD,GAAiD,mCAAjD;CACI,EACI,CADH,IAAD;CACI,CAAM,EAAN;CAAA,CACM,EAAN,IADA,EACA;CADA,CAEa,QAAb,GAFA;CAAA,CAGO,GAAP,IAHA,CAGA;CAHA,CAIO,GAAP;CAJA,CAKK,CAAL,oCALA;CADJ;CAAA,EAOA,CAAC,IAAD,IAAkB;CACjB,IAAD,CAA6B,SAA7B,CAAsB;CAT1B,MAAiD;CAW9C,CAAH,CAAqC,UAArC;CACI,CAAO,EAAC,EAAR,IAAuB;CAChB,EAAsC,CAArC,EAAR,GAAsB,CAAf,KAAP;CAFJ,MAAqC;CAZzC,IAAuB;CAF3B,EAAkC;CA1EN;;;;ACHhC;;AAAC,CAAD,EAAa,KAAb,SAAa;;AACZ,CADD,EACgB,QADhB,CACgB;;AAGhB,CAJA,CAIgC,MAAhC,CAAgC,YAAhC;CAEI,EAAO,GAAP,GAAO;CAEH,EAAY,CAAZ,IAAY;CAAZ,GACA;CACC,UAAD;CAJJ,EAAO;CAME,CAAc,MAAvB;CAEI,EAAW,CAAX,KAAW;CACP,GAAC,EAAD;CACO,CAA+C,EAA9C,EAAR,EAAO,EAAgB,GAAvB;CAFJ,IAAW;CAAX,CAIA,CAAc,CAAd;CACI,GAAC,EAAD;CACO,CAAkD,EAAjD,EAAR,EAAO,KAAP;CAFJ,IAAc;CAJd,CAQA,CAAsB,CAAtB,KAAsB,QAAtB;CACI,GAAC,EAAD;CAAA,CACsD,EAA9C,EAAR,EAAO,EAAgB;CADvB,GAEC,EAAD;CACO,CAAkD,EAAjD,EAAR,EAAO,KAAP;CAJJ,IAAsB;CARtB,CAcA,CAAqB,CAArB,KAAqB,OAArB;CAdA,CAqBA,CAAgB,CAAhB,KAAgB,EAAhB;CACI,GAAC,EAAD;CACO,CAAiC,EAAhC,CAAR;CAFJ,IAAgB;CAIb,CAAH,CAAc,MAAd;CA3BJ,EAAuB;CARK;;;;ACHhC,CAAO,EACL,GADI,CAAN;CACE,MAAQ;CAAR,CACA,KAAO;CADP,CAEA,KAAG;CAHL","sourcesContent":["{ApplicationCollection} = require \"collections/application\"\n{Application} = require \"models/application\"\n{ApplicationsView} = require \"views/applications_view\"\n\ndescribe 'Application Collection', ->\n\n    before ->\n        @view = new ApplicationsView()\n        @view.render()\n        @view.setListeners()\n        @apps = new ApplicationCollection @view\n\n    after ->\n\n\n    describe \"binding reset\", ->\n\n        it \"When I add 3 apps silently to the collection and fire reset event\", ->\n            @apps.add new Application\n                name: \"app 01\"\n                , silent: true\n            @apps.add new Application\n                name: \"app 02\"\n                , silent: true\n            @apps.add new Application\n                name: \"app 03\"\n                , silent: true\n            @apps.onReset()\n\n        it \"Then it displays 3 apps inside app list\", ->\n            expect(@view.$(\"#app-list .application\").length).to.equal 3\n\n    describe \"binding add\", ->\n\n        it \"When I add 1 app to the collection\", ->\n            @view.clearApps()\n            @apps.reset []\n            @apps.add new Application\n                name: \"app 01\"\n                \n\n        it \"Then it displays 1 app inside app list\", ->\n            expect(@view.$(\"#app-list .application\").length).to.equal 1\n\n","{ApplicationsView} = require \"views/applications_view\"\n{Application} = require \"models/application\"\n\ndescribe 'Manage applications', ->\n\n    before ->\n        @view = new ApplicationsView()\n        @view.render()\n        @view.setListeners()\n\n    describe \"unit tests\", ->\n        \n        it \"addApplication\", ->\n            @view.addApplication new Application\n                name: \"app 01\"\n            expect(@view.$(\".application\").length).to.equal 1\n\n        it \"clearApps\", ->\n            @view.clearApps()\n            expect(@view.$(\".application\").length).to.equal 0\n\n        it \"checkData\", ->\n            data = git: \"https://github.com/mycozycloud/cozy-notes.git\"\n            expect(@view.checkData(data).error).to.not.be.ok\n            data.name = \"test\"\n            expect(@view.checkData(data).error).to.not.be.ok\n            data.description = undefined\n            expect(@view.checkData(data).error).to.be.ok\n            data.description = \"\"\n            expect(@view.checkData(data).error).to.be.ok\n            data.description = \"desc\"\n            expect(@view.checkData(data).error).to.not.be.ok\n            data.git = \"blabla\"\n            expect(@view.checkData(data).error).to.be.ok\n\n        it \"displayInfo\", ->\n            @view.displayInfo \"test\"\n            expect(@view.infoAlert.is(\":visible\")).to.be.ok\n            expect(@view.infoAlert.html()).to.equal \"test\"\n\n        it \"displayError\", ->\n            @view.displayError \"test\"\n            expect(@view.errorAlert.is(\":visible\")).to.be.ok\n            expect(@view.errorAlert.html()).to.equal \"test\"\n            expect(@view.infoAlert.is(\":visible\")).to.not.be.ok\n\n        it \"onManageAppsClicked\", ->\n            @view.addApplication new Application\n                name: \"app 01\"\n            @view.onManageAppsClicked()\n            expect(@view.isManaging).to.be.ok\n            @view.onManageAppsClicked()\n            expect(@view.isManaging).to.not.be.ok\n\n\n    describe \"Display installation form\", ->\n        it \"When I click on add application button\", ->\n            @view.addApplicationModal.hide()\n            @view.addApplicationButton.click()\n\n        it \"It displays a form to describe new app\", ->\n            expect(@view.addApplicationModal.is(\":visible\")).to.be.ok\n\n        it \"When I click on add application button\", ->\n            @view.addApplicationButton.click()\n\n        it \"It hides the form\", ->\n            expect(@view.addApplicationModal.is(\":visible\")).to.not.be.ok\n\n        it \"When I display the form and I click on close button\", ->\n            @view.addApplicationButton.click()\n            @view.addApplicationCloseCross.click()\n\n        it \"It hides the form\", ->\n            expect(@view.addApplicationModal.is(\":visible\")).to.not.be.ok\n\n\n    describe \"Add a new application\", ->\n\n        describe \"Wrong data\", ->\n            it \"When I click on install application button\", ->\n                @data =\n                    name: \"My App\"\n                    slug: \"my-app\"\n                    description: \"Awesome app\"\n                    state: \"running\"\n                    index: 0\n                    git: \"git@github.com:mycozycloud/my-app.git\"\n                @view.appNameField.val @data.name\n                @view.installAppButton.button.click()\n\n            it \"Then error message is diplayed\", ->\n                expect(@view.errorAlert.is(\":visible\")).to.be.ok\n                expect(@view.infoAlert.is(\":visible\")).to.not.be.ok\n\n            \n        #describe \"Right data\", ->\n\n            #it \"When I click on install application button\", ->\n                #@server.respondWith(\"POST\", \"/api/apps/install\",\n                #                200, { \"Content-Type\": \"application/json\" },\n                #                JSON.stringify data)\n                #@view.installAppButton.click()\n                \n                #it \"Then loading process is started and displayed\", ->\n                #expect(@view.appInstallIndicator.is(\":visible\")).to.be.ok\n\n                #it \"When loading process is finished\", ->\n                #expect(@view.appInstallIndicator.is(\":visible\")).to.not.be.ok\n                \n                #it \"Then app is marked as installed\", ->\n                #expect(@view.appInstallSucceses.is(\":visible\")).to.be.ok\n\n                #it \"And app is listed inside my apps\", ->\n                #expect(@view.$(\".application\").length).to.equal 1\n\n","{HomeView} = require \"views/home_view\"\n{Application} = require \"initialize\"\n\n\ndescribe 'Manage applications', ->\n\n    before ->\n        \n        @view = new HomeView()\n        @view.render()\n        @view.setListeners()\n\n    describe \"unit tests\", ->\n        \n        it \"home\", ->\n            @view.home()\n            expect(@view.homeButton.parent().hasClass \"active\").to.be.ok\n\n        it \"account\", ->\n            @view.account()\n            expect(@view.accountButton.parent().hasClass \"active\").to.be.ok\n\n        it \"selectNavButton\", ->\n            @view.selectNavButton @view.homeButton\n            expect(@view.homeButton.parent().hasClass \"active\").to.be.ok\n            @view.selectNavButton @view.accountButton\n            expect(@view.accountButton.parent().hasClass \"active\").to.be.ok\n\n        it \"addApplication\", ->\n            # Don't know why, it restarts backbone historty...\n            #@view.addApplication new Application\n                #name: \"app 01\"\n                #slug: \"app-01\"\n            #expect(@view.$(\".app-button\").length).to.equal 1\n\n        it \"clearApps\", ->\n            @view.clearApps()\n            expect(@view.$(\".app-button\").length).to.equal 0\n\n        it \"loadApp\", ->\n            # Don't know why, it restarts backbone historty...\n            #app1 = new Application\n                #name: \"app 01\"\n                #slug: \"app-01\"\n\n\n","# This file will be automatically required when using `brunch test` command.\nmodule.exports =\n  expect: require('chai').expect\n  sinon: require 'sinon'\n  $: require('jquery')\n\n\n"]}