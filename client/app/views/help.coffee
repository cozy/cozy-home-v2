BaseView = require 'lib/base_view'

module.exports = class exports.AccountView extends BaseView
    id: 'help-view'
    template: require 'templates/help'

    events:
        'click .wizard': 'displayWizard'


    afterRender: ->
        $.get "api/instances/", (data) =>
            instance = data.rows?[0]
            helpUrl = instance?.helpUrl

            if helpUrl?
                template = require 'templates/help_url'
                $(@$el.find('.line')[1]).prepend template helpUrl: helpUrl


    displayWizard: (event) ->
        event.preventDefault()
        dest = event.target.getAttribute('href')
        window.app.routers.main.navigate dest, trigger: true
