{"version":3,"sources":["app/collections/application.coffee","app/collections/background.coffee","app/collections/device.coffee","app/collections/notifications.coffee","app/collections/stackApplication.coffee","app/helpers/client.coffee","app/helpers/color-set.coffee","app/helpers/locales.coffee","app/helpers/slugify.coffee","app/helpers/timezone.coffee","app/initialize.coffee","app/lib/base_collection.coffee","app/lib/base_model.coffee","app/lib/base_view.coffee","app/lib/client.coffee","app/lib/intent_manager.coffee","app/lib/proxyclient.coffee","app/lib/request.coffee","app/lib/socket_listener.coffee","app/lib/view_collection.coffee","app/models/application.coffee","app/models/background.coffee","app/models/device.coffee","app/models/instance.coffee","app/models/notification.coffee","app/models/photo.coffee","app/models/stack_application.coffee","app/models/user.coffee","app/routers/main_router.coffee","app/templates/account.jade","app/templates/album_thumb.jade","app/templates/application_iframe.jade","app/templates/background_list.jade","app/templates/background_list_item.jade","app/templates/config_application.jade","app/templates/config_application_list.jade","app/templates/config_applications.jade","app/templates/config_device.jade","app/templates/config_device_list.jade","app/templates/error_modal.jade","app/templates/help.jade","app/templates/help_url.jade","app/templates/home.jade","app/templates/home_application.jade","app/templates/layout.jade","app/templates/long_list_image.jade","app/templates/market.jade","app/templates/market_application.jade","app/templates/menu_application.jade","app/templates/menu_applications.jade","app/templates/navbar.jade","app/templates/navbar_app_btn.jade","app/templates/notification.jade","app/templates/notifications.jade","app/templates/object_picker.jade","app/templates/object_picker_photourl.jade","app/templates/object_picker_upload.jade","app/templates/popover_description.jade","app/templates/popover_permissions.jade","app/templates/tutorial.jade","app/templates/update_stack_modal.jade","app/views/account.coffee","app/views/background_list.coffee","app/views/background_list_item.coffee","app/views/config_application.coffee","app/views/config_application_list.coffee","app/views/config_applications.coffee","app/views/config_device.coffee","app/views/config_device_list.coffee","app/views/error_modal.coffee","app/views/help.coffee","app/views/home.coffee","app/views/home_application.coffee","app/views/long-list-images.coffee","app/views/main.coffee","app/views/market.coffee","app/views/market_application.coffee","app/views/menu_application.coffee","app/views/menu_applications.coffee","app/views/modal.coffee","app/views/navbar.coffee","app/views/notification_view.coffee","app/views/notifications_view.coffee","app/views/object_picker.coffee","app/views/object_picker_album.coffee","app/views/object_picker_image.coffee","app/views/object_picker_photourl.coffee","app/views/object_picker_upload.coffee","app/views/popover_description.coffee","app/views/tab-controler.coffee","app/views/update_stack_modal.coffee","app/widgets/install_button.coffee"],"names":[],"mappings":"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,GAAH,EAAY,GAAZ;CA/DJ,EA8DQ;;CA9DR;;CAFsC,OAAQ;;;CCFlD;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA5FA;AAAA;ACAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AARA;AAAA;ACAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAVA;AAAA;ACAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAPA;AAAA;ACAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAVA;AAAA;ACAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAlEA;AAAA;ACAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAPA;AAAA;ACAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAzCA;AAAA;ACAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAXA;AAAA;ACAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAPA;AAAA;ACAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AApBA;AAAA;ACAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAlDA;AAAA;ACAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAbA;AAAA;ACAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AArDA;AAAA;ACAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AARA;AAAA;ACAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAjBA;AAAA;ACAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AARA;AAAA;ACAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AApBA;AAAA;ACAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA5CA;AAAA;ACAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAVA;AAAA;ACAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AARA;AAAA;ACAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAbA;AAAA;ACAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAZA;AAAA;ACAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAfA;AAAA;ACAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAVA;AAAA;ACAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AARA;AAAA;ACAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAVA;AAAA;ACAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AARA;AAAA;ACAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAtBA;AAAA;ACAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA7BA;AAAA;ACAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAvEA;AAAA;ACAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAhCA;AAAA;;ACAA;GAAA;;kSAAA;;AAAA,GAAW,KAAX,OAAW;;AAEX,CAFA,EAEa,OAAb,YAAa;;AACb,CAHA,EAGY,MAAZ,SAAY;;AACZ,CAJA,EAIY,IAAZ,UAAY;;AACZ,CALA,EAKU,IAAV,MAAU;;AACV,CANA,EAMiB,WAAjB,SAAiB;;AACjB,CAPA,EAOW,KAAX,SAAW;;AACX,CARA,EAQe,SAAf,KAAe;;AAIf,CAZA,EAYuB,GAAjB,CAAN;CACI;;;;;;;CAAA;;CAAA,EAAI,WAAJ;;CAAA,EACU,KAAV,WAAU;;CADV,EAII,GADJ;CACI,CAAgC,EAAhC;CAJJ;;CAAA,EAOa,QAAb;CAGI;OAAA;CAAA,EAAc,CAAd,kBAAc;CAAd,EACmB,CAAnB,wBAAmB;CADnB,EAEiB,CAAjB,qBAAiB;CAFjB,EAGe,CAAf,mBAAe;CAHf,EAIe,CAAf,mBAAe;CAJf,EAKa,CAAb,WAAa;CALb,GAMA,KAAU;CANV,EAOc,CAAd,YAAc;CAPd,GAQA,MAAW;CARX,EAUsB,CAAtB,mBAAsB;CAVtB,EAWuB,CAAvB,kBAAuB;CAXvB,EAc2B,CAA3B,KAA4B,UAAR;CAChB,IAAK,CAAL;CACC,YAAD;CAFJ,IAA2B;AAK3B;+BAAA;CACI,EACsB,CADrB,CACI,CADL,EACK,GADL,EAAc,KACT;CAFT,IAnBA;CAAA,EAyBsB,CAAtB;CACI,GAAK,EAAL,YAAI;CA1BR,KAyBsB;CAzBtB,CA2BA,QAA0B,IAAX,KAAf;CA3BA,EA4BuB,CAAvB,oBAAuB;CA5BvB,GA+BA;CACA,KAAS,CAAT;CACI,EAA0C,CAAzC,EAAD;CACC,KAAD;KArCK;CAPb,EAOa;;CAPb,EAiDqB,MAAC,UAAtB;CAEI;OAAA;CAAA,EACI,CADJ;CACI,CAAW,EAAC,EAAZ,QAA0B;CAA1B,CACW,EAAC,EAAZ,QAA0B;CAD1B,CAEW,EAAC,EAAZ,QAA0B;CAH9B;CAAA,GAKA,KAAU;CALV,GAMA,MAAW;CANX,EAQW,CAAX;CARA,EASY,CAAZ,GAAY,EAAZ;CACI,IAAC,CAAD,CAAiB,GAAN;CAAX,IACC,CAAD,IAAW;CADX,KAEA;CACsB,EAAX,KAAX,CAAsB,CAAX,GAAX;CACK,MAAD,GAAW,KAAX;CADO,CAET,GAFS,EAAW;CAb1B,IASY;CAQZ,EAA2B,CAA3B,EAAG,GAAc;CACH,QAAV;CAES,GAAL,CAAoB,CAH5B,GAGQ;CACM,QAAV;MAJJ;CAQI,GAAC,EAAD,aAAoB;CACZ,CAAiB,CAAM,CAA/B,GAAO,EAAyB,CAAhC;CAEI,IAAC,GAAD,WAAoB;CACpB,GAAG,IAAH;CACI,IAAC,KAAD,IAAe;CAAf,EACA,EAAC,KAAD,IAAe;CADf,EAEA,EAAC,KAAD,IAAe;CAFf,GAGA,CAAC,KAAD;CACQ,MAAR,EAAQ,QAAR;CACK,GAAD,CAAC,KAAU,SAAX;CADJ,CAEE,GAFF,MAAQ;MALZ;CAUI,GAAG,GAAH;CACI,IAAC,IAAS,GAAV;CAAA,EACA,EAAC,OAAD,EAAe;CADf,EAEA,EAAC,OAAD,EAAe;CAFf,EAGA,EAAC,OAAD,EAAe;CACP,MAAR,EAAQ,UAAR;CACK,GAAD,CAAC,IAAS,YAAV;CADJ,CAEE,GAFF,QAAQ;MALZ;CASc,QAAV;WAnBR;SAH2B;CAA/B,MAA+B;KA5BlB;CAjDrB,EAiDqB;;CAjDrB,CAuG6B,CAAZ,MAAC,EAAD,IAAjB;CACI;CAAA,EAAa,CAAb,EAAa,IAAb,CAAwB;CAAxB,EACW,CAAX,KAAe;CADf,EAEe,CAAf,KAAe,GAAf;CACI;CAAA,SAAU;CAAV,EAEO,CAAP;CAFA,EAGkB,CAAb,EAAL,GAAK,EAAwB;CACrB,CAAoB,CAAT,CAAnB,EAAc,CAAP,EAA4B,IAAnC;CACI,SAAU;CAEV,GAAG,IAAH;CACI,OAAM,EAAN;CAAA,CAC6B,CAA7B,IAAM,GAAN;CADA,IAEA;CAFA,GAGA,GAAgB,GAAhB;CAHA,CAIc,CAAE,CAAhB,IAAQ,EAAR;CACS,GAAT,IAAQ,SAAR;MANJ;CAQI;CAAA,MACA;CADA,GAEA,GAAgB,GAAhB;CAFA,GAGA,IAAQ,EAAR;CACA,GAAG,CAAa,GAAhB,CAAG,CAAH;CACI,gCAAM;CAAN,KACM,EAAS,IAAf;WANJ;CAOW,SAAX;CACI,GAA4B,CAAa,GAAzC,CAA4B,GAA5B;CAAO,KAAD,EAAS,aAAf;aADO;CAAX,CAEE,EAFF,OAAW;SAlBe;CAAlC,MAAkC;CAPtC,IAEe;CAFf,GA8BA,MAAU,EAAV;CA/Ba,UAgCb;CAvIJ,EAuGiB;;CAvGjB,EA6IW,MAAX;CAEI;OAAA;CAAA,EAAW,CAAX,EAAiB,EAAjB,CAAW;CAAX,EACA,KAAwB,EAAb;CADX,EAEA,KAA6B,GAA7B,IAAgB;CAFhB,EAGA,KAA2B,KAAb;CAHd,CAKsC,CAA1B,CAAZ,EAAY,GAAZ,CAAY;CALZ,CAMA,CAAwB,CAAxB,CAAwB,EAAxB,EAAyB,CAAd;CACP,CAAe,GAAK,CAApB,CAAe;CAAf;OADoB;CAAxB,IAAwB;CANxB,CAUgC,CADf,CAAjB,EAAiB,QAAjB,CAAiB;CATjB,CAWA,CAA6B,CAA7B,CAA6B,EAA7B,EAA8B,MAAd;CACZ,CAAoB,GAAK,CAAzB,CAAoB;CAApB;OADyB;CAA7B,IAA6B;CAX7B,CAc4C,CAA7B,CAAf,EAAe,MAAf,CAAe;CAdf,GAeA,SAAc;CAfd,EAiBW,CAAX,EAAiB,EAAjB,KAAW;CAjBX,EAkBgB,CAAhB;CAlBA,EAmBS,CAAT,IAAiB,OAAY;CAnB7B,EAoBS,CAAT,IAAiB;AAEV,CAAP,KAAa,CAAb;CACI,CAAwC,CAA3B,CAAC,EAAd,EAAa,EAAb,CAAa;CAAb,CACA,CAAyB,CAAxB,CAAwB,CAAzB,GAA0B,EAAd;CACR,CAAgB,GAAK,EAAL,CAAhB;CAAA;SADqB;CAAzB,MAAyB;KAxB7B;CAAA,EA0BA,QAAY;CA1BZ,CA4BwC,CAA3B,CAAb,IAAa,EAAb,CAAa;CA5Bb,GA6BA,OAAY;CA7BZ,EA8BA,QAAY;CA9BZ,EAiCkB,CAAlB,sBAAkB;CAjClB,EAkCkB,CAAlB,sBAAkB;CAlClB,EAmCkB,CAAlB,sBAAkB;CAnClB,EAoCsB,CAAtB,KAAuB,KAAR;CACX,CAAG,GAAK,CAAR,CAAG;CACE,aAAc,CAAf;OAFc;CAAtB,IAAsB;CApCtB,EAuCsB,CAAtB,KAAuB,KAAR;CACX,CAAG,GAAK,CAAR,CAAG;CACE,aAAc,CAAf;OAFc;CAAtB,IAAsB;CAGrB,EAAqB,CAArB,CAAD,IAAuB,EAAvB,GAAe;CACX,CAAG,GAAK,CAAR,CAAG;CACE,cAAD;OAFc;CAAtB,IAAsB;CAzL1B,EA6IW;;CA7IX,EAkMwB,mBAAxB;CACI;OAAA;CAAA,EACI,CADJ;CACI,CAAM,EAAN;CAAA,CACY,IAAZ,OADA;CADJ;CAIiB,CAAQ,EAArB,GAAqB,EAAC,EAAtB,GAAqB;CAErB;CAAA,GAAG,EAAH;CACI,IAAC,GAAD,WAAoB;CAApB,EACS,EAAK,CAAd,CAAqB,CAArB;CADA,EAEQ,EAAR;AACA,aAAwC,0FAAxC;CAAA,IAAK,CAAY,IAAjB;CAAA,QAHA;CAAA,CAIyC,CAA9B,CAAX,CAAqB,GAArB,EAAqB;CAAoB,CAAM,EAAN;CAJzC,SAIW;CAJX,EAMW,CAAX;CANA,CAOuB,EAAnB,EAAJ;CACC,GAAD;CACI,CAAM,EAAN;CAAA,CACK,CAAL,eADA;CAAA,CAEM,EAAN;CAFA,CAGa,GAHb,KAGA;CAHA,CAIa,GAJb,KAIA;CAJA,CAKS,KAAT,EAAU,CAAV;CACI;CAAA,EAAiB,OAAjB;CAAA,EACA,EAAC,KAAyB,EAA1B,EAAe;CACd,KAAD,QAAe,KAAf;CARJ,UAKS;CALT,CAUO,GAAP,IAAQ,CAAR;CACU,IAAN,2BAAM;CAXV,UAUO;CAVP,CAYU,MAAV,CAAU,CAAV;CACK,GAAD,CAAC,cAAD;CAbJ,UAYU;CAtBlB,SASI;OAXiB;CAArB,IAAqB;CAvM7B,EAkMwB;;CAlMxB,EAqOqB,MAAC,UAAtB;CACI;CAAA,EAAO,CAAP;CAAO,CAAY,GAAK,CAAjB;CAAP;CACC,CAAwB,EAAxB,IAAQ,CAAiB,EAA1B;CACI,GAAG,EAAH;CACU,IAAN,2BAAM;MADV;CAGa,CAAkC,CAA3C,CAA+C,IAAvC,EAAR;OAJiB;CAAzB,IAAyB;CAvO7B,EAqOqB;;CArOrB;;CAD+C;;;;ACZnD;GAAA;kSAAA;;AAAA,GAAiB,WAAjB,OAAiB;;AACjB,CADA,EACqB,eAArB,UAAqB;;AACrB,CAFA,EAEuB,iBAAvB,IAAuB;;AAKvB,CAPA,EAOuB,GAAjB,CAAN;CAEI;;;;;CAAA;;CAAA,EAAU,KAAV;;CAAA,EACU,KAAV,mBAAU;;AACE,CAFZ,EAEY,OAAZ,UAFA;;CAAA,EAGQ,GAAR;;CAHA,EASa,QAAb;CACI;CAAA,SAAW;CAEV,CAAD,CAAyB,CAAxB,IAAD,CAA0B,CAAf,CAAX,CAAyB;CACpB,EAAD,EAAC,IAAgB,CAAN,GAAX;CACI,EAAG,EAAsB,GAAzB,IAAe;CACX,IAAK,KAAL;CAAU,CAAa,GAAb,KAAC;EAAoB,UAA/B;CAA+B,CAAS,EAAT,EAAC;CAAhC;CACC,EAAM,EAAN,KAAD;SAHQ;CAAhB,MAAgB;CADpB,IAAyB;CAZ7B,EASa;;CATb,EAoBQ,GAAR,GAAS,CAAD;CACH,EAAM,CAAN,CAAM,KAAU,CAAjB;CArBJ,EAoBQ;;CApBR,EAyBY,MAAC,CAAb;CACI,EAAG,CAAH,CAAa,OAAV;CACE,CAAD,CAAI,CAAH,GAAD;MADJ;CAGK,CAAD,CAAI,CAAH,EAAD;KAJI;CAzBZ,EAyBY;;CAzBZ;;CAF0C;;;;ACP9C;GAAA;kSAAA;;AAAA,GAAW,KAAX,OAAW;;AAIX,CAJA,EAIuB,GAAjB,CAAN;CACI;;;;;CAAA;;CAAA,EAAW,MAAX;;CAAA,EACS,EADT,EACA;;CADA,EAEU,KAAV,wBAAU;;CAFV,EAII,GADJ;CACI,CAAmC,EAAnC;CAAA,CACS,EAAT,OADA;CAJJ;;CAAA,EAQe,UAAf;WACI;CAAA,CACI,GADJ;CACI,CAAK,CAAL,CAAM,CAAK,GAAX,GAAK;OADT;CADW;CARf,EAQe;;CARf,EAaa,QAAb;CACI;CAAA,EAAgB,CAAhB,uBAAgB;CAChB,EAAwB,CAAxB,CAA8B,OAAN;CAAxB,GAAC,EAAD,MAAa;KADb;CAEC,CAAD,CAAoB,CAAnB,CAAK,GAAN,CAAoB,EAApB;CACI,EAA4B,EAAC,CAA7B,IAA4B;CAA3B,EAAG,EAAH,GAAD;OADgB;CAApB,IAAoB;CAhBxB,EAaa;;CAbb,EAqBW,MAAX;CACK,CAAsB,CAAvB,CAAC,CAAK,KAAN;CAtBJ,EAqBW;;CArBX,EA2BiB,YAAjB;CACI,WAAa;CACZ,IAAK,EAAN;CA7BJ,EA2BiB;;CA3BjB;;CAD8C;;;;ACJlD;GAAA;;kSAAA;;AAAA,GAAW,KAAX,OAAW;;AACX,CADA,EACc,QAAd,aAAc;;AACd,CAFA,EAEyB,mBAAzB,KAAyB;;AAIzB,CANA,EAMuB,GAAjB,CAAN;CACI;;CAAA,EAAW,MAAX;;CAAA,EACS,EADT,EACA;;CADA,EAEU,KAAV,sBAAU;;CAFV,EAIe,UAAf;CACI;CAAA,EAAU,CAAV,CAAgB,EAAhB;CACA;CAAA,EAAU,GAAV;KADA;WAEA;CAAA,CAAK,CAAL,CAAmB,CAAK,CAAxB,IAAK;CACD,CAAS,EAAC,CAAK,EAAf,EAAS;CAAT,CACQ,EAAC,CAAK,CAAd;CAFJ,OAAK;CAHM;CAJf,EAIe;;CAJf,EAYI,GADJ;CACI,CAAqB,EAArB;CAAA,CACqB,EAArB,aADA,EACA;CADA,CAEyB,EAAzB,gBAFA,GAEA;CAFA,CAGwB,EAAxB,gBAHA,EAGA;CAHA,CAImB,EAAnB,eAJA;CAZJ;;CAkBA;AAlBA;;CAoBa,uBAAC;CACV;CAAA;CAAA;CAAA;CAAA;CAAA;CAAA;CAAA;CAAA,EAAO,CAAP,CAA6B,EAAN,GAAhB;CAAP,GACA;CAtBJ,EAoBa;;CApBb,EAwBY,OAAZ;CAGK,CAAiB,EAAjB,CAAD;CA3BJ,EAwBY;;CAxBZ,EA6Ba,QAAb;CACI,EAAoB,CAApB,OAAoB,CAApB,CAAgC;CAAhC,EACoB,CAApB,OAAoB,CAApB,CAAgC;CADhC,EAEoB,CAApB,OAAoB,CAApB,KAAgC;CAFhC,EAGc,CAAd,UAAc;CAHd,EAIc,CAAd,uBAAc;CAJd,EAKiB,CAAjB,YAAiB;CALjB,EAMe,CAAf,cAAe;CANf,CAQkB,EAAlB;CACC,IAAD;CAvCJ,EA6Ba;;CAab;AA1CA;;CAAA,EA6Cc,MAAC,GAAf;CACI;CAAA,EAAO,CAAC,CAAK,EAAN;CAAP,UACS;CACD,GAAC,IAAD,EAAW;CAAX,GACC,IAAD,IAAa;CADb,GAEC,IAAD,IAAa,MAAa;CAF1B,GAGC,IAAD,IAAa;CAHb,GAIC,IAAD,IAAa;CAJb,GAKC,IAAD,IAAa;CANZ;CADT,UAQS;CACD,GAAC,IAAD,CAAwB,CAAb;CAAX,GACC,IAAD,IAAa;CADb,GAEC,IAAD,IAAa;CAFb,GAGC,IAAD,IAAa;CAHb,GAIC,IAAD,IAAa;CAJb,GAKC,IAAD,IAAa,GAAa;CANzB;CART,UAeS,CAfT;CAgBQ,GAAC,IAAD,EAAW,EAAa;CAAxB,GACC,GAAyB,CAA1B,IAAa;CADb,GAEC,IAAD,IAAa;CAFb,GAGC,IAAD,IAAa;CAHb,GAIC,IAAD,IAAa;CAJb,GAKC,IAAD,IAAa;CANZ;CAfT,UAsBS;CACD,GAAC,IAAD,CAAwB,CAAb;CAAX,GACC,IAAD,IAAa;CADb,GAEC,IAAD,IAAa;CAFb,GAGC,IAAD,IAAa;CAHb,GAIC,IAAD,IAAa;CAJb,GAKC,IAAD,IAAa,IAAa;CA5BlC;CAAA,EA8BmB,CAAnB,CAAyB,CAAzB,IAAW,GAAQ;AACa,CAAhC,EAAgC,CAAhC,CAAsC,QAAN;CAAhC,GAAC,EAAD;KA/BA;CAAA,EAiCO,CAAP,CAAa,QAAN;CACN,CAAoC,EAApC,KAAD;CAhFJ,EA6Cc;;CA7Cd,EAkFoB,MAAC,SAArB;CACI;OAAA;AAAW,CAAX,EAAO,CAAP,CAAiB,QAAN;CACV,IAAK,MAAN;CAAY,CAAc,EAAd,EAAC;EACT,IADJ;CACI,CAAS,IAAT,GAAS;CAAI,CAAoC,EAArC,CAAC,IAAD;CAAZ,MAAS;CAAT,CACO,GAAP,IAAO;AACmC,CAArC,CAAoC,EAArC,CAAC,IAAD;CAFJ,MACO;CAJK,KAEhB;CApFJ,EAkFoB;;CAlFpB,EAyFiB,MAAC,MAAlB;CACI;CAAA,IAAK,SAAL;CAAA,GACA,QAAa;CADb,GAEA,MAAW;CACV,IAAK,IAAN;CACI,CAAS,IAAT,GAAS;CACL,IAAC,CAAD;CACS,CAAkC,CAA3C,KAAQ,OAAR;CAFJ,MAAS;CAAT,CAGO,GAAP,IAAO;CACH,IAAC,GAAD,IAAa,MAAY;CAChB,CAAkC,CAA3C,KAAQ,OAAR;CALJ,MAGO;CARE,KAIb;CA7FJ,EAyFiB;;CAzFjB,EAqGiB,MAAC,MAAlB;CACI,IAAK,SAAL;CACC,UAAD;CAvGJ,EAqGiB;;CArGjB,EAyGa,QAAb;CACI;CAAA;CAAA,GAAC,EAAD,CAAQ;KAAR;CAAA,EAEe,CAAf,kBAAe;CACX,CAAO,EAAC,CAAR;CAAA,CACO,GAAP,GAAO;CADP,CAES,IAAT,GAAU,EAAD;CACL;CAAA,GACA,CAAC,EAAO,CAAR;CADA,IAEC,CAAD,CAAQ,CAAR;CACC,QAAD;CANJ,MAES;CAFT,CAOQ,IAAR,GAAS,EAAD;CACJ,IAAC,EAAO,CAAR;CACC,KAAD,CAAQ,QAAR;CATJ,MAOQ;CAVZ,KAEe;CAFf,EAaA,IAA8C,oBAA9C;CACC,MAAO,IAAR;CAxHJ,EAyGa;;CAzGb,EA0HoB,MAAC,SAArB;CACI;CAAA,IAAK,SAAL;CAAA,GACA,QAAa;CACb,IAAS,IAAN;CACE,IAAK,QAAN;CACI,CAAS,KAAT,EAAS;CACL,IAAC,KAAD,EAAa;CAAb,GACA,CAAC,IAAgB,CAAjB;CACS,CAAkC,CAA3C,KAAQ,SAAR;CAHJ,QAAS;CAAT,CAIO,GAAP,IAAO;CACF,GAAD,CAAC,OAAY,KAAb;CALJ,QAIO;CANf,OACI;MADJ;CAUK,IAAK,QAAN;CACI,CAAS,KAAT,EAAS;CACL,IAAC,KAAD,EAAa;CAAb,GACA,CAAC,IAAgB,CAAjB;CADA,CAE2C,CAA3C,KAAQ,EAAR;CACO,EAAiB,CAAxB,CAAgC,CAA1B,EAAS,SAAf;CAJJ,QAAS;CAAT,CAKO,GAAP,IAAO;CACH;CAAA,IAAC,KAAD,EAAa;CAAb,GACA,CAAC,IAAgB,CAAjB;CADA,CAE2C,CAA3C,KAAQ,EAAR;CAFA,EAGA,qBAHA;CAAA,EAIW,EAAC,GAAZ;CACA,GAAqC,IAArC;CAAA,GAAQ,IAAR,OAAQ;WALR;CAMM,EAAN;CAZJ,QAKO;CAhBf,OAUI;KAbY;CA1HpB,EA0HoB;;CA1HpB,EAsJQ,GAAR,GAAQ;CACJ;CAAA,EAAoB,CAApB,CAA0B,EAAN,IAApB;CAAA,QAAO;KAAP;CAAA,GACA,QAAa;CADb,GAEA,KAA2B,GAAd;CACF,SAAX;CACK,EAAG,EAAH,EAAD,EAAa,IAAb;CAAa,QACT;CADJ,MAAa;CADjB,CAGE,EAHF,CAAW;CA1Jf,EAsJQ;;CAtJR,EA+JW,MAAX;CACI;CAAA,CAA2C,CAA3C,KAAQ,WAAR;CAAA,GACA,QAAa;CACb,EAAG,CAAH,CAAS,EAAN,CAAH;CACI,GAAC,EAAD,IAAW;MADf;CAGI,GAAC,EAAD,IAAW,EAAM;KALrB;CAMC,IAAK,IAAN;CACI,CAAS,IAAT,GAAS;CACL,IAAC,GAAD,CAA2B,GAAd;CAAb,GACA,CAAC,GAAD,IAAa;CACb,EAAG,EAAC,EAAD,CAAH;CACI,IAAC,IAAgB,CAAjB;SAHJ;CAIA,EAAG,EAAC,EAAD,CAAH;CACI,IAAC,IAAgB,CAAjB;SALJ;CAAA,CAM2C,CAA3C;CACW,SAAX;CACI,IAAC,KAAD,EAAa;CACZ,GAAD,CAAC,MAAW,MAAZ;CAFJ,CAGE,EAHF,KAAW;CARf,MAAS;CAAT,CAaO,GAAP,IAAQ;CACJ,IAAC,GAAD,IAAa;CAAb,IACA,SAAM;CADN,GAEA,CAAC,GAAD,EAAW;CAFX,IAGC,GAAD,IAAa,GAAY;CAChB,CAAkC,CAA3C,KAAQ,OAAR;CAlBJ,MAaO;CArBJ,KAOP;CAtKJ,EA+JW;;CA/JX,EA+LmB,cAAnB;AAC+B,CAA3B,CAAuB,CAAvB,EAAM,KAAN;CAAA,GACA,CAAM;CADN,CAE8C,CAA9C,KAAQ,cAAR;CACC,KAAD;CAnMJ,EA+LmB;;CA/LnB;;CAD0C;;;;ACN9C;GAAA;;kSAAA;;AAAA,GAAiB,WAAjB,OAAiB;;AACjB,CADA,EACiB,WAAjB,YAAiB;;AACjB,CAFA,EAEyB,mBAAzB,KAAyB;;AACzB,CAHA,EAGmB,aAAnB,YAAmB;;AAEnB,CALA,EAKuB,GAAjB,CAAN;CACI;;CAAA,EAAI,sBAAJ;;CAAA,EACS,EADT,EACA;;CADA,EAEU,KAAV,2BAAU;;CAFV,EAGU,KAAV,kBAAU;;CAHV,EAIiB,MAAC,MAAlB;CACI;CAAA,IAAuB,CAAV;CAAb,EAGa,CAAb,KAAuB,EAAb,aAHV;CAIM,CAAe,CAArB,EAAK,EAAL;CATJ,EAIiB;;CAOJ,6BAAC;CACV;CAAA,EAAQ,CAAR;CAAA,EACU,CAAV;CADA,GAEA,kDAAM;CAAA,CAAY,EAAC,EAAb;CAFN,KAEA;CAdJ,EAWa;;CAXb,EAgBa,QAAb;CACK,EAAU,CAAV,GAAD;CAjBJ,EAgBa;;CAhBb,EAmBY,MAAC,CAAb;CACI;CAAA,CAAG,CAAI,CAAP,IAAG;CACE,CAAD,CAAI,CAAH,EAAD;MADJ;CAGI,EAAQ,CAAU,CAAlB;CAAA,CAC8B,CAAhB,CAAgB,CAAhB,CAAd,GAA+B,EAA/B;CACI;CAAA,GAAG,IAAH;CACI,EAAO,CAAI,CAAM,MAAV;MADX;CAGI,gBAAO;SAJe;CAAhB,MAAgB;CAD9B,CAM+B,CAAvB,EAAR,EAAQ;CACR,GAAG,EAAH;CACI,EAAW,CAAC,CAAU,GAAtB,iBAAsB;CACjB,EAAG,CAAJ,IAAJ;OAZR;KADQ;CAnBZ,EAmBY;;CAnBZ,EAkCmB,MAAC,QAApB;CACI;CAAA,EAAkB,CAAlB;CAAA,EACO,CAAP,CAAO,CAAM;CADb,EAEI,CAAJ;CACA,GAAuB,OAAjB,cAAN;CACI,EAAO,CAAP,CAAc,CAAd;CACA,EAAG,EAAU,CAAb;CACI,EAAkB,CAAlB;OAFJ;AAGA,CAHA,KAGA;CAPJ,IAGA;CAMA;CACoB,UAAhB,IAAe;MADnB;CAGU,IAAN,yBAAM;KAbK;CAlCnB,EAkCmB;;CAlCnB;;CADgD;;;;ACLpD;GAAA;;kSAAA;;AAAA,GAAU,IAAV,MAAU;;AACV,CADA,EACW,KAAX,OAAW;;AACX,CAFA,EAEc,QAAd,aAAc;;AACd,CAHA,EAGc,QAAd,SAAc;;AACd,CAJA,EAImB,aAAnB,UAAmB;;AACnB,CALA,EAKwB,kBAAxB,MAAwB;;AACxB,CANA,EAMmB,aAAnB,MAAmB;;AACnB,CAPA,EAOmB,aAAnB,MAAmB;;AACnB,CARA,EAQiB,WAAjB,cAAiB;;AAEjB,CAVA,EAUuB,GAAjB,CAAN;CACI;;CAAA,EAAI,uBAAJ;;CAAA,EACU,KAAV,uBAAU;;CADV,EAII,UADJ;CACI,CAAqB,EAArB;CAJJ;;CAAA,EAOI,GADJ;CACI,CAA6B,EAA7B;CAAA,CAC6B,EAA7B,kBADA;CAAA,CAE6B,EAA7B,kBAFA;CAPJ;;CAWa,+BAAE;CACX,EADW,CAAD;CACV,EADkB,CAAD,GACjB;CAAA,EAD4B,CAAD,KAC3B;CAAA,EADwC,CAAD,EACvC;CAAA;CAAA;CAAA;CAAA,CAAoB,EAApB;CAAA,CACsB,EAAtB;CADA,GAEA;CAdJ,EAWa;;CAXb,EAgBa,QAAb;CACI,EAAe,CAAf,MAAe,CAAf;CAAA,GACA,OAAY;CADZ,EAEc,CAAd,UAAc;CAFd,EAGa,CAAb,SAAa;CAHb,EAIiB,CAAjB,OAAiB,EAAa;CAJ9B,EAKsB,CAAtB,OAAsB,GAAtB,CAAmC;CALnC,EAMsB,CAAtB,OAAsB,GAAtB,CAAmC;CANnC,GAOA;CAPA,CAQoD,CAA7B,CAAvB,EAAuB,SAAvB,MAAuB;CARvB,EASkB,CAAlB,GAAkB,GAAlB,MAAkB;CATlB,EAUI,CAAJ,WAA8C;CAV9C,EAWoB,CAApB,OAAoB,CAApB;CAXA,GAYA,KAAU;CAAO,CAAO,EAAP;CAZjB,KAYA;CAZA,GAaA;AACqB,CAApB,EAAoB,CAApB,OAAD;CA/BJ,EAgBa;;CAhBb,EAiCmB,MAAC,QAApB;CACK,UAAD,IAAgB,EAAhB;CAlCJ,EAiCmB;;CAjCnB,EAoCqB,gBAArB;CACI;CAAA;CAAA;UAAA;qBAAA;CACI,EAAI,CAAH,EAAD,GAA8B;CAA9B,EACiB,GAAjB,GAAiB,KAAjB;CADA,EAEc,CAA0B,EAAxC,CAFA,IAEA,EAAc;CAFd,EAGa,GAAb,KAAwB;CACxB,EAAiC,CAA9B,EAAH,EAAG,EAAkD,IAA1B;CACvB,CAA4C,CAAxC,CAAH,EAAK,EAAN;CAAA,CACsC,CAAlC,CAAH,EAAK,CAAN;OANJ;CAOA,EAAiC,CAA9B,EAAH,EAAG,EAAkD,IAA1B;CACvB,CAA4C,CAAxC,CAAH,EAAK,EAAN;CAAA,CACsC,CAAlC,CAAH,EAAK,CAAN;OATJ;CAUA,EAAiC,CAA9B,EAAH,EAAG,EAAkD,IAA1B;CACvB,CAA4C,CAAxC,CAAH,EAAK,EAAN;CAAA,CACsC,CAAlC,CAAH,CAAD,CAAM,CAAN;MAFJ;CAAA;OAXJ;CAAA;oBADiB;CApCrB,EAoCqB;;CApCrB,EAoDgB,WAAhB;AACU,CAAN,IAA0B,CAAnB,CAAQ;CACV,EAAG,CAAH,CAAD,KAA4C,GAA5C;MADJ;CAGK,EAAG,CAAH,CAAD,aAAsC;KAJ9B;CApDhB,EAoDgB;;CApDhB,EA0DO,EAAP,IAAO;CACH;CAAA;CAAA,GACA;CACQ,CAAoB,CAA5B,CAA4B,GAArB,EAAsB,EAA7B;CACI;CAAA,GAAG,EAAH;CACU,IAAN,6CAAM;MADV;CAGI,CAAY,EAAM,IAAlB,KAAY;CAAZ,CACY,EAAM,IAAlB,MAAY;CADZ,CAE6B,EAAV,CAAlB,EAAD;CACC,CAA2B,GAA3B,GAAD;OAPoB;CAA5B,IAA4B;CA7DhC,EA0DO;;CA1DP,CAsEwB,CAAT,MAAC,IAAhB;CACI,EAAqD,CAArD,CAAiC,CAAW,GAA5C,CAAW;CACV,EAAkD,CAAlD,CAA+B,GAAhC,EAAW,CAAX;CAxEJ,EAsEe;;CAtEf,CA0E2B,CAAT,MAAC,OAAnB;CACI,QAAU;CACT,IAAD,IAAU,EAAV;CA5EJ,EA0EkB;;CA1ElB,EA8EmB,cAAnB;CACe,CAAQ,EAAP,CAAZ;CA/EJ,EA8EmB;;CA9EnB,EAiFmB,MAAC,QAApB;CACI;CAAA;CAAA,GAAC,EAAD,CAAQ;KAAR;CAAA,EACe,CAAf,YAAe;CACX,CAAS,IAAT,GAAU,EAAD;CAED,KADJ;CACI,CAAS,KAAT,EAAS,CAAT;CACK,MAAO,EAAR;CADJ,UAAS;CAAT,CAEO,GAAP,IAAQ,CAAR;CACK,EAAmB,EAAnB,EAAO,KAAR;CAHJ,UAEO;CAJN,SACL;CADJ,MAAS;CAAT,CAMQ,IAAR,GAAS,EAAD;CACJ,IAAC,EAAO,CAAR;CACC,KAAD,CAAQ,QAAR;CARJ,MAMQ;CANR,CASK,CAAL,IAAK,EAAC;CACF,GAAG,GAAH;CACa,KAAT,EAAQ,SAAR;SAFH;CATL,MASK;CAXT,KACe;CADf,EAeA,IAA8C,oBAA9C;CACC,MAAO,IAAR;CAlGJ,EAiFmB;;CAjFnB,EAoGiB,YAAjB;CACI;OAAA;CAAA,CAAS,EAAT,KAAU;CACN;CAAA,CAAmB,EAAM,CAAzB,EAAmB;CAClB,QAAD,GAAa,CAAb;CACI,CAAS,KAAT,EAAS;CACJ,CAAD,GAAC,MAAD;CADJ,QAAS;CAAT,CAEO,GAAP,IAAQ;CACH,UAAD;CACI,CAAS,KAAT,EAAS,GAAT;CACI,GAAG,CAAH;CACU,EAAN;MADJ;CAGY,GAAR;eAJC;CAAT,YAAS;CAAT,CAKO,GAAP,IAAQ,GAAR;CACI,EAAG,EAAH;CACA,GAAa,CAAb;CAAM,EAAN;eAFG;CALP,YAKO;CAPR,WACH;CAHJ,QAEO;CALN,OAEL;CAFJ,IAAS;CAeR,KAAD;CApHJ,EAoGiB;;CApGjB,EAsHsB,iBAAtB;CACI;OAAA;CAAA,CAAS,EAAT,KAAU;CACL,CAAD,GAAC,MAAD,MAAkB;CADtB,IAAS;CAER,KAAD;CAzHJ,EAsHsB;;CAtHtB,EA2HsB,iBAAtB;CACI,aAAe;CAAf,GACA,OAAY;CACX,EAA8B,CAA9B,KAA8B,EAA/B,MAAkB;CACL,KAAT,EAAQ,KAAR;CADJ,IAA+B;CA9HnC,EA2HsB;;CA3HtB;;CADkD;;;;ACVtD;GAAA;kSAAA;;AAAA,GAAW,KAAX,OAAW;;AAGX,CAHA,EAGuB,GAAjB,CAAN;CACI;;CAAA,EAAW,MAAX;;CAAA,EACS,EADT,EACA;;CADA,EAEU,KAAV,iBAAU;;CAFV,EAKI,GADJ;CACI,CAAwB,EAAxB;CALJ;;CAAA,EAOe,UAAf;WACI;CAAA,CAAQ,EAAC,CAAK,CAAd;CADW;CAPf,EAOe;;CAGF,kBAAC;CACV,EAAS,CAAT,GAAgB;CAAhB,CACA,CAAO,CAAP,CAAgC,EAAN,MAAnB;CADP,GAEA;CAbJ,EAUa;;CAVb,EAeiB,MAAC,MAAlB;CACI;CAAA,KAAS,CAAN,6BAAe;CACd,IAAO,CAAP;CACC,CACG,CADkB,CAAtB,CAA4B,QAA5B,EAAQ;CACJ,CAAM,EAAN;CAAA,CACS,KAAT,EAAS;CACJ,EAAG,EAAH,EAAD,EAAa,QAAb;CAFJ,QACS;CADT,CAGO,GAAP,IAAO;CACH,IAAC,KAAD,YAA0B;CAClB,EAAR,IAAO,UAAP;CALJ,QAGO;CANf,OAEI;KAHS;CAfjB,EAeiB;;CAfjB;;CADqC;;;;ACHzC;GAAA;;kSAAA;;AAAA,GAAiB,WAAjB,OAAiB;;AACjB,CADA,EACY,MAAZ,YAAY;;AAGZ,CAJA,EAIuB,GAAjB,CAAN;CACI;;CAAA,EAAI,iBAAJ;;CAAA,EACS,EADT,EACA;;CADA,EAEU,KAAV,sBAAU;;CAFV,EAGU,KAAV,aAAU;;CAEG,wBAAC;CACV;CAAA,EAAW,CAAX;CAAA,GACA,6CAAM;CAAA,CAAY,IAAZ;CADN,KACA;CAPJ,EAKa;;CALb,EAUa,QAAb;CACK,EAAa,CAAb,MAAD,IAAc;CAXlB,EAUa;;CAVb;;CAD2C;;;;ACJ/C;GAAA;;kSAAA;;AAAA,GAAW,KAAX,OAAW;;AAEX,CAFA,EAEuB,GAAjB,CAAN;CACI;;;;;;CAAA;;CAAA,EAAI,8BAAJ;;CAAA,EACW,MAAX,mBADA;;CAAA,EAES,EAFT,EAEA;;CAFA,EAGU,KAAV,eAAU;;CAHV,EAMI,GADJ;CACI,CAAc,EAAd;CAAA,CACY,EAAZ,KADA,EACA;CAPJ;;CAAA,EASY,MAAC,CAAb;CACI,EAAa,CAAb,GAAoB,EAApB;CAAA,EACW,CAAX;CADA,GAEA;CACA,GAAiB,CAAjB;CAbJ,EASY;;CATZ,EAee,UAAf;WACI;CAAA,CAAW,EAAC,EAAZ;CAAA,CACS,EAAC,EAAV;CAFW;CAff,EAee;;CAff,EAmBa,QAAb;CACI;CAAA,EAAW,CAAX,SAAW;CAAX,EACe,CAAf,GAAQ,EAAO;CAAI,GAAD,CAAC,QAAD;CAAlB,IAAe;CADf,GAEA;CACC,EAAO,CAAP,MAAO,CAAR;CAvBJ,EAmBa;;CAnBb,EAyBqB,gBAArB;CACI;CAAA,CAAwB,CAAxB,GAA0B,MAA1B;CACA,EAAuB,GAAvB,GAAuB,EAAvB;CACK,CAAuB,CAAxB,CAAK,CAAJ,CAAyB,MAA1B;CADJ,IAAuB;CA3B3B,EAyBqB;;CAzBrB,EA8BM,CAAN,KAAM;CACF;CAAA,EAAI,CAAJ;CAAA,GACA,GAAQ,CAAR;CADA,GAEA;CACW,SAAX;CACK,OAAD;CADJ,CAEE,CAFF,EAAW;CAlCf,EA8BM;;CA9BN,EAsCM,CAAN,KAAM;CACF;CAAA,EAAyB,CAAzB,KAAyB,IAAzB;CACI,IAAC,CAAD,CAAQ,EAAR;CAAA,EACI,EAAH,CAAD;CACC,KAAD;CAHJ,IAAyB;CAIzB;CA3CJ,EAsCM;;CAtCN,EA6CS,IAAT,EAAS;CACJ,UAAD;CA9CJ,EA6CS;;CA7CT,EAgDa,MAAC,EAAd;CACI;CAAA;CACA,CAAG,EAAH,CAAe;CACV,MAAD;KAHK;CAhDb,EAgDa;;CAhDb,EAqDQ,GAAR,GAAQ;CACJ,EAAG,CAAH,CAAoC,CAApC,GAAG;CACE,SAAD;MADJ;CAGK,SAAD;KAJA;CArDR,EAqDQ;;CArDR;;CAD4C;;;;ACFhD;GAAA;;kSAAA;;AAAA,GAAW,KAAX,OAAW;;AACX,CADA,EACU,IAAV,MAAU;;AAMV,CAPA,EAOuB,GAAjB,CAAN;CACI;;;;;;CAAA;;CAAA,EAAI,QAAJ;;CAAA,EACU,KAAV,QAAU;;CADV,EAII,GADJ;CACI,CAA8B,EAA9B;CAJJ;;CAAA,EAOa,QAAb;CACI,EAAqB,CAArB,kBAAqB;CAArB,EACoB,CAApB,oBAAoB;CADpB,EAEqB,CAArB,iBAAqB;CAFrB,EAGuB,CAAvB,mBAAuB;CAEtB,UAAD;CAbJ,EAOa;;CAPb,EAkBkB,aAAlB;CACI;CAAA,IAA6B,CAA7B;CACA;CACI,EAAW,GAAX,CAAW,CAAX,YAAW;CACX,EAAM,CAAH,GAAD,CAA+B,KAAjC;CAA0C,CAAS,KAAT;CAA1C,OAAiC;KAJvB;CAlBlB,EAkBkB;;CAlBlB,EA4BsB,iBAAtB;CACI;OAAA;CAAA,gBAAkB;CAAlB,GACA,eAAoB;CADpB,EAGc,CAAd,YAA+B;CAH/B,CAIW,EAAX,MAAW;CACX,EAAwB,CAAxB,EAAG,KAAW;CACV,GAAC,EAAD,WAAkB;CACV,CAAqB,EAA7B,GAAO,MAAP;CAA6B,CAAC,SAAD;CAAA,CAAc;EAAW,MAAtD,CAAuD;CACnD,IAAC,GAAD,SAAkB;CAClB,GAAG,IAAH;CACK,GAAD,CAAC,YAAD;MADJ;CAGK,GAAD,CAAC,YAAD,EAAoB;SAL0B;CAAtD,MAAsD;KARxC;CA5BtB,EA4BsB;;CA5BtB;;CAD4C;;;;ACPhD;GAAA;;kSAAA;;AAAA,GAAiB,WAAjB,OAAiB;;AAGjB,CAHA,EAGuB,GAAjB,CAAN;CACI;;CAAA,EAAI,gBAAJ;;CAAA,EACU,KAAV,QAAU;;CADV,EAEU,KAAV,gBAAU;;CAFV,EAKI,UADJ;CACI,CAAwB,EAAxB;CALJ;;CAQA;AARA;;CAWa,6BAAC;CACV;CAAA;CAAA;CAAA;CAAA,EAAQ,CAAR;CAAA,EACU,CAAV;CADA,EAES,CAAT,EAFA;CAAA,EAGa,CAAb;CAHA,EAImB,CAAnB,KAAmB,MAAnB;aAAsB;CAAA,CAAQ,GAAC,CAAT;CAAH;CAJnB,IAImB;CAJnB,GAKA,kDAAM;CAAA,CAAY,EAAZ;CALN,KAKA;CAjBJ,EAWa;;CAXb,EAoBY,OAAZ;CACI;CAAA,CAAuB,CAAW,CAAlC;CAAsC,EAAY,EAAZ,IAAD;CAArC,IAAkC;CAAlC,CACuB,CAAS,CAAhC,KAAgC,CAAhC;CAAoC,EAAY,EAAZ,IAAD;CAAnC,IAAgC;CADhC,CAIA,QAAW,EAAX;CALQ,QAOR;CA3BJ,EAoBY;;CApBZ,EA8Ba,QAAb;CACI;CAAA;CAAA,EACuB,CAAvB,KAAwB,IAAxB;CACI;CACA,IAAO,CAAP;CAFJ,IAAuB;CAFd,QAMT;CApCJ,EA8Ba;;CA9Bb,EAuCc,SAAd;CACI;AAAmC,CAAnC,EAAS,CAAT,CAAyB,CAAzB;CACC,KAAD;CAzCJ,EAuCc;;CAvCd,EA4CY,MAAC,CAAb;CACI;CAAA,EAAc,CAAd,CAAwB,KAAV,CAAd;CAAA,EACU,CAAV,OAAU,IAAI;CADd,EAEA,IAAO;CAFP,GAGA,GAAO,CAAP;CACQ,GAAR,GAAO,IAAP;CAjDJ,EA4CY;;CA5CZ,EAqDc,MAAC,GAAf;CACI;CAAA,EAAc,CAAd,CAAmB,KAAL,CAAd;CAAA,EACU,CAAV,OAAU,IAAI;CACd,IAAgC,CAA7B,CAAO,CAAP;CACS,GAAR,GAAO,MAAP;KAJM;CArDd,EAqDc;;CArDd;;CADgD;;;;ACHpD;GAAA;;kSAAA;;AAAA,GAAW,KAAX,OAAW;;AACX,CADA,EACc,QAAd,aAAc;;AACd,CAFA,EAEQ,EAAR,EAAQ;;AAGR,CALA,EAKuB,GAAjB,CAAN;CACI;;CAAA,EAAW,MAAX;;CAAA,EACS,EADT,EACA;;CADA,EAGU,KAAV,oBAAU;;CAHV,EAKe,UAAf;WACI;CAAA,CAAK,CAAL,CAAM,CAAK,CAAX;CADW;CALf,EAKe;;CALf,EASI,GADJ;CACI,CAA8B,EAA9B;CAAA,CACgC,EAAhC,SADA,iBACA;CADA,CAE+B,EAA/B,QAFA,iBAEA;CAXJ;;CAaA;AAbA;;CAAA,EAea,QAAb;CACK,CAAmC,CAApC,CAAC,KAAD,CAAW,CAAX;CAhBJ,EAea;;CAfb,EAkBY,OAAZ;CACK,CAAmC,CAApC,CAAC,CAAmC,KAAzB,CAAX;CAnBJ,EAkBY;;CAGC,uBAAC;CACV;CAAA;CAAA;CAAA;CAAA;CAAA,EAAO,CAAP,CAA6B,EAAN,GAAhB;CAAP,EACW,CAAX;CADA,GAEA;CAFA,EAGY,CAAZ,EAA0B,CAAP,CAAnB,CAAY;CAAyB,CAAM,EAAN,CAAY,CAAZ;CAHrC,KAGY;CAzBhB,EAqBa;;CArBb,EA2Ba,QAAb;CACI,EAAQ,CAAR,MAAQ;CAAR,EACc,CAAd,UAAc;CADd,EAES,CAAT,QAAS;CAFT,EAGc,CAAd,CAAc,KAAd;CAHA,CAKkB,EAAlB;CALA,GAMA;CAGA,IAAS,IAAN;CAGC,GAAC,EAAD;CACC,IAAD;KAdK;CA3Bb,EA2Ba;;CAiBb;AA5CA;;CAAA,EA8Cc,MAAC,GAAf;CACI;CAAA,EAAO,CAAC,CAAK,EAAN;CAAP,UACS;CACD,GAAC,IAAD;CAAA,CACkB,EAAjB,CAAD;CACC,OAAuB,EAAb,KAAX;CAJR,UAMS;CACD,GAAC,IAAD;CACA,GAAG,CAAM,GAAT,CAAG;CACC,GAAC,MAAD;CAAA,EACY,EADZ,IACA;CADA,GAEC,CAAD;MAHJ;CAKI,EAAY,EAAZ;CAAA,GACC,CAAD;SAPJ;CAAA,CASmB,CAAkB,CAApC,CAAD,cAAmB;CATnB,GAUC,IAAD;CAVA,GAWC,IAAD;CAXA,GAYC,IAAD;CACC,SAAU,KAAX;CApBR,UAsBS,CAtBT;CAuBQ,GAAC,IAAD;CAAA,GACC,IAAD,EAAW,EAAX;CACC,cAAD;CAzBR,UA2BS;CAED,GAAG,CAAM,GAAT,CAAG;CACC,EAAY,EAAZ;CAAA,GACC,CAAD;MAFJ;CAII,EAAY,EAAZ;CAAA,GACC,CAAD;SALJ;CAAA,CAOmB,CAAkB,CAApC,CAAD,cAAmB;CAPnB,GAQC,IAAD;CARA,GASC,IAAD;CACC,SAAU,KAAX;CAvCR,IADU;CA9Cd,EA8Cc;;CA9Cd,EAwFc,MAAC,GAAf;CACI;OAAA;CAAA,IAAK,SAAL;AACmB,CAAnB;CAAA,YAAO;KADP;CAEA,EAAO,CAAC,CAAK,EAAN;CAAP,UACS;CACD,EAAY,KAAZ;CACA,GAAG,IAAH;CACI,EAAY,CAAC,CAAK,IAAlB,EAAY;CACZ,QAAiB,SAAV;CAAP,gBACS;CAAS,GAAO,UAAP,IAAc;CAAvB;CADT,gBAES;CACD,EAAY,MAAZ,EAAY,GAAZ;CACA,QAAiB,aAAV;CAAP,oBACS;CACD,EAAoB,CAAP,KAAb,UAAoB;CADnB;CADT,oBAGS;CACD,EAAoB,CAAP,KAAb,KAAoB,IAApB;CAJR,cAJR;CAES;CAFT,gBASS;CAAS,EAAY,MAAZ,EAAY,GAAZ;CAAT;CATT,gBAUS;CAAS,EAAY,MAAZ,IAAY,CAAZ;CAVlB,UAFJ;SADA;CAAA,EAcW,CAAC,CAAK,GAAjB,EAAW;CAdX,EAeY,EAAZ;CACI,CAAO,GAAP;CAAA,CACW,OAAX;CADA,CAES,KAAT,CAFA,EAEA;CAlBJ,SAeY;CAfZ,CAmBA,CAAG,CAAG,CAAmB,CAAzB;CACM,GAAN,CAAK,UAAL;CAtBR,UAuBS;CACA,IAAD;CAxBR,UAyBS,CAzBT;CA0Bc,IAAN,uCAAM;CA1Bd,UA2BS;CACD,GAAC,IAAD;CACC,IAAK,UAAN;CACI,CAAS,KAAT,EAAS,CAAT;CACI,IAAC,IAAD;CACC,UAAD;CAFJ,UAAS;CAAT,CAGO,GAAP,IAAO,CAAP;CACI;CAAA,IAAC,MAAD;CAAA,EACA,qBADA;CAAA,EAEW,EAAC,GAAZ,EAAW,EAAX;CACA,GAAqC,IAArC;CAAA,GAAQ,IAAR,OAAQ;aAHR;CAIM,EAAN;CARJ,UAGO;CAjCnB,SA6BQ;CA7BR,IAHU;CAxFd,EAwFc;;CA4Cd;AApIA;;CAAA,EAsIW,MAAX;CAEI,IAAG,CAA0C,CAA1C;CACQ,CAAM,CAAM,CAAnB,CAAyB,CAAnB,CAAO,CAAb;CACK,GAAD,EAFR;CAGW,CAA2B,CAAxB,CAAa,CAAuB,CAAxC,CAAY,CAAlB;KALG;CAtIX,EAsIW;;CAtIX,EA8IoB,eAApB;CACI;CAAA,EAAO,CAAP,CAAa,CAAN;CAAP,EACQ,CAAR,GAAQ;CACR;CACI,CAAqC,CAAzB,GAAZ,EAAY,CAAZ;CAAA,EAGQ,CAAS,CAAjB,EAAQ,EAHR;KAHJ;CAAA,EAOS,CAAT;CACC,CAAmC,CAApC,CAAC,CAAD,KAAW,CAAX;CAvJJ,EA8IoB;;CA9IpB,EA0Ja,QAAb;CACI;CACC,SAAD;CA5JJ,EA0Ja;;CA1Jb,EA+Ja,QAAb;CACI;CACC,UAAD;CAjKJ,EA+Ja;;CA/Jb;;CAD0C;;;;ACL9C;GAAA;;AAAA,GAAS,EAAT,EAAS;;AAgIT,CAhIA,EAgIsB,KAAtB;;AAEA,CAlIA,EAkIsB,WAAtB;;AAEA,CApIA,EAoIsB,CApItB,IAoIsB,CAAtB;;AAGA,CAvIA,EAuIsB,QAAtB;;AAKA,CA5IA,EA4IsB,WAAtB;;AAEA,CA9IA,EA8IsB,CA9ItB,UA8IA;;AAEA,CAhJA,EAgJsB,gBAAtB;;AAEA,CAlJA,EAkJsB,SAAtB;;AAEA,CApJA,EAoJsB,SAAtB;;AAEA,CAtJA,EAsJsB,YAAtB;;AAKA,CA3JA,EA2JuB,GAAjB,CAAN;CAKiB,iBAAE;CAGX;CAAA,EAHW,CAAD,aAGV;CAAA,EAH+B,CAAD,CAG9B;CAAA;CAAA;CAAA;CAAA;CAAA;CAAA,EAAY,CAAZ;CAAA,EAGa,CAAb,CAAa,GAAQ,CAArB,IAAa;CAHb,EAIA,MAAU,CAAV;CAJA,GAKA,aAAkB;CALlB,EAMa,CAAb,CAAa,EAAb,CAAqB,KAAR;CANb,EAOA,IAAQ,CAAR,CAAkB;CAPlB,GAQA,KAAU,EAAV;CARA,EASa,CAAb,CAAa,CAAb,EAAqB,KAAR;CATb,EAUA,GAAO,GAAU,QAAjB;CAVA,GAWA,aAAkB;CAXlB,EAc4B,CAA5B,CAAgB,GAAhB,CAAU,CAdV;CAAA,EAe4B,CAA5B,CAAa,CAAN,EAAP,EAfA;CAAA,EAgBA,EAAa,CAAN;CAhBP,EAiB4B,CAA5B,CAAa,CAAN;CAjBP,EAkB4B,CAA5B,CAAa,CAAN,YAAqB;CAlB5B,EAqBoB,CAApB;CArBA,EAyBY,CAAZ,CAzBA,GAyBA,UAAY;CAzBZ,CA0BmC,CAAR,CAA3B,CAAK,IAAuB,WAA5B;CACI,EAAsB,CAAtB,CAAC,CAAD;CAAA,EACW,EAAV,CAAD;CADA,IAEC,CAAD;CACA,YAAO;CAJX,IAA2B;CA7B/B,EAAa;;CAoCb;;;;;;;;;;AApCA;;CAAA,CA8C+B,CAAR,MAAC,WAAxB;CACI,EAAiB,CAAjB;CAAA,EACiB,CAAjB,EADA,OACA;CACC,UAAD;CAjDJ,EA8CuB;;CAMvB;;;;;AApDA;;CAAA,EAyDkB,YAAlB;CACI;CAAA;CAAA;uBAAA;CACI,GAAG,EAAH;CACI,KAAa,SAAN;OAFf;CAAA;CAGA,UAAO;CA7DX,EAyDkB;;CAOlB;;;;;AAhEA;;CAAA,EAqEa,MAAC,CAAd;CACI,WAAO;CAAP,UACS;CACD;CAAA,OACA;CADA,GAEC,IAAD;CAHC;CADT,UAKS;CACD;CAAA,OACA;CADA,GAEC,IAAD;CAHC;CALT,UASS;CACD;CAAA,OACA;CADA,GAEC,IAAD;CAHC;CATT,UAaS;CACD;CAAA,OACA;CADA,GAEC,IAAD;CAHC;CAbT,UAiBS;CACD;CAAA,OACA;CADA,GAEC,IAAD;CAHC;CAjBT,UAqBS;CACD;CAAA,OACA;CADA,GAEC,IAAD;CAHC;CArBT,UAyBS;CACD;CAAA,OACA;CADA,GAEC,IAAD;CAHC;CAzBT,UA6BS;CACD;CAAA,OACA;CADA,GAEC,IAAD;CAHC;CA7BT;CAkCQ,cAAO;CAlCf,IADS;CArEb,EAqEa;;CAuCb;;;;AA5GA;;CAAA,EAgHe,UAAf;;CAYA;;;;;;;;;AA5HA;;CAAA,EAqIoB,eAApB;CAII;OAAA;CAAA,EAAyB,CAAzB;CAAA,EACyB,CAAzB;CADA,EAEyB,CAAzB;CAFA,EAGyB,CAAzB,CAHA,eAGA;CAHA,EAIyB,CAAzB;CAJA,EAKyB,CAAzB;CALA,EAMyB,CAAzB;CANA,EAOyB,CAAzB;CAPA,EAQyB,CAAzB;CARA,EASyB,CAAzB;CATA,EAUyB,CAAzB;CAVA,EAWyB,CAAzB;CAXA,EAYyB,CAAzB;CAZA,EAayB,CAAzB;CAbA,EAcyB,CAAzB;CAdA,EAeyB,CAAzB;CAfA,EAgByB,CAAzB;CAhBA,EAiByB,CAAzB;CAjBA,EAkByB,CAAzB;CAlBA,EAmByB,CAAzB;CAnBA,EAoByB,CAAzB;CApBA,EAqByB,CAAzB;CArBA,EAsByB,CAAzB;CAtBA,EAuByB,CAAzB;CAvBA,EAwByB,CAAzB;CAxBA,EA0BI,CADJ;CACI,CAAuB,EAAvB;CAAA,CACuB,EADvB,EACA;CADA,CAEuB,EAFvB,EAEA;CAFA,CAGuB,EAHvB,EAGA;CAHA,CAIuB,EAJvB,EAIA;CAJA,CAKuB,EALvB,EAKA;CALA,CAMuB,EANvB,EAMA;CANA,CAOuB,EAPvB,EAOA;CAPA,CAQuB,EARvB,EAQA;CARA,CASuB,EAAvB;CATA,CAUuB,EAVvB,EAUA;CAVA,CAWuB,EAXvB,EAWA;CArCJ;CAAA,EAyCoB,CAApB;CAIA;;;;AA7CA;CAAA,EAiDiB,CAAjB,KAAkB,KAAlB;CACI,GAAG,CAAC,CAAJ;CACI,EAAiB,EAAC,GAAlB,CAA2B,KAA3B;CAAA,CACwB,MAAxB;CADA,EAEqB,EAApB,GAAD;OAHJ;CAIA,GAAG,CAAC,CAAJ;CACI,CAAuB,MAAvB;CAAA,EAC0B,EAAzB,GAAD;OANJ;AAOI,CAAJ,GAAG,EAAH;CACI,IAAC,CAAM,EAAP,CAAiB;CADrB,EAEmB,SAAf;OAVS;CAjDjB,IAiDiB;CAjDjB,EA6DkB,CAAlB;CAIA;;;;AAjEA;CAAA,EAqEuB,CAAvB,KAAuB,WAAvB;CACI,EAAoB,GAApB,MAAoB;CAApB,EACoB,GAApB,MAAoB;CADpB,EAEoB,EAAnB,CAAD;CAFA,EAGoB,GAApB,KAHA;CAAA,EAIoB,GAApB,IAAoB,CAJpB;CAAA,EAKoB,GAApB,KAAoB;CALpB,EAMoB,GAApB,SAAoB,EAApB,EAAoB;CANpB,EAOoB,GAApB,KAPA,IAOA,EAAoB;CAPpB,EAQoB,GAApB,SAAoB;CACnB,EAAmB,EAAnB,QAAD;CA/EJ,IAqEuB;CAcvB;;;;;;AAnFA;CAAA,EAyFoB,CAApB,GAAoB,EAAE,UAAtB;CAEI,GAIiC,GAAX,CAAmB,EAJlC,KAIH;CA/FR,IAyFoB;CAzFpB,EAoGa,CAAb,CAAa,IAAC,GAAd;CACI,IAAO;CArGX,IAoGa;CApGb,CAyGoB,CAAR,CAAZ,CAAY,IAAC,EAAb;CACI,EAA0B,CAAf,CAAJ,EAAmB,MAAnB,MAAmB;CA1G9B,IAyGY;CAzGZ,EA8GkB,CAAlB,CAAkB,IAAC,MAAnB;CACI,aAAO;CAAP,YACS;CACD,gBAAO;CAFf,YAGS;CACD,CAA0B,GAAnB;CAJf,YAKS;CACD,IAAO;CANf,MADc;CA9GlB,IA8GkB;CAWlB;;;;;;;;AAzHA;CAAA,EAiIgB,CAAhB,KAAgB,KAAhB;CACI;AAAI,CAAJ,GAAG,CAAE,CAAL;CACI;OADJ;CAAA,EAOiB,EAAC,CAAlB,GAA2B,GAP3B,EAOA;CAPA,EAQiB,EAAC,CAAlB,GAA2B,EAR3B;CAWA,GAAG,EAAH,EAAG,MAAiB;CAChB,GAAG,CAAC,GAAJ,IAAG,CAAH;CACI,EAAiB,EAAC,GAAlB;CAAA,EACiB,EAAC,KAAlB,GADA,CACA;MAFJ;CAII,gBAAO;SALf;OAXA;CAmBA,GAAG,CAAY,CAAf,EAAG,KAAH;CACI;CACA;OArBJ;CAAA,EAsBiB,GAAjB,EAtBA,KAsBA;CAtBA,EAwBiB,CAAI,CAAJ,CAAjB,EAA6B,GAAD,EAA5B;CAxBA,EAyBiB,EAAhB,CAAD;CAzBA,EA0Ba,CACI,CAAJ,CADb,EAEgB,EAFhB,CAAa,EAEc;CA5B3B,EA+BwB,CAAI,EAA5B,GAAwB,KAAU,CAAlC;CA/BA,EAgCwB,CAAI,CAAJ,CAAxB,QAAmC,CAAX,MAAxB;CAhCA,EAiCwB,GAAxB,OAjCA,KAiCA,GAAwB;CAjCxB,EAkCwB,GAAxB,OAlCA,EAkCwB,EAAxB;CAlCA,EAmCwB,GAAxB,YAAwB;CAnCxB,EAqCwB,CAAI,CAAJ,CAAxB,KAAmC,IAAX,IAAxB;CArCA,EAsCwB,GAAxB,OAtCA,MAsCwB,EAAxB;CAtCA,EAuCwB,GAAxB,WAAwB,IAvCxB;CAAA,EA0CU,EAAV;CA1CA,EA2CU,GAAV;CA3CA,EA4CkB,GAAlB,EA5CA,MA4CA;CA5CA,EA6CkB,GAAlB,EA7CA,OA6CA;CACA;CAAA;yBAAA;CACI,EAAqB,EAAK,EAA1B;CAAA,EACqB,CAAI,CAApB,GAAL,KAAqB,CAAU;CAD/B,EAEqB,EAAhB,CAAL,GAFA,MAEqB;CAFrB,EAGqB,EAAhB,GAAL;CAHA,EAIqB,EAAhB,CAJL,CAIA;CAJA,EAKqB,EAAhB,EAAL;CALA,EAMqB,EAAhB,CAAL,CAAqB,CAArB,MAAqB;CANrB,EAOqB,EAAhB,GAAL,KAPA,CAOsB;CAPtB,CAQwC,CAAnB,CAArB,CAAK,CAAgB,EAArB;CARA,GASW,CAAX,CATA,EASA;CATA,GAUW,GAAX,OAVA;CAAA,CAW0C,CAAxB,CAAI,CAAyB,CAA7B,EAAlB;CAXA,CAY2C,CAAzB,CAAI,CAA0B,EAA9B,CAAlB;CAbJ,MA9CA;CAAA,EA4DW,EAAV,CAAD;CA5DA,EA6DgB,EA7DhB,CA6DA;CA7DA,CA8DqC,CAAgB,CAArD,CAAC,CAAD,CAAQ,CAAR,KAAqC;CA9DrC,EAiEqB,GAArB;CAjEA,EAkEqB,EAAC,CAAtB;CACA,EAAsB,CAAnB,EAAH,YAAG;CACC,EAAc,KAAd;MADJ;CAGI,EAAc,KAAd;OAtEJ;CAAA,EAuEI,GAAJ;CAvEA,EAwEI,EAAe,CAAnB,KAAI,OAxEJ;CAAA,EAyEI,EAA6B,CAAjC,CAAI,QAAU;CACd;CAAA;0BAAA;CACI,GAAgB,CAAL,CAAL,EAAN,EAAM;CAAN,EACI,EAAU,EAAL,CAAT,OAAQ;CADR,EAEI,KAAJ;CAFA,GAGK,IAAL,UAHA;CAAA,GAIK,IAAL;CAJA,EAKS,GAAT,WAAY;CALZ,EAMyB,GAAnB,CAAQ,CAAd;CANA,IAOC,CAAM,EAAP;CARJ,MA1EA;CAuFA,GAAG,EAAH;CACI;CAAA,OACA;OAzFJ;CADY,EA2FW,UAAvB;CA5NJ,IAiIgB;CAjIhB,EA8NiB,CAAjB,UA9NA;CAkOA;;;;;;;;;;AAlOA;CAAA,EA4Oc,CAAd,KAAc,EAAd;CACI;CAAA,CAA+B,CAAnB,CAAI,CAAM,CAAtB,CAAY,EAAZ,MAAY;CAAZ,EACkB,GAAlB;CADA,EAEqB,GAArB,SAFA,GAEA;CAFA,EAGW,CAAX,WAHA;CAAA,EAIA;CAJA,EAKW,GAAX;CALA,EAMW,EAAX;CANA,EAOW,GAAX;AAEA,WAAU,gDAAV;CACI,GAAG,CAAW,EAAX,CAAH;CAAqB;SAArB;CAAA,EACY,KAAZ,KAAY;CADZ,EAES,GAAT,OAAS;CAFT,KAGM,EAAN;CAHA,CAI6B,IAAvB,CAAN;CAJA,EAKsB,CALtB,CAKY,CAAN,EAAN,GAAsB;CALtB,EAMsB,CANtB,CAMY,CAAN,EAAN,GAAsB;CANtB,EAQI,EADJ;CACI,CAAO,EAAP;CAAA,CACO,EAAP,cADA;CAAA,CAEA,IAFA,IAEA;CAFA,CAGO,EAAP;CAHA,CAIU,KAAV;CAJA,CAKA,EALA,MAKA;CAbJ;CAAA,EAc0B,CAA1B,CAdA,GAcA,UAAkB;CAdlB,EAeqB,EAfrB,GAeA;CAfA,EAgBwB,EAAZ,CAAN,CAAN,GAAwB;CAhBxB,IAiBC,CAAD,CAAQ,CAAR;CAjBA,GAkBW,GAAX;CACA,GAAG,CAAW,EAAX,CAAH;CAEI,GAAW,GAAX;CAAA,EACW,EAAX,CAAmB,IAAnB;CADA,EAEW,IAAX;CAFA,EAGA;CAHA,EAIuB,CAAvB,KAAW,CAAX,KAJA;MAFJ;CASI,GAAQ,MAAR;CACA,EAAG,EAAO,KAAV;CACI;CAAA,EACA;WAZR;SApBJ;CAAA,MATA;CAAA,EA4CQ,GADR;CACQ,CAAU,EAAV,WAAyB;CAAzB,CACU,KAAV;CADA,CAEU,EAAV,CAFA,GAEA;CAFA,CAGU,CAAU,GAApB,GAAU;CAHV,CAIW,KAAX;CAJA,CAOkB,EAPlB,IAOA;CAPA,CAQkB,EARlB,IAQA;CARA,CASkB,EATlB,IASA;CATA,CAUkB,EAVlB,IAUA;CAVA,CAamB,EAbnB,IAaA;CAbA,CAcmB,EAdnB,IAcA;CAdA,CAemB,EAfnB,IAeA;CAfA,CAgBmB,EAhBnB,IAgBA;CA5DR;CAAA,EA6DoB,CAApB,CAAY,CAAZ;CA7DA,EA8DoB,CAAT,CA9DX,CA8DA;CA9DA,EA+DU,EAAT,CAAD;CA/DA,EAgE8B,EAhE9B,CAgEA,EAAQ,UAAR;CAEM,CAAiB,CAAW,EAA7B,IAAL;CACI,GAAG,CAAH;CACI,MAAO,GAAP;SADJ;CAEa,CAAW,CAAR,EAAhB;CAHJ,MAAkC;CA/StC,IA4Oc;CA0Ed;;;;AAtTA;CAAA,EA0Tc,CAAd,KAAc,EAAd;CACI;CAAA,EAAI,EAAC,CAAL,GAAc;CAAd,EACI,GAAJ,OADA;CAAA,EAEA,WAFA;CAAA,EAGK,GAAL,KAAkB;CAHlB,EAIO,CAAP,CAAO,CAAP;CAJA,EAKO,CAAP;CALA,EAMQ,CAAuB,CAA/B,MAAS;CACT,EAAU,CAAP,EAAH;CACI,EAAO,CAAP,CAAO,GAAP;CAAA,EACO,CAAP;OATJ;CAUA,EAAU,CAAP,EAAH;AAC0B,CAAtB,GAA0B,CAAzB,CAAM,EAAP;CACA;OAZJ;CAaA,EAAO,CAAJ,EAAH;CACI,IAAC,CAAM,EAAP;OAdJ;CAeA,EAAU,CAAP,EAAH;AAC0B,CAArB,EAAD,EAAC,CAAM,KAAgB,IAAvB;OAjBM;CA1Td,IA0Tc;CAqBd;;;;AA/UA;CAAA,EAmVsB,CAAtB,GAAsB,EAAC,UAAvB;CACI,IAAC,CAAD,EAAiB,CAAiC,aAAjC;CAAjB,EACA,EAAC,CAAD,CAAiB,EAAkB;CAFjB,EAGO,UAAzB;CAtVJ,IAmVsB;CAKtB;;;AAxVA;CAAA,EA2ViB,CAAjB,IAAiB,CAAW,IAA5B;CACQ,IAAC,CAAD,GAAiB;CADG,EAEL,SAAf;CAFS,CAGX,EAHW,CAAW;CAO5B;;;;AAlWA;CAAA,EAsWe,CAAf,KAAe,GAAf;CACI;CAAA,EAA0B,CAA1B,CAAC,CAAD;CAAA,EAC0B,CAD1B,CACC,CAAD;CADA,KAEA;CAFA,EAKoB,EAAC,CAArB,GAA8B,QAA9B;CALA,EAMQ,CAAI,CAAZ,SAAQ,GAAS;CACjB,EAAW,CAAR,EAAH;CACI;CACA;OATJ;CAAA,EAWO,CAAP;CAXA,EAcgC,CAdhC,EAcA,EAAQ;CAdR,EAegC,CAfhC,EAeA,EAAQ,IAAR;CAfA,EAgBgC,CAhBhC,EAgBA,EAAQ,OAAR;CAhBA,EAiBgC,CAjBhC,EAiBA,EAAQ;CAjBR,EAkBgC,CAlBhC,EAkBA,EAAQ,MAAR;CAlBA,EAmBgC,CAnBhC,EAmBA,EAAQ;CAnBR,EAoBgC,CApBhC,EAoBA,EAAQ;CApBR,EAqBgC,CArBhC,EAqBA,EAAQ;CArBR,EAsBgC,CAtBhC,EAsBA,EAAQ,EAAR;CAtBA,EAuBgC,CAAhC,IAAQ;CAvBR,EAwBgC,GAAhC,EAAwC,UAxBxC,SAwBA;CAxBA,EAyBgC,CAzBhC,EAyBA,EAAQ,UAAR;CAzBA,EA0BgC,CA1BhC,EA0BA,EAAQ,YAAR;CA1BA,KA4BA;CAEA,EAAqB,CAAlB,EAAH,EAAW;CAMP,CAC4C,CAAxC,CAAI,EAAK,CADb,UACI;CACJ,GAAG,EAAH,CAAG,CAAH;CAGI;CAAA,EACgB,CAAI,IAApB;CADA,EAEgB,CAAI,MAApB,KAFA;CAAA,EAGgB,CAAI,KAApB,EAHA;CAAA,EAIgB,CAAI,GAApB,EAJA,CAIA;MAPJ;CAYI,EAAgB,IAAhB;CAAA,EACgB,KAAQ,EAAxB,EADA,CACA;CADA,EAEgB,KAAQ,CAAxB;CAFA,EAGgB,GAHhB,CAGA,CAAwB,EAAxB;SAjBJ;CAmBA,EAAa,CAAV,IAAH;CACI,CAA8B,CAAS,EAAlC,EAAL,EAAwC,CAAxC;CACiB,CAAW,CAAR,EAAhB;CADJ,UAAuC;CAAvC,CAGsB,KADtB;SA5BR;CAkCiB,EAAU,CAAnB,EAlCR,CAkCQ,CAlCR;CAwCI,CAAoD,CAA1C,CAAI,GAAd,UAAU;CAEV,GAAG,GAAH;CAGI;CAAA,EACgB,CAAI,IAApB,GADA;CAAA,EAEgB,CAAI,MAApB,MAFA;CAAA,EAGgB,CAAI,KAApB,GAHA;CAAA,EAIgB,CAAI,GAApB;MAPJ;CAYI,EAAgB,GAAhB;CAAA,EACgB,GADhB,EACwB,CAAxB;CADA,EAEgB,KAAQ,EAAxB;CAFA,EAGgB,CAHhB,GAGA,CAAwB,EAAxB;SAjBJ;CAmBA,EAAa,CAAV,IAAH;CACI,CAA6C,CAAd,EAA1B,EAAe,EAAmC,CAAvD;CACI,GAAG,CAAH;CACI,MAAO,OAAP;aADJ;CAEa,CAAW,CAAR,EAAhB;CAHJ,UAAsD;CAAtD,CAKkB,KADlB;SAhER;OA9BA;CAmGA,GAAI,EAAJ;CAGa,EAAuB,KAAxB,OAAR;OAvGO;CAtWf,IAsWe;CAtWf,EAgdoB,CAApB,KAAoB,QAApB;CACI;CAAA,EAAY,CAAZ;CAAA,EACY,CAAI,CAAhB;CADA,EAEY,EAAK,CAAjB;CAFA,EAGY,EAAK,CAAjB;CAHA,EAIY,EAAC,CAAb;CAJA,EAMU,EAAV,EAAiB;CANjB,EAOU,CAPV,CAOe,CAAf;CAPA,EAQU,GAAV;CARA,EASA,CAAc,CAAJ,CAAV,CAAqB,MAAX;CATV,EAUU,CAAV,CAAe,CAAf,GAVA,MAUU;CAVV,EAWA,IAAW,MAXX;CAAA,EAaoB,CAbpB,EAaA;CAbA,EAcoB,CAAI,EAAxB;AACA,WAAU,qDAAV;CACI,GAAG,CAAW,EAAX,CAAH;CAAqB;SAArB;AACI,CAAJ,CAA2C,CAAjB,CAAvB,CAAqC,GAAxC,SAAG;CAIC,EACI,OADJ;CACI,CAAM,CAAN,EAAoB,GAAd,IAAN;CAAA,CACA,GAAW,OAAX;CANR,WAII;SALJ;CAAA,CAQuB,CAAR,EAAf;CARA,EASA,CAAe,CAAV,GAAL;CATA,EAUe,CAAf,CAAK,GAAL,EAAgB;CAVhB,GAWW,GAAX;CACA,GAAG,CAAW,EAAX,CAAH;CAEI,GAAW,GAAX;CAAA,EACW,EAAX,CAAkB,IAAlB;CADA,EAEW,IAAX;CAFA,EAGA;CAHA,EAIuB,CAAvB,KAAW,CAAX,KAJA;MAFJ;CASI,GAAQ,MAAR;CACA,EAAG,EAAO,KAAV;CACI;CAAA,EACA;WAZR;SAZA;CAAA,EAyBQ,CAzBR,CAyBA;CA1BJ,MAfA;CA0CA,GAAG,EAAH;CAGI,CAC0C,CAD7B,EACmC,GADhD,SAA8B;CAE7B,GAAuB,CAAvB,IAAS,MAAV;OAhDY;CAhdpB,IAgdoB;CAmDpB;;;;;;AAngBA;CAAA,CAygBuB,CAAR,CAAf,CAAe,IAAC,GAAhB;CACI;CAAA,EAAY,EAAiB,CAA7B;CAAA,EACY,CAAZ;CADA,EAEY,CAAI,CAAhB;CAFA,EAGuB,GAAvB,EAA+B,UAA/B;CAHA,EAIuB,CAJvB,EAIA,YAAyC,EAAzC;CAJA,EAKQ,CAAR;CALA,EAMQ,CAAI,CAAZ;CAMA,EAA0B,CAAvB,EAAH,cAAG;CACC,EAAK,CAAL,cAAuB;CACvB,cAAM;CACF,CAAG,GAAM,KAAT;CACI;WADJ;CAEA,CAAK,EAAF,CAAW,IAAd;CACI,EAAuB,SAAvB;CAAA,CACyB,CAAF,CADvB,QACA;CACA,iBAHJ;WAFA;CAAA,CAMA,CAAK,CANL,MAMA;CATR,QAEI;OAdJ;CAsBA,EAAe,CAAZ,EAAH,GAAG,WAAH;CACI,EAAK,CAAL,cAAuB;CACvB,cAAM;CACF,CAAG,GAAM,KAAT;CACI;WADJ;CAEA,CAAK,EAAF,CAAW,IAAd;CACI,EAAuB,SAAvB;CAAA,CACyB,CAAF,CADvB,QACA;CACA,iBAHJ;WAFA;CAAA,CAMA,CAAK,CANL,MAMA;CATR,QAEI;OAxBJ;CAAA,EAkCQ,EAAR,aAlCA;AAmCA,WAAc,mGAAd;CACI,EAA+B,CAA/B,CAAqC,GAArC;CAAA,EAC+B,CAAI,EAAnC;CADA,EAE+B,EAAK,CAApC;CAFA,EAG+B,CAA/B,EAAM,EAAN;CAHA,EAIA,GAAM,EAAN,SAAwB,IAAQ;CAJhC,CAMA,CAA+B,GAAzB,CAAQ,CAAd;CANA,CAOA,CAA+B,EAA1B,CAPL,EAOA;CAPA,EAQ+B,CAR/B,CAQA;CACA,GAAG,CAAC,CAAU,EAAd;CACI,CAAqC,EAArC,EAAM,IAAN;CAAA,EACoB,EAAnB,CAAS,IAAV;MAFJ;CAII,CAAqC,GAArC,CAAM,IAAN;SAdR;CAAA,MAnCA;CAAA,EAoDQ,CApDR,CAoDA,aAA0B;AAC1B,WAAc,2EAAd;CACI,EAAS,CAAT,CAAe,GAAf;CAAA,EACS,CAAI,EAAb;CADA,EAEoB,EAAK,CAAzB;CAFA,EAGoB,CAApB,EAAM,EAAN;CAHA,EAIA,GAAM,EAAN,aAAqB;CAJrB,CAMA,CAAoB,GAAd,CAAQ,CAAd;CANA,CAOA,CAAoB,EAAf,CAPL,EAOA;CAPA,EAQoB,CARpB,CAQA;CACA,GAAG,CAAC,CAAS,EAAb;CACI,CAAqC,EAArC,EAAM,IAAN;CAAA,EACoB,EAAnB,CAAS,IAAV;MAFJ;CAII,CAAqC,GAArC,CAAM,IAAN;SAdR;CAAA,MArDA;CAuEA,GAAG,EAAH;CACI,GAAqB,CAApB,GAAD;CADJ,EAEwB,YAApB;OA1EO;CAzgBf,IAygBe;CAzgBf,EAslBsB,CAAtB,KAAsB,UAAtB;CACI;CAAA,EAAO,CAAP;CAAA,EACkB,CAAI,EAAtB,CAAkB,IAAlB;AACmB,CAAnB,GAAG,CAAe,CAAlB,KAAG;CACC;OAHJ;CAAA,EAIuB,CAAnB,EAAJ;CAJA,EAMc,GAAd,EAAsB,EANtB,CAMA;AACA,WAAe,4CAAf;CACI,EAAQ,EAAR,CAAe,EAAf;CACA,GAAG,CAAK,EAAL,CAAH;CACI,eADJ;SAFJ;CAAA,MAPA;CAAA,EAWwB,CAApB,EAAJ,CAXA,SAWA;CAXA,EAYwB,EAAmB,CAA3C,KAAwB;CAZxB,EAawB,CAAI,CAAJ,CAAxB,CAAmC,GAAnC,GAAwB;CAbxB,EAcwB,CAApB,CAAyB,CAA7B,GAdA,CAcA,KAAwB;CACnB,EAAmB,CAApB,GAAoB,KAAxB;CAtmBJ,IAslBsB;CAtlBtB,EAymBqB,CAArB,KAAqB,SAArB;CACI;CAAA,EAAO,CAAP;CAAA,EACiB,CAAI,EAArB;CACA,GAAG,CAAc,CAAjB,IAAG;CACC;OAHJ;CAAA,EAIkB,CAAd,EAAJ;CAJA,EAMc,GAAd,EAAsB,GAAtB,CANA;AAOA,WAAe,wEAAf;CACI,EAAQ,EAAR,CAAe,EAAf;CACA,GAAG,CAAmB,CAAtB,IAAG;CACC,eADJ;SAFJ;CAAA,MAPA;CAAA,EAWuB,CAAnB,EAAJ,CAXA,QAWA;CAXA,EAYuB,EAAkB,CAAzC,IAAuB;CAZvB,EAauB,CAAI,CAAJ,CAAvB,CAAkC,GAAlC,GAAuB;CAbvB,EAcuB,CAAnB,CAAwB,CAA5B,IAAmD,KAA5B;CAClB,EAAkB,CAAnB,GAAmB,IAAvB;CAznBJ,IAymBqB;CAkBrB;;;AA3nBA;CAAA,EA8nBmB,CAAnB,KAAmB,OAAnB;CAEI;CAAA;CAAA,KAEA;CAFA,EAIsB,GAAtB,UAAsB,GAAtB;CAGA,GAAG,EAAH;CACI;OAVW;CA9nBnB,IA8nBmB;CAYnB;;;AA1oBA;CAAA,EA6oBqB,CAArB,KAAqB,SAArB;CACI;CAAA,EAAK,GAAL;CAAA,EACK,GAAL,WADA;CAEA;CAAA;8BAAA;CACI,EAAmB,CAAhB,CAAK,EAAL,CAAH;CACI,eADJ;SADJ;CAAA,MAFA;CAAA,EAKa,CAAI,CAAJ,CAAb,GAAa,CAAb,KAAwB;CACxB,EAAgB,CAAb,EAAH,IAAG;CAEC,EAAa,KAAb;OARJ;CAAA,CASE,CAAsB,EAAK,CAA7B,IAAwC,GATxC;CAAA,CAUE,CAAsB,EAAK,CAA7B,GAVA,CAUoD,KAA5B;CAVxB,CAWE,CAAsB,GAAxB,CAXA,KAWA;CAXA,CAYE,CAAsB,GAAxB;CAZA,CAaE,CAAsB,CAbxB,EAaA;CAbA,CAcE,CAAsB,GAAxB,IAdA,KAcA;CAdA,CAeE,CAAsB,GAAxB,CAfA,OAeA;CACoB,MAApB;CA9pBJ,IA6oBqB;CAoBrB;;;;AAjqBA;CAAA,EAqqBsB,CAAtB,KAAsB,WAAtB;CACI;CAAA,EAAK,GAAL;CAAA,CACe,CAAF,GAAb,SAAa,MADb;CAGA,GAAG,EAAH,IAAG;CAGC,CAAkB,CAAV,EAAR,CAAgB,EAAhB,IAAgB;CAAhB,CACE,CAAW,EAAK,EAAlB,GAA6B,GAD7B;CAAA,CAEE,CAAW,EAAK,CAAlB,GAFA,CAEyC,KAA5B;CAFb,CAGE,CAAmB,KAArB,EAHA,KAGA;CACA;MAPJ;CAYI,CAAa,CAAF,KAAX;AACA,aAAS,6CAAT;CACI,EAAQ,EAAR,CAAgB,IAAhB;CACA,EAAc,CAAX,CAAgB,GAAhB,EAAH;CACI,EAAqB,EAAK,GAA1B,aAAqB;CAArB,CACE,CAAmB,EAAK,EAA1B,GAAqC,EAArC,CADA;CAAA,CAEE,CAAmB,EAAK,CAA1B,GAFA,CAEiD,EAAjD,GAAqB;CAFrB,CAGE,CAAmB,OAHrB,EAGA;CAHA,CAIE,CAAmB,SAArB;CACA;MANJ;CASI,GAAY,CAAK,GAAjB;WAXR;CAAA,QAbJ;OAHA;CAAA,CA6BE,CAAmB,GAArB;CA7BA,CA8BE,CAAmB,GAArB;CA9BA,CA+BE,CAAmB,GAArB;CA/BA,CAgCE,CAAmB,GAArB;CACG,CAAD,CAAmB,GAArB;CAvsBJ,IAqqBsB;CAqCtB;;;;;;;AA1sBA;CAAA,EAitBmB,CAAnB,KAAmB,OAAnB;CACI;CAAA,EAAK,GAAL;CAAA,CACW,CAAF,GAAT,CAAS;CAET,GAAG,CAAW,CAAd;CACI,EAAS,EAAC,CAAV,CAAS,CAAT;CAAA,EACkB,GAAlB;CAEA,cAAO;OAPX;AASA,WAAe,uIAAf;CACI,EAAQ,EAAR,CAAe,EAAf;CACA,GAAG,CAAe,CAAf,EAAH;CACI,eADJ;SAFJ;CAAA,MATA;CAAA,EAca,EAAc,CAA3B,CAdA,EAcA;CAdA,EAea,CAAI,CAAJ,CAAb,GAAwB,CAAxB,GAAa;CAfb,EAgBsB,GAAtB,EAAQ;CAhBR,EAiBsB,GAAtB,CAjBA,CAiBQ,EAAR;CAjBA,EAkBsB,GAAtB,EAAQ,CAAc,IAlBtB;CAAA,EAmBsB,CAAtB,CAA2B,CAA3B,EAAQ,CAnBR,CAqBsB,KAFA;CAGtB,YAAO;CAxuBX,IAitBmB;CAyBnB;;;AA1uBA;CAAA,EA6uBiB,CAAjB,KAAiB,KAAjB;CACI;CAAA,EAAK,GAAL;CAAA,EACe,EAAC,CAAhB;CADA,EAEe,GAAf;CAFA,EAGe,GAAf;CAHA,EAIe,GAAf,WAJA;AAKA,WAAe,wCAAf;CACI,EAAQ,EAAR,CAAe,EAAf;CAAA,GACc,CAAK,EADnB,CACA;CACA,GAAG,IAAH,EAAG,EAAH;CACI,eADJ;SAHJ;CAAA,MALA;CAUA,EAAgB,CAAb,EAAH,IAAG,EAAH;CAII,CAAE,CAAmB,KAArB;CAAA,CACE,CAAmB,KAArB;CADA,CAEE,CAAmB,IAArB;CACG,CAAD,CAAmB,EAAK,CAA1B,KAAqB,IAArB;MAPJ;CASI,EAAa,EAAC,EAAD,CAAb;CAAA,CACa,GAAU,EADvB,CACA;CADA,EAEa,CAAI,CAAJ,GAAb,CAAwB,CAAxB,GAAa;CAFb,CAIE,CAAmB,IAJrB,CAIA;CAJA,CAKE,CAAmB,KAArB,EALA,KAKA;CALA,CAME,CAAmB,KAArB,CAAqB,IANrB;CAAA,CAOE,CAAmB,IAArB;CACG,CAAD,CAAmB,EAAK,CAA1B,IAGqB,CAHA,IAArB,EAAqB;OA5BZ;CA7uBjB,IA6uBiB;CA7uBjB,CAgxB+B,CAAV,CAArB,EAAqB,GAAC,UAAtB;CACI;CAAA,EAAkB,GAAlB;CAAA,EACU,CAAV;CADA,EAEA,KAFA;CAAA,EAGU,EAAV,EAAkB;CAHlB,EAIU,EAAe,CAAzB;CAIA,GAAG,CAA+B,CAAlC,EAAW,UAAR;CACC,EAA8B,EAA9B,CAAoC,EAApC;OATJ;AAWA,WAAU,8DAAV;CACI,GAAG,CAAW,EAAX,CAAH;CACI;SADJ;CAAA,EAEQ,EAAR,CAAc,EAAd;CAFA,EAGsB,EAAK,CAA3B;CAHA,EAIsB,CAAtB,EAAM,CAAQ,CAAd;CAJA,EAKsB,CAAtB,CAAK,GAAL;CALA,EAMsB,EAAjB,EAAL;CANA,EAOA,GAAM,EAAN;CAPA,CAQA,CAAsB,GAAhB,CAAQ,CAAd;CARA,EASa,EAAb,CAAmB,EAAnB;CATA,EAUA,CAAa,CAAR,GAAL;CAVA,EAWa,CAAb,CAAK,GAAL,EAAc;CAGd,CAAG,GAAM,GAAT;CACI,EAA8B,EAA9B,GAAQ,EAAR;SAfJ;CAAA,EAgBmB,CAAnB,CAhBA,CAgBM,EAAN;CAhBA,EAiBmB,CAjBnB,CAiBA,CAAM,EAAN;CAjBA,EAkBmB,CAlBnB,CAkB+B,CAAzB,CAAN;CAlBA,EAmBmB,CAAR,EAAL,EAAN;CAnBA,GAoBW,GAAX;CACA,GAAG,CAAW,EAAX,CAAH;CAEI,GAAW,GAAX;CAAA,EACW,EAAX,CAAmB,IAAnB;CADA,EAEW,IAAX;CAFA,EAGA;CAHA,EAIuB,CAAvB,KAAW,CAAX,KAJA;MAFJ;CASI,GAAQ,MAAR;CACA,EAAG,EAAO,KAAV;CACI;CAAA,EACA;WAZR;SAtBJ;CAAA,MAXA;CAAA,CA+CiB,IAAjB;CA/CA,EAgDiB,CAhDjB,CAgD6B,CAA7B;CAhDA,EAkDyB,GAAzB;CAlDA,EAmDyB,GAAzB;CAnDA,EAoDyB,CApDzB,EAoDA;CACO,EAAkB,GAAnB,OAAN;CAt0BJ,IAgxBqB;CAhxBrB,CA00B4B,CAAV,CAAlB,EAAkB,GAAC,OAAnB;CACI;CAAA,EAAU,CAAV;CAAA,EACA,KADA;CAAA,EAEU,EAAV,EAAkB;CAFlB,EAGU,EAAe,CAAzB;CAIA,GAAG,CAA+B,CAAlC,EAAW,UAAR;CACC,EAA8B,CAA9B,EAAoC,EAApC;OARJ;AAUA,WAAU,+DAAV;CACI,EAAsB,CAAtB,EAA4B,EAA5B;CAAA,EACsB,EAAK,CAA3B;CADA,EAEsB,CAAtB,EAAM,CAAQ,CAAd;CAFA,EAGsB,CAAtB,CAAK,GAAL;CAHA,EAIsB,EAAjB,EAAL;CAJA,EAKA,GAAM,EAAN;CALA,CAMA,CAAsB,GAAhB,CAAQ,CAAd;CANA,EAOsB,EAAtB,CAA4B,EAA5B;CAPA,EAQA,CAAsB,CAAjB,GAAL;CARA,EASsB,CAAtB,CAAK,GAAL,EAAuB;CAGvB,CAAG,GAAM,GAAT;CACI,EAA8B,EAA9B,GAAQ,EAAR;SAbJ;CAAA,EAcoB,CAdpB,CAcA,CAAM,EAAN;CAdA,EAeoB,CAApB,EAAM,EAAN;CAfA,EAgBoB,CAAW,EAAzB,EAAN;CAhBA,EAiBoB,CAApB,CAAY,CAAN,EAAN;CAjBA,GAkBoB,GAApB;AACe,CAAf,GAAG,CAAW,EAAX,CAAH;CACI,CAAG,GAAM,KAAT;AACU,CAAN,EAAK,SAAL;CACA,iBAFJ;WAAA;CAAA,IAIA;CAJA,GAKW,GAAX;CALA,EAMW,EAAX,CAAmB,IAAnB;CANA,EAOW,EAAK,EAAhB;CAPA,EAQA,EAAgB,KAAhB,EARA;CAAA,EASyB,CAAzB,KATA,CASA,CAAW;MAVf;CAaI,GAAQ,MAAR;AACW,CAAX,EAAG,EAAO,KAAV;CACI;CAAA,EACA,UAAQ;WAhBhB;SApBJ;CAAA,MAVA;CAAA,CAgDiB,IAAjB;CACO,EAAU,CAAW,EAAtB,OAAN;CA53BJ,IA00BkB;CA10BlB,EAg4BoB,CAApB,CAAoB,IAAC,QAArB;CACI;CAAA,GAAG,CAAK,CAAR;CACI,EAAS,EAAK,CAAd;MADJ;CAGI,EAAS,GAAT,OAAS;CAAT,EACA,GAAM,EAAN,CAAgB,cAAhB;CADA,IAEC,CAAD,CAAQ,CAAR;CAFA,EAGe,EAAV,CAAL;OANJ;CAAA,EAOqB,CAAU,CAAL,CAA1B;CAPA,EAQA,CARA,CAQY,CAAZ,OAAqB;CACd,EAAc,CAArB,CAAY,CAAN,IAA0B,GAAhC;CA14BJ,IAg4BoB;CAh4BpB,EA84BqB,CAArB,KAAsB,SAAtB;CACI;CAAA,EAAU,GAAV;CACA,GAAG,EAAH;CACI,EAAuB,EAAtB,CAA8B,EAA/B,CAAU;CACV;OAJa;CA94BrB,IA84BqB;CA94BrB,EAs5BmB,CAAnB,KAAmB,OAAnB;CACI,IAAC,CAAD,GAAiB,IAAjB;CADe,EAEA,SAAf;CAx5BJ,IAs5BmB;CAt5BnB,EA45BmB,CAAnB,KAAmB,OAAnB;CACI,IAAC,CAAD,GAAiB;CAAjB,IACC,CAAD,GAAiB,IAAjB;CACA;CA/5BJ,IA45BmB;CA55BnB,GAm6BA;CAn6BA,GAo6BA;CAp6BA,GAq6BA;CAr6BA,EAs6B0B,CAA1B;CAt6BA,CA06B4C,EAA5C,GAAQ,MAAR;CA16BA,CA26B4C,EAA5C,GAAQ,GAAR;CA36BA,CA46B4C,EAA5C,KAAU,KAAV;CA56BA,CA66B4C,EAA5C,EAAO,CAAP;CA76BA,CA86B4C,EAA5C,EAAO,MAAP;CACC,CAA2C,EAA3C,EAAM,KAAP;CAxjCJ,EAqIoB;;CArIpB,EAgkCe,MAAC,IAAhB;CACI;CAAA,EAAK,CAAL;AACW,CAAX,CAAa,CAAb,IAAW,EAAY,EAAhB;CACH,EAAK,GAAL;CACA,CAAY,EAAF,EAAV,EAAU,CAAY;CAAtB;OAFJ;CADA,IACA;AAII,CAAJ,CAAI,EAAJ,WAAI;CAA0B,YAAO;KALrC;CAAA,CAMoB,EAApB,OAAgC,KAAhC;CANA,EAOkB,CAAlB,KAA4B,GAA5B;CAPA,EAQkB,CAAlB,KAA2C,GAAzB,GAAlB;CARA,CASY,EAAZ,OAAwB;CATxB,EAUY,CAAZ,EAAY,GAAZ,EAVA;CAWA,EAAqB,CAArB,WAAG;CACC,CAAE,GAAF;KAZJ;CAaA,EAAY,CAAZ,EAAG,MAAH;CACO,CAAD,EAAF;KAfO;CAhkCf,EAgkCe;;CAhkCf,EAklCkB,MAAC,OAAnB;CACI;CAAA,EAAK,CAAL;AACW,CAAX,CAAa,CAAb,IAAW,EAAY,EAAhB;CACH,EAAK,GAAL;CACA,CAAY,EAAF,EAAV,EAAU,CAAY;CAAtB;OAFJ;CADA,IACA;CADA,CAKA;CALA,CAMoB,EAApB,OAAgC,KAAhC;CACC,IAAK,MAAN;CA1lCJ,EAklCkB;;CAWlB;;;;;AA7lCA;;CAAA,EAkmCiB,MAAC,MAAlB;CAEI,CAAG,EAAH,CAAwB,CAAf,CAAQ;CACb,YAAO;KADX;CAGA,CAAa,EAAb,EAAmB,CAAQ,CAAd;CACT,YAAO;KAJX;CAAA,GAMA;CANA,CAOqC,EAArC,EAAM,MAAN;CACC,CAAS,CAAqB,CAA9B,EAAe,CAAQ,CAAd,GAAV;CA5mCJ,EAkmCiB;;CAlmCjB,EA+mCc,SAAd;CACI;CAAA;CAAA;UAAA;wBAAA;AACO,CAAH,GAAG,CAAkB,CAArB;CACI,CAAqC,GAArC,CAAM,EAAN;CAAA,CACU,CAAM,CAAf,IAAS;MAFd;CAAA;OADJ;CAAA;oBADU;CA/mCd,EA+mCc;;CA/mCd,EAsnCoB,eAApB;CACI;CAAA;CAAA;wBAAA;AACO,CAAH,GAAG,CAAkB,CAArB;CACI,cAAO;OAFf;CAAA;CAGA,UAAO;CA1nCX,EAsnCoB;;CAtnCpB,EA6nCkB,aAAlB;CAEI;CAAA;CAAA;wBAAA;AACO,CAAH,GAAG,CAAkB,CAArB;CACI,aADJ;OADJ;CAAA;CAAA,EAIa,CAAb,EAAa,IAAb,IAAa;CACb,IAAiB,KAAd;CAAwB,YAAO;KALlC;CAAA,EAMoB,CAApB,MAAoB,CAAY,KAAhC;AACI,CAAJ,SAAI;CAAkC,YAAO;KAP7C;CAQC,SAAD;CAvoCJ,EA6nCkB;;CA7nClB,EA0oCsB,iBAAtB;CAEI;CAAA,EAAS,CAAT,cAAS;CAAT,EAEa,CAAb,EAAa,IAAb,QAAa;CACb,IAAiB,KAAd;CAAwB,YAAO;KAHlC;CAAA,EAIoB,CAApB,MAAoB,CAAY,KAAhC;AACI,CAAJ,SAAI;CAAkC,YAAO;KAL7C;CAMC,SAAD;CAlpCJ,EA0oCsB;;CA1oCtB,EAqpCgB,WAAhB;CACI;CAAA,EAAS,CAAT,cAAS;CACT,IAAa,CAAV;CACC,YAAO;KAFX;CAGA,IAA0B,CAAjB,CAAQ;CACb,YAAO;KAJX;CAKA,IAAwB,WAArB;CACC,EAAO,CAAP,OAAmB;MADvB;CAGI,EAAO,CAAP;KARJ;CAAA,EASA,EAAmB,CAAN;CATb,CAUA,CAAO,CAAP,EAAO;CACP,CAAG,EAAH,CAAS;CAAU,YAAO;KAX1B;CAYA,CAAQ,CAAR,CAAM,CAAQ,MAAR;CACF,CAAK,CAAL,CAAG,CAAmB,CAAtB,CAAa;CACT,CAAoB,EAAnB,IAAD,GAAgC,KAAhC;AACI,CAAJ,CAAI,EAAD,IAAH,OAAI;CAA0B,gBAAO;SADrC;CAAA,CAEA,EAAC,IAAD;CACA,cAAO;OAJX;CAKA,CAAK,CAAF,EAAQ,CAAX;CAGI,CAAG,MAAH,GAAe;AACP,CAAJ,CAAI,EAAD,MAAH,KAAI;CAA0B,kBAAO;WAArC;CAAA,CACA,EAAC,MAAD;CACA,gBAAO;SANf;OALA;CAAA,CAYA,CAAK,CAAC,EAAN,YAAK;CACL,CAAG,GAAM,CAAT;CAAmB,cAAO;OAd9B;CAZA,IAYA;AAeI,CAAJ,CAAI,EAAJ,WAAI;CAA0B,YAAO;KA3BrC;CAAA,CA4BA;CACA,UAAO;CAnrCX,EAqpCgB;;CArpChB,EAsrCkB,aAAlB;CACI;CAAA,EAAS,CAAT,cAAS;CACT,IAAa,CAAV;CACC,YAAO;KAFX;CAGA,EAA2C,CAA3C,CAAgC,CAA7B,CAA6B,IAAjB;CACX,YAAO;KAJX;CAKA,IAAwB,WAArB;CACC,EAAO,CAAP,OAAmB;MADvB;CAGI,EAAO,CAAP;KARJ;CAAA,EASA,EAAmB,CAAN;CATb,CAUA,CAAO,CAAP,EAAO;CACP,CAAG,EAAH,CAAS;CAAU,YAAO;KAX1B;CAAA,EAYyB,CAAzB,CAZA,iBAYA;CACA,CAAM,CAAN,CAAO,CAAwB,MAAzB;CACF,CAAG,CAAoC,CAApC,CAAyB,CAA5B,CAA4B,IAAb;CACX,CAAoB,EAAnB,IAAD,GAAgC,KAAhC;AACI,CAAJ,CAAI,EAAD,IAAH,OAAI;CAA0B,gBAAO;SADrC;CAAA,CAEA,EAAC,IAAD;CACA,cAAO;OAJX;CAKA,CAAK,CAAF,EAAQ,CAAX;CAGI,GAAG,IAAH;CACI,EAAK,CAAC,MAAN,QAAK;CACL,CAAG,GAAM,KAAT;CAAmB,kBAAO;WAD1B;AAEI,CAAJ,CAAI,EAAD,MAAH,KAAI;CAA0B,kBAAO;WAFrC;CAAA,CAGA,EAAC,MAAD;CACA,gBAAO;SALX;CAAA,EAMyB,CANzB,IAMA;CANA,CAOQ,CAAR,EAAc,GAAd;CACA,CAAG,MAAH,GAAe;AACP,CAAJ,CAAI,EAAD,MAAH,KAAI;CAA0B,kBAAO;WAArC;CAAA,CACA,EAAC,MAAD;CACA,gBAAO;SAdf;OALA;CAAA,CAoBA,CAAK,CAAC,EAAN,QAAK;CACL,CAAG,GAAM,CAAT;CAAmB,cAAO;OAtB9B;CAbA,IAaA;AAuBI,CAAJ,CAAI,EAAJ,WAAI;CAA0B,YAAO;KApCrC;CAAA,CAqCA;CACA,UAAO;CA7tCX,EAsrCkB;;CAtrClB,EAguCqB,gBAArB;CACI;CAAA,EAAS,CAAT,cAAS;CACT,IAAa,CAAV;CACC;KAFJ;CAGA,EAA2C,CAA3C,CAAgC,CAA7B,CAA6B,IAAjB;CACX;KAJJ;CAKA,IAAwB,WAArB;CACC,EAAO,CAAP,OAAmB;MADvB;CAGI,EAAO,CAAP;KARJ;CAAA,EASA,EAAmB,CAAN;CATb,CAUA,CAAO,CAAP,EAAO;CACP,CAAG,EAAH,CAAS;CAAU,YAAO;KAX1B;CAYA,CAAQ,CAAF,EAAQ,MAAR;CACF,CAAG,CAAoC,CAApC,CAAyB,CAA5B,CAA4B,IAAb;CACX,CAAoB,EAAnB,IAAD,GAAgC,KAAhC;AACI,CAAJ,CAAI,EAAD,IAAH,OAAI;CAA0B,gBAAO;SADrC;CAAA,CAEA,EAAC,IAAD;CACA;OAJJ;CAAA,CAKA,CAAK,CAAC,EAAN,QAAK;CACL,CAAG,GAAM,CAAT;CAAmB,cAAO;OAP9B;CAZA,IAYA;CAZA,CAoBA,CAAK,CAAL,cAAK;CACL,CAAG,EAAH,CAAS;CAAU,YAAO;KArB1B;CAAA,CAsBoB,EAApB,OAAgC,KAAhC;AACI,CAAJ,CAAI,EAAJ,WAAI;CAA0B,YAAO;KAvBrC;CAAA,CAwBA;CAzvCJ,EAguCqB;;CAhuCrB,EA6vCuB,kBAAvB;CACI;CAAA,EAAS,CAAT,cAAS;CACT,IAAa,CAAV;CACC;KAFJ;CAGA,IAAkC,CAA/B,CAAqB;CACpB;KAJJ;CAKA,IAAwB,WAArB;CACC,EAAO,CAAP,OAAmB;MADvB;CAGI,EAAO,CAAP;KARJ;CAAA,EASA,EAAkB,CAAN;CATZ,CAUA,CAAM,CAAN,EAAM;CACN,CAAG,EAAH,CAAS;CAAU,YAAO;KAX1B;CAYA,CAAQ,CAAF,EAAQ,MAAR;CACF,CAAG,GAAyB,CAA5B,KAAe;CACX,CAAoB,EAAnB,IAAD,GAAgC,KAAhC;AACI,CAAJ,CAAI,EAAD,IAAH,OAAI;CAA0B,gBAAO;SADrC;CAAA,CAEA,EAAC,IAAD;CACA;OAJJ;CAAA,CAKA,CAAK,CAAC,EAAN,YAAK;CAlBT,IAYA;CAZA,CAmBA,CAAK,CAAL,UAAK;CACL,CAAG,EAAH,CAAS;CAAU,YAAO;KApB1B;CAAA,CAqBoB,EAApB,OAAgC,KAAhC;AACI,CAAJ,CAAI,EAAJ,WAAI;CAA0B,YAAO;KAtBrC;CAAA,CAuBA;CArxCJ,EA6vCuB;;CA7vCvB,EA0xCI,QADJ;CACI,CAAK,CAAL,GAAK,GAAC;CACF,CAAkC,CAA3B,EAAqB,CAAN,EAAf;CADX,IAAK;CAAL,CAEM,EAAN,EAAM,GAAC;CACH,CAAmC,EAA5B,CAAqB,CAAN,EAAf;CAHX,IAEM;CAFN,CAIM,EAAN,EAAM,GAAC;CACH,KAAa,CAAQ,MAAd;CALX,IAIM;CA9xCV;;CAAA,EAkyCsB,iBAAtB;CACI;CAAA,EAAkB,CAAlB,KAA4B,GAA5B;CAAA,EACY,CAAZ,cAAY;CACZ,IAAa,CAAV;CAAoB;KAFvB;CAAA,CAGA,CAAY,CAAZ,EAHA;CAAA,CAIY,EAAZ,OAAwB;CAJxB,EAKY,CAAZ,EAAY,GAAZ,EALA;CAMA,GAAmB,KAAb,MAAN;CACI,EAAK,CAAC,EAAN,UAAK;CACL,CAAG,GAAM,CAAT;CAAmB;OADnB;CAAA,CAEY,EAAC,EAAb,KAAwB;CAFxB,EAGY,CAAU,EAAtB,KAHA;CAPJ,IAMA;CANA,CAWE,EAAF;CACC,CAAD,EAAC,OAAD;CA/yCJ,EAkyCsB;;CAlyCtB,EAkzCoB,eAApB;CACI;CAAA,EAAe,CAAf,KAAyB,GAAzB;CAAA,EACS,CAAT,cAAS;CADT,CAEA,CAAS,CAAT,EAFA;CAAA,CAGS,EAAT,OAAqB;CACrB,GAAgB,EAAV,MAAN;CACI,EAAK,CAAC,EAAN,QAAK;CACL,CAAG,GAAM,CAAT;CACI;OAFJ;CAAA,CAGY,EAAC,EAAb,KAAwB;CAR5B,IAIA;CAKG,CAAD,GAAF;CA5zCJ,EAkzCoB;;CAlzCpB,EA+zC+B,MAAC,oBAAhC;CACI;CAAA,EAAkB,CAAlB,EAAkB,GAAlB,EAA8B;CAA9B,EACkB,CAAlB,KAAkB,EADlB,CACA;CADA,EAEkB,CAAlB,KAA4B,GAF5B,GAEA;CACA,EAAqB,CAArB,WAAG;CACC;CACC,YAAD;KANuB;CA/zC/B,EA+zC+B;;CAQ/B;;;;;AAv0CA;;CAAA,EA40C4B,MAAC,iBAA7B;CACI;CAAA,EAAc,CAAd,EAAc,GAAd,EAA0B;CAA1B,EACc,CAAd,KAAwB,EAAxB;CADA,EAGU,CAAV,EAAyB,CAAzB,CAAU;CACV;CAAA;4BAAA;CACI,GAAG,CAAgB,CAAnB,CAAG;CACC,aADJ;OADJ;CAAA,IAJA;CAAA,EAOa,CAAb,CAAa,EAAY,GAAzB,GAAa;CAEb,IAAiB,KAAd;CACC,EAAa,CAAV,CAAK,CAAR,GAAwC,IAArC;CACC,EAAuB,CAAtB,CAA2B,GAA5B,CAAU,IAAV;CACC,aAAD;OAHR;MAAA;CAKI,EAAe,CAAZ,EAAH,GAAG,EAAH;CACI,KAAM,EAAN;CAAA,GACC,IAAD;OAPR;KAVwB;CA50C5B,EA40C4B;;CAsB5B;;;;;;AAl2CA;;CAAA,EAw2CoB,MAAC,SAArB;CAEI;CAAA,IAAsC,CAAjB,CAAQ;CAA7B,YAAO;KAAP;CAEA,IAAyB,CAAV;CAAf,YAAO;KAFP;CAAA,CAIA,CAAK,CAAL,EAAW,gBAJX;CAKA;CAGI,EAAK,GAAL,IAAsB,MAAtB;CAEA,CAAe,GAAM,CAArB;CAAA,cAAO;OALX;KALA;AAYU,CAAV,CAAY,CAAZ,IAAU,EAAY,EAAhB;CAEF,EAAK,GAAL;CACA,GAAO,EAAP;CAGI,EAAK,GAAM,EAAX,EAAsB,MAAtB;CAEA,CAAe,GAAM,CAArB;CAAA,gBAAO;SALX;OAHJ;CAZA,IAYA;CAUA,UAAO;CAh4CX,EAw2CoB;;CA0BpB;;;;;;AAl4CA;;CAAA,EAw4CgB,MAAC,KAAjB;CAEI;CAAA,EAAuD,CAAvD,CAA4C,CAA7B,CAA6B,IAAjB;CAA3B,YAAO;KAAP;CAEA,IAAyB,CAAV;CAAf,YAAO;KAFP;CAAA,CAIA,CAAK,CAAL,EAAW,YAJX;CAKA;CAGI,EAAK,GAAL,IAAsB,OAAtB;CAEA,CAAe,GAAM,CAArB;CAAA,cAAO;OALX;KALA;AAYU,CAAV,CAAY,CAAZ,IAAU,EAAY,EAAhB;CAEF,EAAK,GAAL;CACA,GAAO,EAAP;CAGI,EAAK,GAAM,EAAX,EAAsB,OAAtB;CAEA,CAAe,GAAM,CAArB;CAAA,gBAAO;SALX;OAHJ;CAZA,IAYA;CAUA,UAAO;CAh6CX,EAw4CgB;;CA0BhB;;;;AAl6CA;;CAAA,EAs6CqB,eAArB;CACE;CAAA,EAAQ,CAAR,IAAgB,KAAR;CAAR,EACqB,CAArB,CAAK,CADL;CAAA,EAEqB,CAArB,CAAK,CAAL,CAFA;CAAA,EAIQ,CAAR,IAAgB,KAAR;CAJR,EAKyB,CAAzB,CAAK,GAAL,EALA;CAAA,EAMA,EAAK;CANL,EAOyB,CAAzB,CAAK;CAPL,EAQyB,CAAzB,CAAK,GARL,EAQA;CARA,EASyB,CAAzB,CAAK,EATL;CAAA,EAUyB,CAAzB,CAAK,CAAL,CAVA;CAAA,EAWyB,CAAzB,CAAK,GAAL;CAXA,GAYA,CAAK,MAAL;CAZA,GAcA,IAAQ,GAAR;CAdA,CAeA,CAAK,CAAL,CAAU,MAfV;CAAA,EAgBuB,CAAvB,CAAK,GAAL;CAhBA,CAiBA,CAAK,CAAL,CAAU,MAjBV;CAkBA,CAAI,EAAJ,CAAU;CACR,EAAK,EAAK,CAAV;KAnBF;CAAA,GAqBA,IAAQ,GAAR;CAEA,CAAQ,CAAK,QAAL;CA97CV,EAs6CqB;;CAt6CrB;;CAhKJ;;;;ACAA;GAAA;;kSAAA;;AAAA,GAAyB,KAAzB,OAAyB;;AACzB,CADA,EACyB,cAAzB,aAAyB;;AACzB,CAFA,EAEyB,UAAzB,YAAyB;;AACzB,CAHA,EAGyB,eAAzB,YAAyB;;AACzB,CAJA,EAIyB,mBAAzB,KAAyB;;AACzB,CALA,EAKyB,aAAzB,IAAyB;;AACzB,CANA,EAMyB,OAAzB,IAAyB;;AACzB,CAPA,EAOyB,QAAzB,IAAyB;;AACzB,CARA,EAQyB,KAAzB,IAAyB;;AACzB,CATA,EASyB,mBAAzB,KAAyB;;AACzB,CAVA,EAUyB,OAAzB,IAAyB;;AACzB,CAXA,EAWyB,iBAAzB;;AACA,CAZA,EAYyB,WAAzB,OAAyB;;AACzB,CAbA,EAayB,CAAzB,GAAyB;;AACzB,CAdA,EAcyB,UAAzB,OAAyB;;AAGzB,CAjBA,EAiBuB,GAAjB,CAAN;CACI;;CAAA,EAAI,GAAJ;;CAAA,EAEU,KAAV,UAAU;;CAFV,EAKI,UADJ;CACI,CAAqB,EAArB;CALJ;;CAQa;CACT;CAAA;CAAA;CAAA;CAAA;CAAA;CAAA;CAAA;CAAA;CAAA;CAAA;CAAA;CAAA,EAAqB,CAArB,EAAyC,MAApB;CAArB,EACqB,CAArB,EAA8C,GAA9C,SAAqB;CADrB,EAEqB,CAArB,EAA4C,CAA5C,SAAqB;CAFrB,EAGqB,CAArB,SAAqB;CAHrB,EAIqB,CAArB,kBAAqB;CAJrB,EAKqB,CAArB;CALA,GAMA,UAAc;CANd,GAOA,UAAc;CAPd,GAQA,UAAc;CARd,GASA;CAlBJ,EAQa;;CARb,EAqBa,QAAb;CACI,CAAgC,CAAlB,CAAd,MAAc;CAAd,CACuD,CAA5B,CAA3B,EAA2B,aAA3B,CAA2B;CAD3B,CAGW,CADe,CAA1B,EAA0B,YAA1B,IAA0B;CAF1B,EAImB,CAAnB;CAJA,EAKgB,CAAhB;CALA,CAMoC,CAAlB,CAAlB,EAAkB,IAAlB;CANA,EAQU,CAAV,SAAU;CARV,EASW,CAAX,MAAW;CATX,EAU4B,CAA5B,EAAwB,EAAa,EAArC;CAVA,EAWc,CAAd,UAAc;CAXd,GAYA,MAAW;CAZX,GAcA;CACC,UAAD;CArCJ,EAqBa;;CAmBb;AAxCA;;CAAA,EA8CkB,MAAC,CAAD,MAAlB;CACI;;GAD0B,GAAX;KACf;CAAA,IAAiB,CAAd;CACC,CAAkC,CAAlC,CAAC,EAAD,CAAQ,YAAR;KADJ;CAEA,IAAiB,KAAd,OAAH;CACK,CAAgC,CAAjC,CAAC,EAAD,CAAQ,MAAR;MADJ;AAI2C,CAAvC,EAAsC,CAAnC,EAAH,CAAG,GAAU,EAAV;CACC,CAA+B,CAAxB,CAAP,GAAO,CAAP,EAAiB;CAAjB,EACA,CAAO,IAAP,gBAAO;MAFX;CAII,SAAO,MAAP,QAAO;OAJX;CAMC,CAAgC,CAAjC,CAAC,GAAO,MAAR;KAbU;CA9ClB,EA8CkB;;CA9ClB,EAiEQ,GAAR,GAAS;CACL;OAAA;CAAA,EAAW,CAAX;CACK,GAAD,EAAJ;CACI,CAAS,IAAT,GAAU;CACC,EAAW,GAAZ,EAAN;CADJ,MAAS;CAAT,CAEO,GAAP,IAAO;CACG,IAAN;CAHJ,MAEO;CALP,KAEJ;CAnEJ,EAiEQ;;CAjER,CAyEoB,CAAP,MAAC,EAAd;CAEI;OAAA;CAAA;CACI,EAAQ,EAAR,IAAQ;MADZ;;CAGa,OAAT;OAHJ;KAAA;CAAA,EAKwB,CAAxB,EAAM,EAAS;CALf,GAMA;CAEA,IAAW,cAAX;CACI,GAAC,EAAD,IAAW;MADf;CAGI,GAAC,EAAD,IAAW;KAXf;CAAA,EAcc,CAAd,KAAc,EAAd;CACI,IAAC,CAAD;CAAA,EACQ,CAAJ,EAAJ;CADA,GAEA,CAAC,CAAD,CAAQ;CAFR,EAGA,CAA8B,EAA9B;CAHA,EAIQ,CAAJ,EAAJ;CAJA,EAMe,CANf,CAMC,CAAD;CANA,IAOC,CAAD;CACC,MAAO,EAAR;CAvBJ,IAcc;CAWd;CAEI,GAAG,CAAQ,CAAX;CACI,GAAC,EAAM,EAAP;CAAA,GACC,GAAO,CAAR;CADA,GAEC,IAAD;CACA;OAJJ;CAAA,EAMgB,CAAf,EAAD,KAAY;CANZ,EAOgB,CAAf,EAAD,KAAY;CACZ;MAVJ;CAYI;KAvCK;CAzEb,EAyEa;;CAzEb,EAmHyB,oBAAzB;CACI;CACO,EAAiB,EAAxB,CAAM,EAAS,GAAf,MAAwB;CArH5B,EAmHyB;;CAnHzB,EAuH6B,wBAA7B;CACK,CAAkC,EAAlC,OAAD,MAAmC,EAAnC;CAxHJ,EAuH6B;;CAvH7B,EA2He,UAAf;CACK,CAAyB,EAAzB,MAAD,YAA0B;CA5H9B,EA2He;;CA3Hf,EA+HgB,WAAhB;CACK,CAA0B,EAA1B,OAAD,SAA2B;CAhI/B,EA+HgB;;CA/HhB,EAkIa,QAAb;CACK,CAAuB,EAAvB,IAAD,SAAwB;CAnI5B,EAkIa;;CAlIb,EAqI2B,sBAA3B;CACK,CAAiC,EAAjC,OAAD,cAAkC;CAtItC,EAqI2B;;CArI3B,EAyI0B,MAAC,eAA3B;CACI;CAAA,CAAkC,EAAlC,qBAAkC;CAAlC,CACwD,CAA9C,CAAV,EAAM,CAAY,CAAlB;CADA,EAKS,CAAT,aALA,CAK4B;CAL5B,CAM0C,CAAjC,CAAT,cAAS;CANT,EAOU,CAAV;CAEA,IAAmB,CAAhB;CACC,CAAqB,CAAS,CAA7B,EAAD,GAA8B,GAA9B;CAEI;CACA;CAHJ,MAA8B;CAOT,CAAQ,CAAnB,IAAV,GAAU,GAAV;MARJ;CAYe,CAAQ,CAAnB;KAtBkB;CAzI1B,EAyI0B;;CAzI1B,EAkKoB,eAApB;CACI;CAAA;CAAA,EACwB,CAAxB,EAAM,EAAS,iBAAS;CADxB,CAEwD,CAA9C,CAAV,EAAM,CAAY,CAAlB;CAIW,SAAX;CACK,YAAD,KAAmB,EAAnB;CADJ,CAEE,CAFF,EAAW;CAzKf,EAkKoB;;CAlKpB,CAmL2B,CAAP,MAAC,SAArB;CACI;OAAA;CAAA,IAAmB,CAAhB;CACC,CAAoB,EAAnB,EAAD,GAAoB;CACf,CAAyB,EAA1B,CAAC,UAAD;CADJ,MAAoB;CAEpB,YAAO;KAHX;CAAA,EAKc,CAAd,OAAI;CALJ,EAMc,CAAd,OAAI;CANJ,EAQQ,CAAR,IAAQ;CARR,EASS,CAAT,KAAS;CAGL;CAAA,CAAmB,CAAnB,EAAC,CAAD;CAAA,CACoB,CAApB,EAAC,CAAD;CADA,CAEwB,CAAxB,EAAC,CAAD;CAFA,GAGA,CAAC,CAAD;CAHA,GAKA,CAAC,CAAD,CAAQ;CALR,GAMA,CAAC,CAAD,IAAW;CANX,GAQA,CAAC,CAAD;CARA,GASA,CAAK,CAAL;CATA,EAWe,CAXf,CAWC,CAAD;CAXA,EAaO,CAAP,CAAQ,CAAR;CACA,GAAiB,EAAjB;CAAA,EAAO,CAAP;OAdA;CAAA,EAeyB,CAfzB,CAeA,GAAe,CAAU;CAfzB,GAgBA;CAhBA,EAkBc,CAAV,CAAH,CAAD,KAAI;CACH,EAAa,CAAV,CAAH,GAAD,GAAI,EAAJ;CA/BJ,IASS;CAyBT,IAAQ,CAAL;CACC,CAAuC,CAA/B,CAAC,CAAT,kBAAQ;CAAR,GAIC,EAAD;CAJA,CAOmB,CAAnB,CAAC,CAAD;CAPA,CAQoB,CAApB,CAAC,EAAD;CARA,CASwB,CAAxB,CAAC,EAAD;CAEM,CAAa,EAAnB,CAAK,CAAL;IAII,EAhBR;CAiBI,EAAgB,EAAK,CAArB,SAAgB;CAAhB,EACc,CAA2B,EAAzC,EAAoC,CAAtB,EAAd,EAA2B;CAC3B;CAEU,CAAN,GAAK,CArBb,IAqBQ;CACJ,EAA4C,CAA5C,CAAK,CAAL,EAAoC,OAApC;CACA;MAvBJ;CA0BI;KA7DY;CAnLpB,EAmLoB;;CAnLpB,CAkPgC,CAAP,MAAC,cAA1B;CAGI;OAAA;;GAHiC,GAAL;KAG5B;CAAA,EAAqB,CAArB;CAAA,EAAQ,CAAR;KAAA;CAAA,EAEa,CAAb,aAAa;CAAkB;CAAA,CAAe,EAAL;CAFzC,KAEa;CAFb,EAGa,CAAb,KAHA,CAGa;CAHb,EAIa,CAAb,EAAa,CAAb;CAJA,CAK6D,EAA7D,GAAO,EAAsD,GAA7D;CACI;CAAA,EAAW,GAAX,CAAkB,CAAlB,OAAW;CAAX,CACsC,CAA3B,CAAa,EAAxB,EAAmB;CAClB,CAAuB,EAAxB,CAAC,EAAD;CAHJ,IAA6D;CAL7D,GAUA;CAVA,CAesC,CAAtC,UAAc,CAAd;CAEA,UAAO;CAtQX,EAkPyB;;CAlPzB,CAwQyB,CAAP,MAAC,OAAnB;CACI;CAAA,IAAW,MAAX;CACI,EAAc,CAAa,EAA3B,EAAsB,CAAR,EAAd;CACA,GAAG,CAAiB,CAApB,KAAG;;CACM,CAAiD,CAAnD,CAAc,CAAjB,EAAY,CAAZ;SADJ;OADA;CAMC,YAAD;KARU;CAxQlB,EAwQkB;;CAUlB;AAlRA;;CAAA,EAsRsB,iBAAtB;CACI;CAAA,KAAO,EAAP;CACW,SAAX;CACK,GAAD,CAAC,CAAM,EAAP;CADJ,CAEE,GAFS;CAxRf,EAsRsB;;CAtRtB;;CADoC;;;;ACjBxC;GAAA;;kSAAA;;AAAA,GAAW,KAAX,OAAW;;AACX,CADA,EACyB,mBAAzB,KAAyB;;AACzB,CAFA,EAEiB,WAAjB,YAAiB;;AACjB,CAHA,EAGc,QAAd,aAAc;;AACd,CAJA,EAIgB,UAAhB,YAAgB;;AAChB,CALA,EAKc,QAAd,SAAc;;AACd,CANA,EAMU,IAAV,UAAU;;AAEV,CARA,EAQa,MAAb,2FARA;;AAiBA,CAjBA,EAiBuB,GAAjB,CAAN;CACI;;CAAA,EAAI,UAAJ;;CAAA,EACU,KAAV,UAAU;;CADV,EAES,EAFT,EAEA;;CAFA,EAKI,GADJ;CACI,CAAuB,EAAvB;CAAA,CACuC,EAAvC,cADA,mBACA;CANJ;;CAQA;AARA;;CAUa,mBAAC;CACV;CAAA;CAAA;CAAA;CAAA;CAAA;CAAA;CAAA;CAAA;CAAA;CAAA;CAAA,EAAc,CAAd;CAAA,EACiB,CAAjB;CADA,GAEA;CAbJ,EAUa;;CAVb,EAgBa,QAAb;CACI,EAAW,CAAX,uBAAW;CAAX,EACe,CAAf,YAAe;CADf,EAEe,CAAf,+BAAe;CAFf,EAGa,CAAb,aAAa;CAHb,GAIA,KAAU;CAJV,EAKc,CAAd,cAAc;CALd,GAMA,MAAW;CANX,EAOgB,CAAhB,aAAgB;CAPhB,EAQwB,CAAxB,OAAwB,KAAxB,CAAoC;CARpC,GASA;CATA,CAW0B,EAA1B;CAXA,CAY0B,EAA1B;CAZA,CAa0B,EAA1B;CACC,CAAsB,EAAtB,GAAD;CA/BJ,EAgBa;;CAhBb,EAkCmB,cAAnB;CACI;OAAA;CAAA,EAAoB,CAApB,EAAkC,GAAuB,IAAzD;CACI;CAAI,EAAJ,EAAqB,EAArB;CAD8B,IAAsB;CAAxD,EAEa,CAAb,CAAa,KAAb,GAA0B;CAF1B,GAIA;CAJA,EAKiB,CAAjB,KAAkB,CAAP;CACP;CAAA,EAAO,CAAP;AACgC,CAAhC,GAAG,CAA4B,CAA/B,CAAG,GAAU;CACT,EAAoB,CAAjB,CAAC,CAAgB,EAApB,MAAO;CACF,EAAD,EAAC,SAAD;SAFR;OAFa;CAAjB,IAAiB;CAMjB,IAA6B,CAA1B;CACE,WAAY,CAAb;KAbW;CAlCnB,EAkCmB;;CAlCnB,EAmDgB,MAAC,EAAD,GAAhB;CACI;CAAA,CAAsC,CAAtC,QAAU;CAAV,GACA,QAAa;CADb,CAEA,CAAmB,CAAnB,GAAQ;CACK,CAAD,EAAC,KAAb;CAvDJ,EAmDgB;;CAnDhB,EAyDgB,MAAC,KAAjB;CACI;CAAA,CAAG,CAAuC,CAA1C,CAAQ,KAAqB;CACxB,IAAD;CACU,CAFd,EAEQ,CAAK,CAFb;CAGc,IAAF,UAAR;KAJQ;CAzDhB,EAyDgB;;CAzDhB,EA+DkB,MAAC,OAAnB;CACI;CAAA,EAAO,CAAP;CAAO,CAAK,CAAL,CAAM,EAAN,UAAK;CAAZ;CAAA,GAEA;CACM,IAAD,MAAL;CAnEJ,EA+DkB;;CA/DlB,EAsEW,MAAX;CACI;CAAA,EAAS,CAAT,OAAS;CACT,KAAS;CACJ,EAAD,CAAC,EAAmB,MAApB;MADJ;CAGI,GAAC,EAAD;CAAA,EACkB,GAAlB;CACA,CAAqB,EAAlB,CAAkB,CAArB,IAAc,CAAkB;CAC5B,CAAyB,CAAlB,CAAP,CAAyB,CAAlB,EAAP,EAAkB,CAAkB;CAApC,CACwB,CAAxB,QAAW;OAJf;CAAA,EAMI,CADJ;CACI,CAAK,CAAL;CANJ;CAOC,YAAD;KAZG;CAtEX,EAsEW;;CAtEX,EAqFiB,MAAC,MAAlB;CACI;CAAA,EAAe,CAAf,kBAAe;CACX,CAAO,CAAP,MAAgB;CAAhB,CACS,IAAT,GAAU,EAAD;CACL;CAAA,GACA,CAAC,EAAO,CAAR;CADA,GAEA,CAAC,EAAO,CAAR;CACA,GAAG,IAAH,CAAY;CACR,CAA4B,EAA5B,CAAC,IAAD;CAAA,EACa,KAAb,CAAS,CAAT;CACC,CACC,CADF,EAAC,IAAyB,MAA1B;CAEY,CAA6B,CAArC,IAAO,EAAuC,UAA9C;CAFJ,CAGE,SAFA;CAGG,CAA2B,GAA3B,IAAD;CAJJ,UAGE;MANN;CASI,QAAS,CAAT;CACC,EAAD,EAAC,IAAyB,MAA1B;SAdC;CADT,MACS;CADT,CAgBQ,IAAR,GAAS,EAAD;CACJ,IAAC,EAAO,CAAR;CACC,GAAD,CAAC,EAAO,QAAR;CAlBJ,MAgBQ;CAjBZ,KAAe;CAAf,EAoBI,CAAJ,GAAoB;CApBpB,GAqBA,GAAQ;CAER,IAAG;CACE,MAAO,MAAR;KAzBS;CArFjB,EAqFiB;;CArFjB,CAiH6B,CAAZ,MAAC,MAAlB;;GAAsC,GAAT;KACzB;CAAA;CACI,EAA8B,CAA9B,KAAS,QAAT;CACU,CAA8B,EAAxC,KAAS,IAAT;MAFJ;CAKI,EAA8B,EAA9B,IAAS,QAAT;CAAA,CACwC,EAAxC,KAAS,KAAT;CACU,EAAG,MAAJ,EAAT;KARS;CAjHjB,EAiHiB;;CAjHjB,CA6H6B,CAAZ,MAAC,MAAlB;CAGI;CAAA;CACc,EAAG,IAAb,EAAS,IAAT;CACe,SAAX;AACkB,CAAd,GAAc,CAAmB,CAAnB,IAAd;CAAA;WADO;CAAX,CAEE,CAFF,MAAW;CADf,MAAsB;MAD1B;CAMI;KATS;CA7HjB,EA6HiB;;CA7HjB,CAwI+B,CAAd,MAAC,EAAD,IAAjB;CACI;OAAA;;GAD4C,GAAjB;KAC3B;CAAA;AAEuB,CAAvB,IAAgD,CAAzB,IAAvB,IAAuB;CAAvB,EAAK,GAAL;KAFA;CAIY,MAAZ;CACI,CAA4B,EAA5B;CAAA,CACS,IAAT,GAAU;AAC8B,CAApC,EAAI,CAAD,CAAgB,EAAnB;CACI,GAAU,CAAV;MADJ;CAGI,IAAC,IAAD;SAHJ;CAKA,GAAG,IAAH;CACI;IACI,EAFR;CAGS,CAA8B,CAAnC,CAAiB,EAAjB,CAAY,CAAZ;SATC;CADT,MACS;CADT,CAYO,GAAP,IAAQ;CACJ,GAAY,CAAZ,EAAM,CAAN,IAAQ;AACS,CAAjB,GAAiB,CAAsB,CAAtB,EAAjB,GAAiB;CAAjB;SAFG;CAZP,MAYO;CAlBE,KAKb;CA7IJ,EAwIiB;;CAxIjB,EA8Ja,MAAC,EAAd;CACI;CAAA;CAAA,CACqC,CAArC,IAAM;CADN,CAE4B,CAA5B,IAAM;CAFN,EAGS,CAAT,KAAkB;CAClB;CACI,EACI,EADJ;CACI,CAAO,EAAP;CAAA,CACK,CAAL,gDAAK;CAFT;CAGA,YAAO;KARX;CAAA,CASM,EAAL;CATD,CAU4B,CAArB,CAAP,EAAO;CAVP,EAWQ,CAAR;CAXA,EAYO,CAAP,CAAa;CAZb,CAa4B,CAArB,CAAP,EAAO;CAbP,CAc6B,CAAtB,CAAP,GAAO;CAdP,EAgBO,CAAP,GAAO;CACP;CAAA,EAAO,CAAP;KAjBA;CAAA,EAkBA,EAAM;CACN;CAAA,EAAS,GAAT,GAAS;KAnBT;CAAA,EAqBA;CAAM,CAAI,CAAJ;CAAA,CAAc,EAAL;CAAT,CAAyB,EAAL;CArB1B;CAsBA;CAAA,EAAG,GAAH;KAtBA;CAuBA,UAAO;CAtLX,EA8Ja;;CA9Jb,EAyLa,MAAC,EAAd;CACI,SAAW;CAAX,EACA,MAAU;CACT,QAAS,EAAV;CA5LJ,EAyLa;;CAzLb,EA+Lc,MAAC,GAAf;CACI,QAAU;CAAV,EACA,OAAW;CACV,SAAU,CAAX;CAlMJ,EA+Lc;;CA/Ld,EAoMW,MAAX;CACK,SAAU,CAAX;CArMJ,EAoMW;;CApMX,EAuMW,MAAX;CACK,CAAD,EAAC,OAAD;CAxMJ,EAuMW;;CAvMX;;CADsC;;;;ACjB1C;GAAA;;kSAAA;;AAAA,GAAW,KAAX,OAAW;;AACX,CADA,EACc,QAAd,aAAc;;AAEd,CAHA,EAGqB,eAArB,IAHA;;AAKA,CALA,EAKuB,GAAjB,CAAN;CACI;;CAAA,EAAS,EAAT;;CAAA,EACW,MAAX,CADA;;CAAA,EAEU,KAAV,sBAAU;;CAFV,EAKI,GADJ;CACI,CAAkB,EAAlB;CAAA,CACc,EAAd,cADA;CAAA,CAES,EAAT,cAFA;CALJ;;CAAA,EASe,UAAf;CACI;CAAA,KAAM;CACN,EAAW,CAAX,CAAG,aAAQ;CACP,CAAM,IAAL;CAAD,CACM,CAAN;CAAwB,CAAe,CAAS,CAAxB,EAAe,EAAf;CADxB,OACM;KAHV;CAKA,UAAO;CAAA,CAAC,CAAD,GAAC;CANG,KAMX;CAfJ,EASe;;CAQF,uBAAE;CACX,EADW,CAAD;CACV,EADiB,CAAD,MAChB;CAAA;CAAA;CAAA;CAAA,EACY,CAAZ;CADA,EAEqB,CAArB,CAFA,YAEA;CApBJ,EAiBa;;CAjBb,EAsBa,QAAb;CACI;CAAA,CAAiB,CAAb,CAAJ,EAA6B,OAAZ;CAAjB,CACqC,CAAhB,CAArB,GAAqC,GAAJ,CAAZ,EAArB;CACA,EAAO,CAAP,CAA0B,IAAvB,aAAH;CACI,EAAI,CAAH,EAAD;KAHJ;CAAA,EAKO,CAAP,EAAO;CALP,EAMQ,CAAR,GAAQ;AAGkC,CAA1C,EAAO,CAAP,CAAyC,CAAtC;CAEC,GAAO,EAAP;CACI,CAAiC,CAAzB,EAAR,CAAQ,EAAR,CAAiB;OADrB;CAAA,EAGW,CAAC,EAAZ,QAAW;CAHX,IAIA,GAAQ;CACC,CAAwB,CAAjC,KAAQ,KAAR;KAjBK;CAtBb,EAsBa;;CAtBb,EAyCkB,aAAlB;CACI;CAAA;KAAA;CACC,CAAiC,EAAjC,MAAU,CAAX;CA3CJ,EAyCkB;;CAzClB,EA6CkB,MAAC,OAAnB;CAEK,UAAD;CA/CJ,EA6CkB;;CA7ClB;;CAD0C;;;;ACL9C;GAAA;kSAAA;;AAAA,GAAW,KAAX,OAAW;;AAEX,CAFA,EAEuB,GAAjB,CAAN;CAEI;;;;;CAAA;;CAAA,EAAS,EAAT;;CAAA,EACW,MAAX,kBADA;;CAAA,EAEU,KAAV,oBAAU;;CAFV;;CAF2C;;;;ACF/C;GAAA;kSAAA;;AAAA,GAAiB,WAAjB,OAAiB;;AAEjB,CAFA,EAEuB,GAAjB,CAAN;CAEI;;CAAA,EAAG,2BAAH;;CAAA,EACU,KAAV,gBAAU;;CADV,EAEU,KAAV,qBAAU;;CAGG,iBAAE;CACX,EADW,CAAD,MACV;CAAA;CANJ,EAKa;;CALb,EAQY,MAAC,CAAb;;CARA;;CAFoC;;;;ACFxC;GAAA;;kSAAA;;AAAM,CAAN;CAEI;;;;;;CAAA;;CAAA,EAAG,WAAH;;CAAA,EACU,MAAV,KADA;;CAAA,EAGI,OADJ;CACI,CAAiB,EAAjB;CAAA,CACiB,EAAjB,GADA,QACA;CAJJ;;CAAA,EAMY,MAAC,CAAb;CACI;;CAAC,EAAS,CAAT,EAAD,CAAiB;KAAjB;;CACC,EAAW,CAAX,EAAD,CAAmB;KADnB;;CAEC,EAAO,CAAP,EAAD,CAAe;KAFf;;CAGC,CAAM,EAAN,EAAD,CAAc,CAAO;KAHrB;CAAA,EAIQ,CAAR,GAAe,MAAS;;CACvB,CAAM,EAAN,EAAD,CAAc,EAAO;KALrB;CAAA,GAMA;CACA;CACI,CAAG,CAAH,CAAC,EAAD,CAAyB,EAAZ,GAAb;KARJ;CAAA,EASU,CAAV,CATA,CASA;CATA,CAUG,CAAY,CAAf;CAVA,CAWG,EAAH;CAXA,EAeyB,CAAzB,KAA0B,KAA1B;CACI,IAAK,CAAL;CACC,GAAD,CAAC,QAAD;CAFJ,IAAyB;CAIxB,CAAD,CAAI,CAAH,GAAD;CA1BJ,EAMY;;CANZ,EA4BQ,GAAR,GAAQ;WACJ;CAAA,CAA4B,IAA5B;CAAA,CAC4B,IAA5B,CADA,kBACA;CADA,CAE4B,IAA5B,WAFA;CADI;CA5BR,EA4BQ;;CA5BR,EAiCM,CAAN,KAAM;CACF;CACC,CAAD,EAAC,CAAD;CAnCJ,EAiCM;;CAjCN,EAqCO,EAAP,IAAO;CACH;CACC,CAAD,EAAC,OAAD;CAvCJ,EAqCO;;CArCP,EAyCO,EAAP,IAAO;CACH;CAAA;CAAA;KAAA;CAAA,EACW,CAAX;CADA,GAEA,IAAS,GAAT,EAAuB;CAFvB,CAGG,EAAH,KAAa;CAHb,CAIG,CAAH,MAAa;CACD,EAAC,OAAb;CAAiB,KAAD;CAAJ,CAAgB,CAA5B,EAAa;CA/CjB,EAyCO;;CAzCP,EAiDa,MAAC,EAAd;CACI;CACA,IAAG;CACC,GAAC,EAAD;CACA,YAAO;KAJF;CAjDb,EAiDa;;CAjDb,EAuDQ,GAAR,GAAQ;CACJ,CAAkB,CAAd,CAAJ;CADI,QAEJ;CAzDJ,EAuDQ;;CAvDR,EA2DQ,GAAR,GAAQ;CACJ;CAAA,EAAQ,CAAR,sDAAQ;CAAR,EACQ,CAAR;CADA,CAEwD,CAAhD,CAAR,CAAQ;CAFR,EAIQ,CAAR,EAAQ,OAA6C,qBAA7C;CAJR,EAMQ,CAAR,0BAAQ;CANR,EAOU,CAAV,IAAU,qGAAK;CAPf,EAYQ,CAAR,IAAQ;CAZR,CAeQ,CAAG,CAAX,EAfA,EAgBI;CAhBJ,EAoBY,CAAZ,CAAY,GAAZ,KAAY;CApBZ,EAqBA,KAAS,CAAU,SAAnB;CArBA,GAuBA;CAvBA,CAwBmC,CAAd,CAArB;CAxBA,CA2BA,IAAM,CA3BN,SA2BA;CA3BA,CA4BA,CA5BA,CA4BA,EAAM,UAAN;CACC,EAAG,CAAH,IAAD;CAzFJ,EA2DQ;;CA3DR,EA2Fe,UAAf;CAAmB,UAAD;CA3FlB,EA2Fe;;CA3Ff,EA8FiB,MAAC,MAAlB;CAA4B,CAAW,EAAX,CAAgB,CAAO;CAAtB,YAAD;KAAX;CA9FjB,EA8FiB;;CA9FjB;;CAFgB,OAAQ;;AAkG5B,CAlGA,CAkGsB,CAAR,EAAT,EAAS,EAAC;CACD,GAAN;CAAM,CAAC,GAAD;CAAA,CAAQ,KAAR;CAAA,CAAsB,CAAL;CAAjB,CAA4B;CAA5B,CAAsC;CADtC,GACN;CADM;;AAGd,CArGA,CAqGwB,CAAR,EAAX,CAAW,CAAhB,EAAiB;CACH,GAAN;CAAM,CAAC,GAAD;CAAA,CAAQ,KAAR;CAAA,CAAsB,CAAL,GAAjB;CAAA,CAA8B,GAA9B;CAAA,CAAwC;CADtC,GACR;CADQ;;AAGhB,CAxGA,CAwGqB,CAAP,EAAT,IAAU;CAEP,GADA;CACA,CAAO,EAAP,SAAO;CAAP,CACS,EAAT;CADA,CAEK,CAAL,OAAK;CAFL,CAGA,GAHA;CAAA,CAIA;CANM,GACN;CADM;;AAQd,CAhHA,EAgHiB,EAhHjB,CAgHM,CAAN;;;;AChHA;GAAA;;kSAAA;;AAAA,GAAW,KAAX,OAAW;;AACX,CADA,EACoB,cAApB,SAAoB;;AACpB,CAFA,EAEoB,cAApB,KAAoB;;AACpB,CAHA,EAGW,KAAX,aAAW;;AAEX,CALA,EAKuB,GAAjB,CAAN;CAEI;;CAAA,EAAG,MAAH;;CAAA,EACU,KAAV,UAAU;;CAEG,mBAAC;CACV;CAAA,EAAQ,CAAR;CAAA,EACiB,CAAjB;CADA,GAEA;CANJ,EAGa;;CAHb,EAQa,QAAb;CACI,EAAqB,CAArB,aAAqB;CAAkB,CAAY,EAAC,EAAb;CAAvC,KAAqB;CACpB,EAAc,CAAd,GAAD,CAAe,GAAf;CAVJ,EAQa;;CARb;;CAFsC;;;;ACL1C;GAAA;kSAAA;;AAAA,GAAW,KAAX,OAAW;;AAIX,CAJA,EAIuB,GAAjB,CAAN;CAEI;;;;;CAAA;;CAAA,EAAS,CAAT;;CAAA,EACW,MAAX,cADA;;CAAA,EAEU,KAAV,gBAAU;;CAFV,EAII,GADJ;CACI,CAAmB,EAAnB;CAAA,CACmB,EAAnB,cADA;CAJJ;;CAAA,EAUe,UAAf;WACI;CAAA,CAAO,EAAU,CAAjB,KAAO;CACH,CAAY,EAAC,IAAb;CAAA,CACM,CAAgB,CAAtB,CAA4B,CAAtB,EAAN,KAAsB;CAF1B,OAAO;CADI;CAVf,EAUe;;CAVf,EAmBY,OAAZ;CACI;CAAA,CAAkB,EAAlB;CAAA,EACS,CAAT,CAAe,CAAf,IAAS;CAET;CAEI,EAAmB,CAAhB,CAAgC,CAAnC,cAAG;CACE,EAAa,CAAb,MAAD;IAEI,EAHR;CAKI,EAAa,CAAV,EAAM,CAAN,CAAH,MAAG;CACE,EAAa,CAAb,MAAD;CAEW,EAAG,CAAV,EAHR,CAGQ,GAHR;CAIK,EAAa,CAAb,MAAD;SATR;OAFJ;KAJQ;CAnBZ,EAmBY;;CAnBZ,EAuCiB,YAAjB;CACI;CAAA,EAAS,CAAT,CAAe,CAAf,IAAS;CAET;CACI,EAAS,GAAT;CAAS,CAAK,CAAL;CADb,OACI;KAHJ;AAKG,CAAH,IAAoB,CAAjB,EAAH;CACI;IAEI,EAHR;CAKI,IAAuB,CAAvB,EAA6C;CAA7C,EACA,CAAO,EAAP;CADA,CAEwB,CAAxB,CAAM,EAAN,CAAM;CAFN,GAGA;CAHA,GAIC,CAAK,CAAN;MATJ;CAYI;KAjBJ;CAmBA;CAAO,CAA+B,CAA5B,CAAa,EAAjB,CAAY,CAAlB;KApBa;CAvCjB,EAuCiB;;CAvCjB,EA+DkB,MAAC,OAAnB;;CACW,IAAF,CAAL;KAAA;;CACO,IAAF,CAAL;KADA;CAEC,IAAK,EAAN;CAlEJ,EA+DkB;;CA/DlB;;CAF4C;;;;ACJhD;GAAA;;kSAAA;;AAAA,GAAiB,WAAjB,OAAiB;;AACjB,CADA,EACiB,WAAjB,OAAiB;;AACjB,CAFA,EAEe,SAAf,SAAe;;AAEf,CAJA,EAIiB,WAAjB,UAAiB;;AAEjB,CANA,EAMuB,GAAjB,CAAN;CAEI;;;;;;;;;;;;CAAA;;CAAA,EAAG,uBAAH;;CAAA,EACU,KAAV,iBAAU;;CADV,EAEU,KAAV,iBAAU;;CAFV,EAKI,GADJ;CACI,CAA+B,EAA/B;CAAA,CACuB,EAAvB,WADA,MACA;CANJ;;CAAA,EAQY,OAAZ;CACI;CACC,EAAe,CAAf,OAAD;CAVJ,EAQY;;CARZ,EAYY,MAAC,CAAb;;CACK,EAAa,CAAb,EAAD,eAAc;KAAd;CAAA,CACA,OAAU;AACW,CAArB;CAAC,IAAK,QAAN;KAHQ;CAZZ,EAYY;;CAZZ,EAiBa,QAAb;CACI,EAAW,CAAX,oBAAW;CAAX,EACA,IAAQ;CADR,EAEgB,CAAhB,WAAgB;CAFhB,GAGA,QAAa;CAHb,EAIc,CAAd,WAAc;CAJd,EAKc,CAAd,iBAAc;CALd,GAMA;CANA,EAOS,CAAT,iBAAS;CAPT,EAQiB,CAAjB,UAAiB;CARjB,GASA,SAAc;CATd,GAWA;CAXA,EAYgB,CAAhB,CAZA,OAYA;CAZA,GAaA,MAAW;CACX;CACK,CACG,EADH,MAAU,GAAX,cAAiB;CACb,CAAM,EAAN,EAAY,EAAZ,CAAsB,EAAhB;CADV,OAAiB;KAhBZ;CAjBb,EAiBa;;CAjBb,EAoCQ,GAAR,GAAQ;CAAA,QACJ;CArCJ,EAoCQ;;CApCR,EAuCc,SAAd;CACI;CAAA,EAAW,CAAX,MAAsB;CAAtB,GACA,CAA+B,CAA/B,EAAmB,EAAR;CACX,IAAe,GAAZ;CACC,GAAC,EAAD,CAAQ;CACP,MAAO,MAAR;MAFJ;CAII,GAAC,EAAD,CAAQ,CAAR;CACC,MAAO,MAAR;KARM;CAvCd,EAuCc;;CAvCd,EAiDe,UAAf;CACI,EAAkB,CAAlB,CAA8B,CAAP,0CAApB;CACE,YAAD;KAFO;CAjDf,EAiDe;;CAjDf,EAqDe,UAAf;CACI,CAAG,EAAH,MAAG;CACE,YAAD;MADJ;CAGI;CACC,WAAY,CAAb;KALO;CArDf,EAqDe;;CArDf,EA4De,MAAC,IAAhB;CACI;CACC,UAAD,CAAa;CA9DjB,EA4De;;CA5Df,EAgEY,OAAZ;CACI;CAAA,YAAc;CACb,QAAD,CAAW,CAAX;CACI,CAAS,IAAT,GAAS;CACJ,GAAD,CAAC,QAAa,EAAd;CADJ,MAAS;CAAT,CAEO,GAAP,IAAO;CACF,GAAD,CAAC,QAAa,EAAd;CAHJ,MAEO;CALH,KAER;CAlEJ,EAgEY;;CAhEZ;;CAF6C;;;;ACNjD;GAAA;;kSAAA;;AAAA,GAAuB,EAAvB,EAAuB;;AACvB,CADA,EACuB,KAAvB,oBAAuB;;AACvB,CAFA,EAEuB,iBAAvB,MAAuB;;AACvB,CAHA,EAGuB,eAAvB,MAAuB;;AACvB,CAJA,EAIuB,cAAvB,MAAuB;;AACvB,CALA,EAKuB,cAAvB,MAAuB;;AACvB,CANA,EAMuB,SAAvB,SAAuB;;AAGvB,CATA,EASgC,0BAAhC;;AACA,CAVA,EAUgC,QAAhC;;AACA,CAXA,EAWgC,SAAhC;;AAEA,CAbA,EAauB,GAAjB,CAAN;CAUI;;;;;;;;;;CAAA;;CAAA,EAAQ,GAAR,GAAQ;CAAI,CACR,IADO,GAAS,EAAT,oCAAS;CAChB,CAAgB,IAAhB;CAAA,CACgB,IAAhB,WADA;CAAA,CAEgB,IAAhB,QAFA;CADI,KAAG;CAAX,EAAQ;;CAAR,CAMqB,CAAT,MAAC,CAAb;CAGI;CAAA,EAAU,CAAV;CAAA,EACU,CAAV,aAAU;CADV,EAGI,CADJ;CACI,CAAkB,IAAlB;CAAA,CACkB,EADlB,EACA;CADA,CAEkB,IAAlB;CAFA,CAGkB,CAAlB,OAAkB;CAHlB,CAIA,YAAkB;CAJlB,CAKA;CALA,CAMkB,CANlB,GAMA;CANA,CAOkB,CAPlB,GAOA;CAVJ;CAAA,EAWU,CAAV;CAXA,EAaI,CADJ;CACI,CAAc,IAAd;CAAA,CACc,IAAd;CADA,CAEc,IAAd;CAfJ;CAAA,CAgBG,CAAgB,CAAnB,CAAyB,EAAd,IAhBX;CAAA,GAiBA,8CAAM;CAjBN,CAoBuB,CAAH,CAApB,SAAoB;CApBpB,EAqBoB,CAApB,IAAoB,CAApB;CArBA,EAsBoB,CAApB;CAtBA,EAuBoB,CAApB,SAAoB,GAApB,GAAoB;CAvBpB,EAwBoB,CAApB,SAAoB;CAxBpB,EAyBoB,CAApB,SAAoB;CAzBpB,CA0BuB,CAAH,CAApB,SAAoB;CA1BpB,EA2BoB,CAApB,IAA6B,IAA7B,CAAoB;CA3BpB,EA4BoB,CAApB,IAA6B,GAA7B,EAAoB;CA5BpB,EA6BoB,CAApB,IAA6B,CAA7B,IAAoB;CA7BpB,EA8BoB,CAApB,IAA6B,EAA7B,GAAoB;CA9BpB,CA+BuB,CAAH,CAApB,GAAoB,IAApB,EAAoB;CA/BpB,EAkCoB,CAApB;CAlCA,EA4CmB,CAAnB,cAAmB;CA5CnB,CA6CuC,EAAvC,QAAY,IAAZ;CA7CA,EA8CuC,CAAvC,OAA8B,KAAZ;CA9ClB,EAgDqB,CAArB,gBAAqB;CAhDrB,CAiDuC,EAAvC,QAAY,CAAZ;CAjDA,EAkDyC,CAAzC,SAAgC,GAAd;CAlDlB,GAoDA,QAAY,EAAZ;CApDA,GAqDA;CArDA,EAsDA,GAAa,IAtDb;CAuDA,YAA0B,YAA1B;CAAA,GAAO,EAAP,IAAiB;KAvDjB;;CAwDQ,EAAD,CAAC,EAAR,KAAmB;KAxDnB;CAAA,EAyDA;CAzDA,CA4DoC,EAApC,KAAU,OAAV;CA5DA,CA6DsC,EAAtC,IAAS,IAAT;CA7DA,EA8D6B,CAA7B,CAAmB,MAAU,CAAhB;CA9Db,EA+D6B,CAA7B,CAAmB,CAAnB,MAAa;CA/Db,EAgEc,CAAd,IAAuB,GAAvB,CAAc;CAhEd,CAqEoC,EAApC,KAAU,OAAV;CArEA,CAuEkC,EAAlC,EAAM,EAAN;CAEA,UAAO;CAlFX,EAMY;;CANZ,EAsFO,EAAP,IAAO;CAKH;CAAA,IAAY,IAAN,EAAkB;AAGpB,CAAJ,KAAW,GAAX;CACI,GAAC,EAAD;CACA;KALJ;CAQA,IAAS,MAAN,GAAH;CACI,GAAO,EAAP,YAAM;CACN,GAAG,EAAH;CACK,EAAD,CAAC,WAAD;OAHR;MAAA;CAOI,EAAY,CAAC,EAAb,eAAY;CAAZ,CAGA,EAAC,EAAD,GAAU;CACT,IAAD;KAxBD;CAtFP,EAsFO;;CAtFP,EAgHe,MAAC,IAAhB;CACI,IAAS,MAAY,EAArB;CACK,IAAK,MAAY,EAAlB;KAFO;CAhHf,EAgHe;;CAhHf,EA2Ha,MAAC,EAAd;CACI,EAAM,CAAN;CACI,EAAY,CAAX,EAAD;CAAA,GACC,CAAD;CACA;KAHJ;CAIA,EAAM,CAAN;CACI,GAAC,EAAD,GAAU,CAAV;CAEA;KAPJ;CAQA,EAAuB,CAAvB,CAAmC,CAAhC,CAAiB,SAApB,KAAG;CACC,EAAM,CAAH,EAAH;CACK,CAAiB,CAAlB,CAAC,IAAD,CAAU,KAAQ;OAF1B;KATS;CA3Hb,EA2Ha;;CA3Hb,EA2IoB,MAAC,SAArB;CACI,EAAM,CAAN;CACI,EAAU,OAAV,GAAO;KADX;CAEA,EAAM,CAAN;CACI,EAAU,IAAV,MAAO;KAHX;CAIA,EAAuB,CAAvB,CAAmC,CAAhC,CAAiB,SAApB,KAAG;CACC,CAAQ,CAAqB,GAA7B,OAAQ;KANI;CA3IpB,EA2IoB;;CA3IpB,EAoJoB,MAAC,SAArB;CACI,QAAU;CACT,IAAD;CAtJJ,EAoJoB;;CAKpB;;;;;;;;;AAzJA;;CAAA,EAkKuB,kBAAvB;CACQ;CAAA,EAAI,CAAJ,MAAe;CAAf,EACI,CAAJ,CAAU,KAA2B,EAAjC;CADJ,EAGI,CADJ;AAC2B,CAAvB,EAA8C,CAAhC,CAAJ,CAAV,EAAuB;AACA,CADvB,CACA,CAA8C,CAAhC,CAAJ,CAAV,EAAuB;CADvB,CAEU,CAA4B,CAAxB,CAAJ,CAAV,EAAqB;CAFrB,CAGU,CAA4B,CAAxB,CAAJ,CAAV,EAAqB;CANzB;CAQA,CAAG,CAAO,CAAV;CAAiB,EAAO,GAAP;KARjB;CASA,CAAG,CAAO,CAAV;CAAiB,EAAO,GAAP;KATjB;CAUA,CAAG,CAAO,CAAV,EAAG,IAA6B,EAAhC;CACI,EAAW,CAAC,EAAZ,IAAsB,EAAX;KAXf;CAYA,CAAG,CAAO,CAAV,GAAG,GAA8B,GAAjC;CACI,EAAY,CAAC,EAAb,IAAuB,GAAX;KAbhB;CAcA,UAAO;CAjLf,EAkKuB;;CAlKvB,CAoLwB,CAAN,MAAC,CAAD,OAAlB;CACI;CAAA,EAAkB,CAAlB;CAAA,EAES,CAAT,IAAiB,KAAR;CAFT,EAGA,GAAY,IAAN;CACN;CACI,EAAgB,GAAhB;CAAA,EACI,GAAJ,IADA;CAAA,CAEoB,CAAjB,GAAH;MAHJ;CAMI,EAAgB,EAAhB;CAAA,EACgB,GAAhB,OADA;CAAA,CAEmB,CAAhB,GAAH;KAZJ;CAaA,EAAkB,GAAM,CAAjB,EAAW,EAAX,CAAW;CAlMtB,EAoLkB;;CApLlB,EAqMa,MAAC,EAAd;CAEI;CAAA,IAAG;CACC;CAAA,GACC,CAAD;CACA;KAHJ;CAIA,IAAG;CACC;CACA,GAAG,CAAM,CAAT,KAAG;CACC,GAAC,IAAD;MADJ;CAGI,GAAC,IAAD;OAJJ;CAKA;KAVJ;CAWoB,IAAF,KAAlB;CAlNJ,EAqMa;;CArMb,EAuNkB,MAAC,OAAnB;CACI,EAAsB,CAAtB,CAAM,GAAN;CAAA,EACsB,CAAtB,KADA,SACA;CADA,CAEG,CAAgB,CAAnB,CAAyB,EAAd,IAFX;CAAA,CAG8C,EAA9C,YAAiB;CAHjB,CAIsC,EAAtC,IAAS,IAAT;CAJA,EAKsB,CAAtB,CAAsB,SAAtB;CALA,CAMA,CAAqB,CAArB,SANA,CAMe;CANf,CAO0C,EAA1C,UAAe,EAAf;CAPA,EAQA,WAAe;CACd,EAAD,CAAC,MAAU,CAAX;CAjOJ,EAuNkB;;CAalB;;;;AApOA;;CAAA,EAwOoB,eAApB;CACI;CAAA,MAAO,OAAP;CAAA,EACc,CAAd,SADA,CAC6B;CAD7B,EAEc,CAAd,QAFA,EAE6B;CAF7B,EAGc,CAAd,IAAuB,IAHvB;CAAA,EAIc,CAAd,IAAuB,GAAT;CAKd,EAAa,CAAb,GAAG;CACC,EAAa,CAAV,EAAH,CAAG,EAAoB;CACnB,EAAQ,CAAI,CAAZ,EAAQ,CAAR;CAAA,EACQ,CAAI,CAAZ,EAAmB,CAAnB,CAAmB;MAFvB;CAII,EAAQ,CAAI,CAAZ,EAAQ,CAAR;CAAA,EACQ,CAAI,CAAZ,EAAmB,CAAnB,CAAmB;OALvB;CAAA,EAM+B,CAA9B,CAAoB,CAArB,QAAe;CANf,EAO+B,CAA9B,CAAoB,CAArB,QAAe;MARnB;CAUI,EAAS,EAAT;CAAA,EACS,EAAT,IADA;KAnBJ;CAAA,EAqB4B,CAA5B,CAAkB,MAAN;CArBZ,EAsB4B,CAA5B,CAAkB,CAAlB,KAAY;CAtBZ,EA0BS,CAAT;CA1BA,EA2BS,CAAT;CA3BA,EA4BsB,CAAtB,CAAM,IA5BN,GA4BA;CA5BA,EA6BsB,CAAtB,CAAM,IA7BN,GA6BA;CA7BA,GAgCA,KAAU,EAAV,EAAwB,CAAxB;CAhCA,GAiCA,KAAU,EAAV,EAAwB;CAjCxB,EAkCa,CAAb,UAlCA;CAAA,EAqC4B,CAA5B,CAA4B,CAA5B,CAAwC;CArCxC,EAsC4B,CAA5B,CAAkB,CAAU,KAAhB;CAtCZ,EAuC4B,CAA5B,CAA4B,EAA5B;CAvCA,EAwCA,EAAkB,EAAU,IAAhB;CAxCZ,EAyCA,EAAmB,EAAS,KAAf;CAzCb,EA0C4B,CAA5B,CAAmB,CAAS,MAAf;CA1Cb,CA6C2C,CAA3B,CAAhB,CAAgB,MAAhB;CA7CA,EA8CI,CAAJ,CAAI,MAAY;CA9ChB,EA+CI,CAAJ,CAAI,MAAY;CA/ChB,EAiDI,CADJ;CACI,CAAc,EAAC,EAAf;CAAA,CACc,EAAC,EAAf,cADA;CAAA,CAEc,IAAd;CAFA,CAGc,CAAU,GAAxB,KAAc;CApDlB;CAAA,EAqDI,CAAJ;CArDA,GAuDA,KAAU,GAvDV;CAAA,CAwD8B,EAA9B;CACK,EAAa,MAAd;CADJ,IAA8B;CAG7B,IAAD,IAAW,EAAX;CApSJ,EAwOoB;;CAxOpB,EAuSsB,MAAC,WAAvB;CACI;CAAA,EAAS,CAAT,CAAS,CAAT;CAAA,EACS,CAAT,CAAS,CAAT,EADA;CAAA,EAES,CAAT,IAAS;CAFT,EAGS,CAAT,IAAS;CAHT,EAIe,CAAf,CAJA,KAI0B;CAJ1B,EAKe,CAAf,EAAe;CALf,EAMe,CAAf,CAAe,CAAf;CANA,EAOe,CAAf,CAAqB,KAArB;CAPA,EAQe,CAAf,CAAqB,IAArB;CACA,UAAO;CAjTX,EAuSsB;;CAvStB,EAoTe,SAAf;CAEI,EAAqB,CAArB,CAAM,MAAN;CAAA,GACA,KAAU;CADV,GAEA,KAAU,MAAV;CAFA,EAGA,MAAU;CAHV,CAI8C,EAA9C,YAAiB;CAJjB,CAKsC,EAAtC,IAAS,IAAT;CALA,EAMkB,CAAlB,cANA;CAAA,CAOG,CAAgB,CAAnB,CAAyB,EAAd,IAPX;CASC,QAAD;CA/TJ,EAoTe;;CApTf,EAkUW,MAAX;AACQ,CAAJ,IAAU,MAAY,OAAtB;CACI;KADJ;AAEI,CAAJ,IAAU,MAAY,OAAlB;CACC,CAAE,EAAF,CAAD;KAJG;CAlUX,EAkUW;;CAlUX,EAyUsB,iBAAtB;CACI;CAAC,CAAgD,EAAhD,CAAgD,IAAC,EAAlD,KAAiB;CACZ,KAA2B,GAAW,IAAvC;CADJ,IAAiD;CA1UrD,EAyUsB;;CAzUtB,EA+UkB,MAAC,KAAD,GAAlB;CACI;CAA6D,IAAF;CAhV/D,EA+UkB;;CA/UlB,EAmVgB,MAAC,KAAjB;CACI,EAAqB,CAArB,CAAM,MAAN,GAAuC;CACvC,IAAS,MAAY,EAArB;CACI,GAAC,CAAK,CAAN,KAAkB,EAAlB;KAFJ;CAGC,QAAD;CAvVJ,EAmVgB;;CAnVhB;;CAV6C;;;;ACbjD;GAAA;;kSAAA;;AAAA,GAAW,EAAX,EAAW;;AACX,CADA,EACW,KAAX,OAAW;;AACX,CAFA,EAEW,GAAX,CAAW;;AAGX,CALA,EAKuB,GAAjB,CAAN;CAEI;;CAAA,EAAY,IAAZ;;CAMa,0BAAC;CACV;CAAA;CAAA;CAAA;CAAA;CAAA;CAAA;CAAA,EAAS,CAAT;CAAA,GACA;CARJ,EAMa;;CANb,EAWa,OAAb;CAGI,EAAY,CAAZ;CAAA,EACY,CAAZ,GADA,CACA;CADA,EAIA,KAAe;CAJf,EAKY,CAAZ;CALA,EAMY,CAAZ,wBAAY;CANZ,EAOY,CAAZ,mEAAY;CAPZ,GAYA,CAAM,EAAN;CAZA,GAaA,CAAM,EAAN;CAbA,GAgBA;CAhBA,EAoBkB,CAAlB;CApBA,CAwBmC,EAAnC,GAAQ,MAAR;CACC,CAAqC,EAArC,GAAO,GAAR;CAvCJ,EAWa;;CAXb,EA0CY,MAAZ;CACI;CAAA;CAAA;wBAAA;CACI,GAAG,EAAH;CACI,aADJ;OADJ;CAAA;CAAA,EAGQ,CAAR,EAAc;CAHd,EAIA;CACI,IAAkB,CAAlB;CAAA,CACa,IAAb;CADA,CAEa,EAAb,CAAkB,CAAlB;CAFA,CAGc,CAAa,EAAK,CAAhC,QAAc;CARlB;CASA,UAAO;CApDX,EA0CY;;CA1CZ,EAuDqB,eAArB;CAGI,UAAO;CA1DX,EAuDqB;;CAvDrB,EA6Da,MAAC,CAAd;;CA7DA,EAiEe,UAAf;CACI;CAAA,EAAa,CAAb,EAAmB,CAA0B,CAAU,EAAvD,MAAa;CAAb,EACe,CAAf,CAAe,GAAf,EAAkC,CAEnB;CAHf,EAKQ,CAAR,GAAgB,IALhB;CAMc,EAAL,CAAI,CAAJ,CAAT,EAAoB,GAApB;CAxEJ,EAiEe;;CAjEf,EA+EkB,MAAC,OAAnB;CACI;CAAA,EAAS,CAAT;AACI,CAAJ,KAAI;CACA;KAFJ;CAGC,IAAK,MAAN;CAnFJ,EA+EkB;;CA/ElB,EAsFe,MAAC,IAAhB;CACI;CAAA,EAAK,CAAL;AACW,CAAX,CAAa,CAAb,IAAW,EAAY,EAAhB;CACH,EAAK,GAAL;CACA,CAAY,EAAF,EAAV,EAAU,CAAY;CAAtB;OAFJ;CADA,IACA;AAII,CAAJ,CAAI,EAAJ,WAAI;CAA0B,YAAO;KALrC;CAMG,CAAD,EAAF;CA7FJ,EAsFe;;CAtFf,EAgGiB,MAAC,MAAlB;CACI,IAA2C,CAAlC,MAAN;CACC,YAAO;KADX;CAAA,GAEA;CAFA,CAGqC,EAArC,EAAM,MAAN;CAHA,CAIgB,CAAqB,CAArC,EAAsB,CAAQ,OAAd;CAChB,UAAO;CAtGX,EAgGiB;;CAhGjB,EAyGc,SAAd;CACI;CAAA;CAAA;UAAA;wBAAA;AACO,CAAH,GAAG,CAAkB,CAArB;CACI,CAAqC,GAArC,CAAM,EAAN;CAAA,CACgB,CAAM,CAArB,UAAe;MAFpB;CAAA;OADJ;CAAA;oBADU;CAzGd,EAyGc;;CAzGd,EAgHY,OAAZ;CACI;CAAO,CAAgB,CAAvB,GAAM,GAAkB,CAAxB;CACI;CAAA,GAAG,EAAH;CACI,MAAO,CAAP;CACA;OAFJ;CAIA,EAAM,CAAH,CAAc,CAAjB;CACI,IAAC,EAAD;CAAA,IACC,EAAD;CADA,EAEA,EAAC,GAAD,CAAgB;CAFhB,EAKA,EAFG,CAAH,aAEA,IAFA,6BAAoB;CAOpB;OAfJ;CAAA,EAgBI,GAAJ;AACA;wBAAA;CACI,EAAc,EAAC,GAAf,EAAc,CAAd;CACA,GAAG,CAAK,GAAR;CACI,EAA0B,EAAzB,KAAD;CAAA,CAC0C,EAA1C,OAAW,CAAX;CADA,CAEA,GAAC,KAAD;SAJJ;CAAA,GAKK,IAAL;CANJ,MAjBA;CAwBC,YAAD;CAzBJ,IAAuB;CAjH3B,EAgHY;;CAhHZ,EA6IY,MAAC,CAAb;CACI;OAAA;CAAA,EAAK,CAAL,GAAQ;CAAR,CACU,CAAF,CAAR,IAAQ;CADR,CAEU,CAAF,CAAR,IAAQ;CAFR,EAGA,EAAK,CAHL,MAGa;CAHb,EAIoB,CAApB,CAAK,MAAL;CAJA,CAKA,KAAQ,IAAR;CALA,CAME,CAA2B,CAA7B,CAA6B,EAA7B,EAA8B,OAA9B;CACI,CAAsD,GAArD,CAAD,gBAAuB;CAAvB,CACE,EAAF;CADA,EAE0B,EAAzB,CAAD;CACC,CAAD,GAAC,QAAD;CAJJ,IAA6B;CAK7B,UAAO;CAzJX,EA6IY;;CA7IZ,EA4JiB,MAAC,MAAlB;CACI;CAAO,CAAyB,CAAhC,GAAM,CAAN,EAAY,EAAZ;CACI,GAAG,EAAH;CAAY;OAAZ;CAAA,EACA,EAAC,CAAD;CACC,MAAwB,CAAU,KAAnC;CAHJ,IAAgC;CA7JpC,EA4JiB;;CA5JjB,EAmKe,MAAC,IAAhB;CACI;CAAA,EAAS,CAAT;CAAA,EACS,CAAT;CADA,EAEY,CAAZ;CACA;CAAA;uBAAA;CACI,GAAG,EAAH,GAAG;CACC,CAAkC,EAAlC,CAAK,GAAL;CAAA,EACA,EAAK,GAAL,SAAuB;CADvB,CAEA,CAA8B,EAAzB,EAAQ,CAAb;CAFA,EAG8B,CAH9B,CAGK,GAAL;MAJJ;CAMI,CAAkC,GAA7B,GAAL;CAAA,CACA,CAA8B,EAAzB,CAA0C,CAAlC,CAAb,CAA+C;CAD/C,EAEA,EAAK,CAFL,CAE+B,CAA/B,QAA+B,CAAR;CAFvB,EAG8B,EAAzB,CAAgC,EAArC,CAAqC;OATzC;CAAA,GAUa,EAAb;CAXJ,IAHA;AAgBA;GAAA,OAAiB,sEAAjB;CACI,EAAe,GAAf,OAAe;CAAf,CACgB,CAAhB,KAAQ,CAA8B,OAAtB;CADhB,EAEe,EAAf,GAAuB,KAAR;CAFf,IAGK,CAAL;CAHA,EAIA,EAAK,CAAL,GAAe;CAJf,EAKmB,EAAd,CAAL,GAA0B;CAL1B,CAMA,CAAmB,EAAd,CAAL,CAAa,EAAa;CAN1B,GAOC,CAAD,EAAQ,IAAR;CARJ;oBAjBW;CAnKf,EAmKe;;CAnKf;;CAF6C;;;;ACLjD;GAAA;kSAAA;;AAAA,GAAW,EAAX,EAAW;;AACX,CADA,EACW,KAAX,gBAAW;;AACX,CAFA,EAEW,KAAX,OAAW;;AAGX,CALA,EAKuB,GAAjB,CAAN;CAEI;;CAAA,EAAY,IAAZ;;CAMa,0BAAC;CACV,EAAS,CAAT;CAAA,GACA;CARJ,EAMa;;CANb,EAWa,OAAb;CAGI;CAAA,EAAY,CAAZ;CAAA,EACY,CAAZ,GADA,CACA;CADA,EAIA,KAAe;CAJf,EAKY,CAAZ;CAGC,CAAE,CAAiC,CAAnC,KAAmC,EAApC;CACK,CAAgC,CAAjB,EAAf,GAAD;CADJ,IAAoC;CAtBxC,EAWa;;CAXb,EA0BY,MAAZ;CACI;CAAA,EAAO,CAAP,IAAgB,OAAT;CACP;CACI,YAAO;CAAA,GAAO,IAAP;CAAA,CAAqB,IAArB,CAAY;CAAZ,CAAkC,EAAL;CADxC,OACI;KAFJ;CAGA,UAAO;CA9BX,EA0BY;;CA1BZ,EAiCqB,eAArB;CAGI,UAAO;CApCX,EAiCqB;;CAjCrB,CAsC+B,CAAR,MAAC,WAAxB;CACK,CAAqC,EAArC,CAAD,GAAS,GAAT;CAvCJ,EAsCuB;;CAtCvB,EA2Ca,MAAC,CAAd;CACI,OAAS,EAAT;CA5CJ,EA2Ca;;CA3Cb,EAgDe,UAAf;CACK,OAAQ,GAAT;CAjDJ,EAgDe;;CAhDf;;CAF6C;;;;ACLjD;GAAA;kSAAA;;AAAA,GAAc,QAAd,MAAc;;AACd,CADA,EACc,KAAd,OAAc;;AAGd,CAJA,EAIuB,GAAjB,CAAN;CAEI;;;;;CAAA;;CAAA,EAAW,KAAX,6BAAW;;CAAX,EACW,IAAX,EADA;;CAAA,EAMY,OAAZ;CACI;CAAA,EACY,CAAZ,YADA;CAAA,EAEY,CAAZ,CAFA,GAEA;CAFA,EAGA,KAAe;CAHf,EAIY,CAAZ;CAJA,EAKA,EAAkB,QAAN;CALZ,EAMe,CAAf,CAAqB,QAArB,IAAe;CANf,EAOA,GAPA;CAAA,EAQY,CAAZ,SAAY;CACX,UAAD;CAhBJ,EAMY;;CANZ,EAkBY,MAAZ;CACI;CACI,YAAO;CAAA,CAAY,CAAZ,CAAa,IAAb;CADX,OACI;MADJ;CAGI,YAAO;KAJH;CAlBZ,EAkBY;;CAlBZ,EAwBqB,eAArB;CACI,IAAM;CAAN,GACA,CAAM,CAAN;CACA,UAAO;CA3BX,EAwBqB;;CAxBrB,EA6Ba,MAAC,CAAd;CACI,UAAO;CA9BX,EA6Ba;;CAMb;;;AAnCA;;CAAA,EAsCa,QAAb;CACI;OAAA;CAAA;CAAA,EACY,CAAZ,wEADA;CAAA,EAMa,CAAb,CAAa,CAAb;CANA,EAQkB,CAAlB,EAAM,CAAN,EAAkB;CACd,EAAG,EAAM,CAAT;CACC,EAAD,CAAC,SAAD;CAVJ,IAQkB;CARlB,EAYiB,CAAjB,EAAM,GAAW;CACb,EAAG,CAAH,CAAS,CAAT,MAAsB;CAAtB,EACG,CADH,CACS,CAAT,OAAsB;CADtB,EAEG,EAAoB,CAAvB,OAAiB;CAFjB,EAGG,EAAM,CAAT;CAHA,EAIA,EAAC,CAAD;CACC,CAA6B,GAA7B,CAAD;CAlBJ,IAYiB;CAZjB,EAoBe,CAAf,KAAgB,GAAhB;CACW,EAAP,GAAM,OAAN;CArBJ,IAoBe;CAGd,CAA+B,EAA/B,CAAK,EAAN,EAAiC,EAAjC;CACI;CAAA,EAAS,EAAT;CACA,GAAG,EAAH,GAAY;CACR,KAA0B,EAA1B,SAAM,CAAoB;CACb,EAAb;MAFJ;CAII,EAAG,EAAM,GAAT;CACC,EAAD,CAAC,WAAD;OAPwB;CAAhC,CAQC,GAR+B;CA9DpC,EAsCa;;CAtCb;;CAFgD;;;;ACJpD;GAAA;;kSAAA;;AAAA,GAAc,KAAd,OAAc;;AAGd,CAHA,EAGuB,GAAjB,CAAN;CAEI;;CAAA,EAAW,KAAX,2BAAW;;CAAX,EACW,IAAX,EADA;;CAOa,2BAAC;CACV;CAAA;CAAA;CAAA;CAAA;CAAA,EACgB,CAAhB;CATJ,EAOa;;CAPb,EAWY,OAAZ;CACI;CAAA;CAAA,EAGY,CAAZ,SAHA;CAAA,EAIY,CAAZ;CAJA,EAKA,OAAY;CALZ,EAMY,CAAZ;CANA,GAQA;CARA,EASA,EAAY,QAAN;CATN,CAU8B,CAA3B,CAAH;CAVA,EAWA;CAXA,EAYY,CAAZ,CAAkB,GAAlB,GAAY;CACX,CAAoC,EAApC,IAAQ,GAAT;CAzBJ,EAWY;;CAXZ,EA4BY,MAAZ;CACI,UAAO;CAAA,CAAS,EAAC,EAAV;CADC,KACR;CA7BJ,EA4BY;;CA5BZ,EA+BqB,eAArB;CACI,EAAI,CAAJ;CACA,UAAO;CAjCX,EA+BqB;;CA/BrB,EAmCa,MAAC,CAAd;CACI,UAAO;CApCX,EAmCa;;CAnCb,EA0Ca,OAAb;CACI,EAAqC,CAAC,IAA5B,GAAH,iBAAG;CA3Cd,EA0Ca;;CA1Cb,EA8CmB,cAAnB;CAEI;OAAA;CAAA,EAAU,CAAV,CAAgB,EAAhB,MAAU;CAAV,EACiB,CAAjB,CADA,SACA;CADA,CAGsC,EAAtC,GAAO,EAAgC,EAAvC;CACI;CAAA,KACA;CACQ,EAAR,IAAO,EAAU,CAAjB;CAHJ,CAIC,GAJqC;CAHtC,CASsC,EAAtC,GAAO,EAAgC,EAAvC;CACI;CAAA,KACA;CACQ,KAAR,CAAO,EAAU,CAAjB;CAHJ,CAIE,GAJoC;CATtC,EAeY,CAAZ;CACI;CACC,YAAD;CAjBJ,IAeY;CAfZ,EAmBO,CAAP,KAAQ;CACJ;CAAA;CAAA,KACA;CADA,CAEA,CAAK,GAAL,MAFA;CAAA,CAGU,CAAF,EAAR;CACC,UAAD;CAxBJ,IAmBO;CAnBP,EA0BW,CAAX,KA1BA;CAAA,CA2BqC,EAArC,GAAO,CAAP;CACQ,CAAyB,EAAjC,GAAO,IAAP;CA5EJ,EA8CmB;;CA9CnB,EA+EwB,mBAAxB;CACI,EAAqB,CAArB;CAGC,IAAD,GAAS,GAAT;CAnFJ,EA+EwB;;CA/ExB,EAsFuB,kBAAvB;CACI;CAAA,EAAO,CAAP,CAAuB,GAAP;CACf,UAAD;CAxFJ,EAsFuB;;CAtFvB,EA2Fa,MAAC,EAAd;CACI;OAAA;AAAO,CAAP,IAAO;CACH,IAAO,iBAAM;KADjB;CAAA,EAEa,CAAb,MAAa;CAFb,EAGA,EAAU;CAHV,GAIA,EAAM,OAAN;CACO,EAAY,GAAb,GAAN;CACI,EAAW,EAAV,CAAD;CACC,WAAY,CAAb;CARK,IAMU;CAjGvB,EA2Fa;;CA3Fb;;CAF8C;;;;ACHlD;GAAA;;kSAAA;;AAAA,GAAW,KAAX,OAAW;;AACX,CADA,EACU,IAAV,MAAU;;AAEV,CAHA,EAGuB,GAAjB,CAAN;CACI;;;;;;;;;;CAAA;;CAAA,EAAI,8BAAJ;;CAAA,EACW,MAAX,mBADA;;CAAA,EAES,EAFT,EAEA;;CAFA,EAGU,KAAV,uBAAU;;CAHV,EAMI,GADJ;CACI,CAAmB,EAAnB;CAAA,CACoB,EAApB,cADA,CACA;CAPJ;;CAAA,EASY,MAAC,CAAb;CACI;CAAA,EACmB,CAAnB,GAA0B,QAA1B;CADA,EAEkB,CAAlB,EAFA,CAEyB,OAAzB;CAFA,EAGY,CAAZ,GAAuC,EAAY,YAA1C;CACR,IAAD;CAdJ,EASY;;CATZ,EAiBa,QAAb;CACI;CAAA,CAA0B,CAA1B,EAAM,QAAN;CAAA,EACQ,CAAR,MAAQ;CADR,EAEU,CAAV,WAAU;CAFV,EAGa,CAAb,CAAmB,CAAZ,OAAM;CAHb,GAKA;CALA,EAM6C,CAA7C,wBAAW,OAAX;CANA,GAOA;CAPA,GAQA,CAAM,MAAN;CACI,CAAS,IAAT,GAAS;CACL,GAAK,CAAJ,GAAD;CACC,cAAD;CAFJ,MAAS;CAAT,CAGO,GAAP,IAAQ;CACJ,GAAK,CAAJ,GAAD;CAAA,GACK,CAAJ,EAAD;AACiD,CAAjD,GAAG,CAAK,EAAL,CAAH,GAAG,CAAkB;CAChB,GAAI,CAAJ,YAAD,OAAW;MADf;CAGK,GAAI,CAAJ,YAAD,SAAW;SANZ;CAHP,MAGO;CAZX,KAQA;CARA,EAoBW,CAAX,SAAW;CACV,EAAc,CAAd,CAAD,EAAQ,EAAO,EAAf;CACK,GAAD,CAAC,QAAD;CADJ,IAAe;CAvCnB,EAiBa;;CAjBb,EA0CmB,cAAnB;CAEI;CAAA;CAAA,EAEc,CAAd,CAAoB,MAApB,EAAc;CAFd,EAGkD,CAAlD,EAAO,CAAP,IAAyB;CAEzB,EAAe,CAAf,CAAqB,CAAZ,OAAM;CACX,EAAiB,GAAjB,UAAiB,gBACS,SADJ;CAAtB,GAKC,EAAD;MANJ;CAQI,EAAmB,CAAlB,EAAD,gBAAmB;CACnB;CAAA;oCAAA;CACI,EAAiB,IAAG,CAApB,EAA+F,CAA3E,GAApB,GAAoB;CAApB,GACC,EAAD;CAFJ,MATJ;KALA;CAAA,GAkBA;CACC,QAAD;CA/DJ,EA0CmB;;CA1CnB,EAkEqB,gBAArB;CACI;CAAA,CAAwB,CAAxB,GAA0B,MAA1B;CACA,EAAuB,GAAvB,GAAuB,EAAvB;CACK,CAAuB,CAAxB,CAAK,CAAJ,CAAyB,MAA1B;CADJ,IAAuB;CApE3B,EAkEqB;;CAlErB,EAwEM,CAAN,KAAM;CACF;CAAA,EAAI,CAAJ;CAAA,GACA,GAAQ,CAAR;CADA,EAEW,CAAX,KAAW,CAAX;CACK,OAAD;CADJ,CAEE,CAFF,EAAW;CAGF,CAA4B,EAAC,IAA9B,CAAR;CA9EJ,EAwEM;;CAxEN,EAgFM,CAAN,KAAM;CACF;CAAA;CAAA,EACyB,CAAzB,KAAyB,IAAzB;CACI,IAAC,CAAD,CAAQ,EAAR;CAAA,EACI,EAAH,CAAD;CACC,KAAD;CAHJ,IAAyB;CADzB,GAKA;CACS,CAA+B,EAAC,IAAjC,CAAR;CAvFJ,EAgFM;;CAhFN,EAyFiB,MAAC,MAAlB;CACI,IAAkC,EAAL,gBAAnB;CAAV;KAAA;CAAA,GACA;CACC,IAAD;CA5FJ,EAyFiB;;CAzFjB,EA8FkB,aAAlB;CACK,IAAD;CA/FJ,EA8FkB;;CA9FlB;;CADkD;;;;AC2CtD;;AAAA,GAAiB,GAAX,CAAN,KAAiB;CACb,EAAe,MAAC,KAAhB;CACI;CAAA,EAAW,CAAX,GAAkB,CAAlB,QAAW;CACL,CAAkC,EAAxC,CAAK,EAAkB,CAAvB,CAAe,EAAf;CACI;SAAA;CAAA,EAAY,GAAZ,CAAmB,EAAnB,GAAY;CAAZ,EACY,GAAZ,EAAoB,CAApB,IAAY;CACJ,CAA0B,KAA3B,EAA4B,IAAnC;CACI;CAAA,GAAG,CAAK,CAAO,EAAf,IAAG;CACC;SADJ;CAAA,EAEY,EAAK,CAAO,EAAxB,IAAY;CAFZ,EAGY,EAAZ,IAAqB,IAAT;CAEZ;CAAA;yBAAA;CACI,EAAM,CAAH,CAA4B,CAA5B,IAAH,EAAG;CACC,oBADJ;WAAA;CAEA,EAAG,EAAO,KAAV;CACI,CAA+B,CAA5B,CAAH;WAJR;CAAA,QALA;CAAA,CAWiC,GAA5B,GAAL;CAXA,CAa4B,CADP,KAArB,KAAqB,CAArB;CAC4B,CAAQ,EAAR;CAAA,CACW,GADX,KACA;CAd5B,SAYqB;CAZrB,IAeK,GAAL;CAEA;CAAA;cAAA;0BAAA;CACI,EAAG,EAAO,CAAV;CACI,CAA0C,EAA1C,CAAK,CAAO,MAAZ;MADJ;CAGI,CAAkC,CAA/B,EAAH;WAJR;CAAA;wBAlB8B;CAAlC,MAAkC;CAHtC,IAAwC;CAF5C,EAAe;CAAf,CAuCA,CAAQ,GAAR,GAAS,IAAD;CACJ;CAAA,KAAY;CAAZ,CACwB,CAArB,CAAH;CADA,CAEkC,CAA/B,CAAH,EAAwC,MAAxC;CAFA,CAGkC,CAA/B,CAAH;CAHA,EAIA,UAAa;CAJb,EAKQ,CAAR,EAAc;CALd,EAMA,EAAK,CAAqB,GAAX;CANf,CAO0B,EAA1B,CAAK,CAAL;CAPA,CAQkC,EAAlC,CAAK,OAAL;CARA,CASoC,EAApC,CAAK,OAAL;CACgB,IAAhB,UAAe;CAlDnB,EAuCQ;CAxCZ;;;;AC9CA;GAAA;kSAAA;;AAAA,GAAW,KAAX,OAAW;;AACX,CADA,EACU,IAAV,MAAU;;AACV,CAFA,EAEwB,kBAAxB,OAAwB;;AAExB,CAJA,EAIuB,GAAjB,CAAN;CACI;;;;;CAAA;;CAAA,EAAI,8BAAJ;;CAAA,EACW,MAAX,mBADA;;CAAA,EAES,EAFT,EAEA;;CAFA,EAGU,KAAV,sBAAU;;CAHV,EAOI,GADJ;CACI,CAAmB,EAAnB;CAAA,CACoB,EAApB,cADA,CACA;CADA,CAEY,EAAZ,KAFA,EAEA;CATJ;;CAAA,EAYY,MAAC,CAAb;CACI;CAAA,EACmB,CAAnB,GAA0B,QAA1B;CADA,EAEkB,CAAlB,EAFA,CAEyB,OAAzB;CACC,EAAc,CAAd,GAAqB,IAAtB;CAhBJ,EAYY;;CAZZ,EAmBa,QAAb;CACI;CAAA,EAAW,CAAX,SAAW;CAAX,EACe,CAAf,GAAQ,EAAO;CAAI,GAAD,CAAC,QAAD;CAAlB,IAAe;CADf,GAEA;CAFA,GAGA;CAHA,GAIA;CAJA,GAKA;CACC,EAAO,CAAP,MAAO,CAAR;CA1BJ,EAmBa;;CAnBb,EA4BqB,gBAArB;CACI;CAAA,CAAwB,CAAxB,GAA0B,MAA1B;CACA,EAAuB,GAAvB,GAAuB,EAAvB;CACK,CAAuB,CAAxB,CAAK,CAAJ,CAAyB,MAA1B;CADJ,IAAuB;CA9B3B,EA4BqB;;CA5BrB,EAkCM,CAAN,KAAM;CACF;CAAA,EAAI,CAAJ;CAAA,GACA,GAAQ,CAAR;CADA,GAEA;CACW,SAAX;CACK,OAAD;CADJ,CAEE,CAFF,EAAW;CAtCf,EAkCM;;CAlCN,EA2CM,CAAN,KAAM;CACF;CAAA,EAAyB,CAAzB,KAAyB,IAAzB;CACI,IAAC,CAAD,CAAQ,EAAR;CAAA,EACI,EAAH,CAAD;CACC,KAAD;CAHJ,IAAyB;CAIzB;CAhDJ,EA2CM;;CA3CN,EAkDW,MAAX;CACI;CAAA,GACA;CADA,GAEA;CACC,UAAD;CAtDJ,EAkDW;;CAlDX,EAwDS,IAAT,EAAU;CACN;CAAA;CAAA,GACA;CADA,GAEA;CAFA,GAGA;CAHA,GAIA;CAJA,EAKA,EAAM;CACN,EAAkB,CAAlB,EAAS,CAAN;CACC,EAAW,GAAX,WAAW,IACW,gBADN;CAAhB,GAKC,EAAD;CACA;CAAA;YAAA;wBAAA;CACI,EAAW,KAAX,EAAW,sBAAK;CAAhB,GAKC,EAAD;CANJ;sBAPJ;KAPK;CAxDT,EAwDS;;CAxDT,EA+ES,IAAT,EAAS;CACL;CACC,UAAD;CAjFJ,EA+ES;;CA/ET,EAmFiB,YAAjB;CACI;CACC,UAAD;CArFJ,EAmFiB;;CAnFjB,EAwFkB,aAAlB;CACI;CAAA,GACA;CADA,GAEA;CAFA,GAGA;CACC,UAAD;CA7FJ,EAwFkB;;CAxFlB;;CAD4C;;;;ACHhD;;AAAA,GAAuB,GAAjB,CAAN;CAEiB,oBAAE;CACX,EADW,CAAD,EACV;CAAA,EAAS,CAAT,EAAgB,EAAM;CAD1B,EAAa;;CAAb,EAGa,MAAC,EAAd;CACI,KAAO;CAAP,GACA,CAAM;CADN,GAEA,EAAO,GAAP;CAFA,GAGA,EAAO,KAAP;CACC,KAAM,KAAP;CARJ,EAGa;;CAHb,EAWe,MAAC,IAAhB;CACI,KAAO;CAAP,GACA,CAAM;CADN,GAEA,EAAO,GAAP;CAFA,GAGA,EAAO,KAAP;CACC,KAAM,EAAP;CAhBJ,EAWe;;CAXf,EAkBc,MAAC,GAAf;CACI,KAAO;CAAP,GACA,CAAM;CADN,GAEA,EAAO,EAAP;CAFA,GAGA,EAAO,GAAP;CACC,KAAM,KAAP;CAvBJ,EAkBc;;CAlBd,EAyBY,MAAC,CAAb;CACI,KAAO;CAAP,GACA,CAAM;CADN,GAEA,EAAO,KAAP;CAFA,GAGA,EAAO,EAAP;CACC,KAAM,KAAP;CA9BJ,EAyBY;;CAzBZ,EAgCM,CAAN,KAAM;CACD,KAAM,KAAP;CAjCJ,EAgCM;;CAhCN,EAmCM,CAAN,KAAM;CACD,KAAM,KAAP;CApCJ,EAmCM;;CAnCN,EAsCS,IAAT,EAAS;CACJ,KAAM,EAAP;CAvCJ,EAsCS;;CAtCT,EAyCM,CAAN,EAAM,GAAC;CACF,KAAM,KAAP;CA1CJ,EAyCM;;CAzCN,EA4CU,KAAV,CAAU;AACK,CAAX,CAAW,EAAC,EAAM,IAAP,CAAJ;CA7CX,EA4CU;;CA5CV;;CAFJ","file":"public/javascripts/app.js","sourcesContent":["BaseCollection = require 'lib/base_collection'\nApplication = require 'models/application'\n\n\n\n# List of installed applications.\nmodule.exports = class ApplicationCollection extends BaseCollection\n\n    model: Application\n    url: 'api/applications/'\n    apps: []\n\n\n    get: (idorslug) ->\n        out = super idorslug\n        return out if out\n\n        for app in @models\n            return app if idorslug is app.get 'id'\n\n","BaseCollection = require 'lib/base_collection'\nBackground = require 'models/background'\n\n\n# List of available backgrounds.\nmodule.exports = class BackgroundCollection extends Backbone.Collection\n    url: 'api/backgrounds'\n    model: Background\n\n    addPredefinedBackgrounds: ->\n        @add [\n                id: 'background-none'\n                predefined: true\n            ,\n                id: 'background-01'\n                predefined: true\n            ,\n                id: 'background-02'\n                predefined: true\n            ,\n                id: 'background-03'\n                predefined: true\n            ,\n                id: 'background-04'\n                predefined: true\n            ,\n                id: 'background-05'\n                predefined: true\n            ,\n                id: 'background-06'\n                predefined: true\n            ,\n                id: 'background-07'\n                predefined: true\n            ,\n                id: 'background-08'\n                predefined: true\n        ]\n\n    init: ->\n        @fetch\n            success: (models) =>\n                @addPredefinedBackgrounds()\n                selected = @findWhere id: window.app.instance.background\n                selected ?= @at 0\n                selected.set 'selected': true if selected?\n            error: ->\n\n","BaseCollection = require 'lib/base_collection'\nDevice = require 'models/device'\n\n\n# List of installed devices.\nmodule.exports = class DeviceCollection extends BaseCollection\n\n    model: Device\n    url: 'api/devices/'","BaseCollection = require 'lib/base_collection'\nNotification = require 'models/notification'\n\n\n# List of installed applications.\nmodule.exports = class NotificationCollection extends Backbone.Collection\n\n    model: Notification\n    url: 'api/notifications'\n\n\n    removeAll: (options) ->\n        options ?= {}\n        success = options.success\n        options.success = =>\n            @reset []\n            success?.apply this, arguments\n\n        @sync 'delete', this, options\n","BaseCollection = require 'lib/base_collection'\nStackApplication = require 'models/stack_application'\n\n\n# List of installed applications.\nmodule.exports = class ApplicationCollection extends BaseCollection\n\n    model: StackApplication\n    url: 'api/applications/stack'\n\n","# Make ajax request more easy to do.\n# Expected callbacks: success and error\nexports.request = (type, url, data, callbacks) ->\n    $.ajax\n        type: type\n        url: url\n        data: data\n        success: callbacks.success\n        error: callbacks.error\n\n# Sends a get request with data as body\n# Expected callbacks: success and error\nexports.get = (url, callbacks) ->\n    exports.request \"GET\", url, null, callbacks\n\n# Sends a post request with data as body\n# Expected callbacks: success and error\nexports.post = (url, data, callbacks) ->\n    exports.request \"POST\", url, data, callbacks\n\n# Sends a put request with data as body\n# Expected callbacks: success and error\nexports.put = (url, data, callbacks) ->\n    exports.request \"PUT\", url, data, callbacks\n\n# Sends a delete request with data as body\n# Expected callbacks: success and error\nexports.del = (url, callbacks) ->\n    exports.request \"DELETE\", url, null, callbacks\n","module.exports = [\n    'ead1ad'\n    'fbf0c2'\n    '3cd7c3'\n    '8FBAff'\n    'B4AED9'\n    '78dc9a'\n    '8DED2A'\n    '8eecB9'\n    'bbcaA9'\n    'cdb19b'\n    'ec7e63'\n    '8cec56'\n    'ffb1be'\n    'DD99CE'\n    'E26987'\n    '8CB1FF'\n    'f5dd16'\n    'f1fab8'\n    'ffbe56'\n    '6EE1C8'\n    'C4BEE9'\n    '59C1ef'\n    'EC7E63'\n    '8BEE8C'\n]\n","exports.locales =\n    'en': 'English'\n    'fr': 'Franais'\n    # 'es': 'Espaol'\n    # 'ja': ''\n","\n# Change a string into its slug shape (only alphanumeric char and hyphens\n# instead of spaces.\nmodule.exports = slugify = (string) ->\n    _slugify_strip_re = /[^\\w\\s-]/g\n    _slugify_hyphenate_re = /[-\\s]+/g\n    string = string.replace(_slugify_strip_re, '').trim().toLowerCase()\n    string = string.replace _slugify_hyphenate_re, '-'\n    string\n","exports.timezones = [\n    \"Africa/Abidjan\"\n    \"Africa/Accra\"\n    \"Africa/Addis_Ababa\"\n    \"Africa/Algiers\"\n    \"Africa/Asmara\"\n    \"Africa/Bamako\"\n    \"Africa/Bangui\"\n    \"Africa/Banjul\"\n    \"Africa/Bissau\"\n    \"Africa/Blantyre\"\n    \"Africa/Brazzaville\"\n    \"Africa/Bujumbura\"\n    \"Africa/Cairo\"\n    \"Africa/Casablanca\"\n    \"Africa/Ceuta\"\n    \"Africa/Conakry\"\n    \"Africa/Dakar\"\n    \"Africa/Dar_es_Salaam\"\n    \"Africa/Djibouti\"\n    \"Africa/Douala\"\n    \"Africa/El_Aaiun\"\n    \"Africa/Freetown\"\n    \"Africa/Gaborone\"\n    \"Africa/Harare\"\n    \"Africa/Johannesburg\"\n    \"Africa/Kampala\"\n    \"Africa/Khartoum\"\n    \"Africa/Kigali\"\n    \"Africa/Kinshasa\"\n    \"Africa/Lagos\"\n    \"Africa/Libreville\"\n    \"Africa/Lome\"\n    \"Africa/Luanda\"\n    \"Africa/Lubumbashi\"\n    \"Africa/Lusaka\"\n    \"Africa/Malabo\"\n    \"Africa/Maputo\"\n    \"Africa/Maseru\"\n    \"Africa/Mbabane\"\n    \"Africa/Mogadishu\"\n    \"Africa/Monrovia\"\n    \"Africa/Nairobi\"\n    \"Africa/Ndjamena\"\n    \"Africa/Niamey\"\n    \"Africa/Nouakchott\"\n    \"Africa/Ouagadougou\"\n    \"Africa/Porto-Novo\"\n    \"Africa/Sao_Tome\"\n    \"Africa/Tripoli\"\n    \"Africa/Tunis\"\n    \"Africa/Windhoek\"\n    \"America/Adak\"\n    \"America/Anchorage\"\n    \"America/Anguilla\"\n    \"America/Antigua\"\n    \"America/Araguaina\"\n    \"America/Argentina/Buenos_Aires\"\n    \"America/Argentina/Catamarca\"\n    \"America/Argentina/Cordoba\"\n    \"America/Argentina/Jujuy\"\n    \"America/Argentina/La_Rioja\"\n    \"America/Argentina/Mendoza\"\n    \"America/Argentina/Rio_Gallegos\"\n    \"America/Argentina/Salta\"\n    \"America/Argentina/San_Juan\"\n    \"America/Argentina/San_Luis\"\n    \"America/Argentina/Tucuman\"\n    \"America/Argentina/Ushuaia\"\n    \"America/Aruba\"\n    \"America/Asuncion\"\n    \"America/Atikokan\"\n    \"America/Bahia\"\n    \"America/Barbados\"\n    \"America/Belem\"\n    \"America/Belize\"\n    \"America/Blanc-Sablon\"\n    \"America/Boa_Vista\"\n    \"America/Bogota\"\n    \"America/Boise\"\n    \"America/Cambridge_Bay\"\n    \"America/Campo_Grande\"\n    \"America/Cancun\"\n    \"America/Caracas\"\n    \"America/Cayenne\"\n    \"America/Cayman\"\n    \"America/Chicago\"\n    \"America/Chihuahua\"\n    \"America/Costa_Rica\"\n    \"America/Cuiaba\"\n    \"America/Curacao\"\n    \"America/Danmarkshavn\"\n    \"America/Dawson\"\n    \"America/Dawson_Creek\"\n    \"America/Denver\"\n    \"America/Detroit\"\n    \"America/Dominica\"\n    \"America/Edmonton\"\n    \"America/Eirunepe\"\n    \"America/El_Salvador\"\n    \"America/Fortaleza\"\n    \"America/Glace_Bay\"\n    \"America/Godthab\"\n    \"America/Goose_Bay\"\n    \"America/Grand_Turk\"\n    \"America/Grenada\"\n    \"America/Guadeloupe\"\n    \"America/Guatemala\"\n    \"America/Guayaquil\"\n    \"America/Guyana\"\n    \"America/Halifax\"\n    \"America/Havana\"\n    \"America/Hermosillo\"\n    \"America/Indiana/Indianapolis\"\n    \"America/Indiana/Knox\"\n    \"America/Indiana/Marengo\"\n    \"America/Indiana/Petersburg\"\n    \"America/Indiana/Tell_City\"\n    \"America/Indiana/Vevay\"\n    \"America/Indiana/Vincennes\"\n    \"America/Indiana/Winamac\"\n    \"America/Inuvik\"\n    \"America/Iqaluit\"\n    \"America/Jamaica\"\n    \"America/Juneau\"\n    \"America/Kentucky/Louisville\"\n    \"America/Kentucky/Monticello\"\n    \"America/La_Paz\"\n    \"America/Lima\"\n    \"America/Los_Angeles\"\n    \"America/Maceio\"\n    \"America/Managua\"\n    \"America/Manaus\"\n    \"America/Martinique\"\n    \"America/Matamoros\"\n    \"America/Mazatlan\"\n    \"America/Menominee\"\n    \"America/Merida\"\n    \"America/Mexico_City\"\n    \"America/Miquelon\"\n    \"America/Moncton\"\n    \"America/Monterrey\"\n    \"America/Montevideo\"\n    \"America/Montreal\"\n    \"America/Montserrat\"\n    \"America/Nassau\"\n    \"America/New_York\"\n    \"America/Nipigon\"\n    \"America/Nome\"\n    \"America/Noronha\"\n    \"America/North_Dakota/Center\"\n    \"America/North_Dakota/New_Salem\"\n    \"America/Ojinaga\"\n    \"America/Panama\"\n    \"America/Pangnirtung\"\n    \"America/Paramaribo\"\n    \"America/Phoenix\"\n    \"America/Port-au-Prince\"\n    \"America/Port_of_Spain\"\n    \"America/Porto_Velho\"\n    \"America/Puerto_Rico\"\n    \"America/Rainy_River\"\n    \"America/Rankin_Inlet\"\n    \"America/Recife\"\n    \"America/Regina\"\n    \"America/Resolute\"\n    \"America/Rio_Branco\"\n    \"America/Santa_Isabel\"\n    \"America/Santarem\"\n    \"America/Santiago\"\n    \"America/Santo_Domingo\"\n    \"America/Sao_Paulo\"\n    \"America/Scoresbysund\"\n    \"America/St_Johns\"\n    \"America/St_Kitts\"\n    \"America/St_Lucia\"\n    \"America/St_Thomas\"\n    \"America/St_Vincent\"\n    \"America/Swift_Current\"\n    \"America/Tegucigalpa\"\n    \"America/Thule\"\n    \"America/Thunder_Bay\"\n    \"America/Tijuana\"\n    \"America/Toronto\"\n    \"America/Tortola\"\n    \"America/Vancouver\"\n    \"America/Whitehorse\"\n    \"America/Winnipeg\"\n    \"America/Yakutat\"\n    \"America/Yellowknife\"\n    \"Antarctica/Casey\"\n    \"Antarctica/Davis\"\n    \"Antarctica/DumontDUrville\"\n    \"Antarctica/Mawson\"\n    \"Antarctica/McMurdo\"\n    \"Antarctica/Palmer\"\n    \"Antarctica/Rothera\"\n    \"Antarctica/Syowa\"\n    \"Antarctica/Vostok\"\n    \"Asia/Aden\"\n    \"Asia/Almaty\"\n    \"Asia/Amman\"\n    \"Asia/Anadyr\"\n    \"Asia/Aqtau\"\n    \"Asia/Aqtobe\"\n    \"Asia/Ashgabat\"\n    \"Asia/Baghdad\"\n    \"Asia/Bahrain\"\n    \"Asia/Baku\"\n    \"Asia/Bangkok\"\n    \"Asia/Beirut\"\n    \"Asia/Bishkek\"\n    \"Asia/Brunei\"\n    \"Asia/Choibalsan\"\n    \"Asia/Chongqing\"\n    \"Asia/Colombo\"\n    \"Asia/Damascus\"\n    \"Asia/Dhaka\"\n    \"Asia/Dili\"\n    \"Asia/Dubai\"\n    \"Asia/Dushanbe\"\n    \"Asia/Gaza\"\n    \"Asia/Harbin\"\n    \"Asia/Ho_Chi_Minh\"\n    \"Asia/Hong_Kong\"\n    \"Asia/Hovd\"\n    \"Asia/Irkutsk\"\n    \"Asia/Jakarta\"\n    \"Asia/Jayapura\"\n    \"Asia/Jerusalem\"\n    \"Asia/Kabul\"\n    \"Asia/Kamchatka\"\n    \"Asia/Karachi\"\n    \"Asia/Kashgar\"\n    \"Asia/Kathmandu\"\n    \"Asia/Kolkata\"\n    \"Asia/Krasnoyarsk\"\n    \"Asia/Kuala_Lumpur\"\n    \"Asia/Kuching\"\n    \"Asia/Kuwait\"\n    \"Asia/Macau\"\n    \"Asia/Magadan\"\n    \"Asia/Makassar\"\n    \"Asia/Manila\"\n    \"Asia/Muscat\"\n    \"Asia/Nicosia\"\n    \"Asia/Novokuznetsk\"\n    \"Asia/Novosibirsk\"\n    \"Asia/Omsk\"\n    \"Asia/Oral\"\n    \"Asia/Phnom_Penh\"\n    \"Asia/Pontianak\"\n    \"Asia/Pyongyang\"\n    \"Asia/Qatar\"\n    \"Asia/Qyzylorda\"\n    \"Asia/Rangoon\"\n    \"Asia/Riyadh\"\n    \"Asia/Sakhalin\"\n    \"Asia/Samarkand\"\n    \"Asia/Seoul\"\n    \"Asia/Shanghai\"\n    \"Asia/Singapore\"\n    \"Asia/Taipei\"\n    \"Asia/Tashkent\"\n    \"Asia/Tbilisi\"\n    \"Asia/Tehran\"\n    \"Asia/Thimphu\"\n    \"Asia/Tokyo\"\n    \"Asia/Ulaanbaatar\"\n    \"Asia/Urumqi\"\n    \"Asia/Vientiane\"\n    \"Asia/Vladivostok\"\n    \"Asia/Yakutsk\"\n    \"Asia/Yekaterinburg\"\n    \"Asia/Yerevan\"\n    \"Atlantic/Azores\"\n    \"Atlantic/Bermuda\"\n    \"Atlantic/Canary\"\n    \"Atlantic/Cape_Verde\"\n    \"Atlantic/Faroe\"\n    \"Atlantic/Madeira\"\n    \"Atlantic/Reykjavik\"\n    \"Atlantic/South_Georgia\"\n    \"Atlantic/St_Helena\"\n    \"Atlantic/Stanley\"\n    \"Australia/Adelaide\"\n    \"Australia/Brisbane\"\n    \"Australia/Broken_Hill\"\n    \"Australia/Currie\"\n    \"Australia/Darwin\"\n    \"Australia/Eucla\"\n    \"Australia/Hobart\"\n    \"Australia/Lindeman\"\n    \"Australia/Lord_Howe\"\n    \"Australia/Melbourne\"\n    \"Australia/Perth\"\n    \"Australia/Sydney\"\n    \"Canada/Atlantic\"\n    \"Canada/Central\"\n    \"Canada/Eastern\"\n    \"Canada/Mountain\"\n    \"Canada/Newfoundland\"\n    \"Canada/Pacific\"\n    \"Europe/Amsterdam\"\n    \"Europe/Andorra\"\n    \"Europe/Athens\"\n    \"Europe/Belgrade\"\n    \"Europe/Berlin\"\n    \"Europe/Brussels\"\n    \"Europe/Bucharest\"\n    \"Europe/Budapest\"\n    \"Europe/Chisinau\"\n    \"Europe/Copenhagen\"\n    \"Europe/Dublin\"\n    \"Europe/Gibraltar\"\n    \"Europe/Helsinki\"\n    \"Europe/Istanbul\"\n    \"Europe/Kaliningrad\"\n    \"Europe/Kiev\"\n    \"Europe/Lisbon\"\n    \"Europe/London\"\n    \"Europe/Luxembourg\"\n    \"Europe/Madrid\"\n    \"Europe/Malta\"\n    \"Europe/Minsk\"\n    \"Europe/Monaco\"\n    \"Europe/Moscow\"\n    \"Europe/Oslo\"\n    \"Europe/Paris\"\n    \"Europe/Prague\"\n    \"Europe/Riga\"\n    \"Europe/Rome\"\n    \"Europe/Samara\"\n    \"Europe/Simferopol\"\n    \"Europe/Sofia\"\n    \"Europe/Stockholm\"\n    \"Europe/Tallinn\"\n    \"Europe/Tirane\"\n    \"Europe/Uzhgorod\"\n    \"Europe/Vaduz\"\n    \"Europe/Vienna\"\n    \"Europe/Vilnius\"\n    \"Europe/Volgograd\"\n    \"Europe/Warsaw\"\n    \"Europe/Zaporozhye\"\n    \"Europe/Zurich\"\n    \"GMT\"\n    \"Indian/Antananarivo\"\n    \"Indian/Chagos\"\n    \"Indian/Christmas\"\n    \"Indian/Cocos\"\n    \"Indian/Comoro\"\n    \"Indian/Kerguelen\"\n    \"Indian/Mahe\"\n    \"Indian/Maldives\"\n    \"Indian/Mauritius\"\n    \"Indian/Mayotte\"\n    \"Indian/Reunion\"\n    \"Pacific/Apia\"\n    \"Pacific/Auckland\"\n    \"Pacific/Chatham\"\n    \"Pacific/Easter\"\n    \"Pacific/Efate\"\n    \"Pacific/Enderbury\"\n    \"Pacific/Fakaofo\"\n    \"Pacific/Fiji\"\n    \"Pacific/Funafuti\"\n    \"Pacific/Galapagos\"\n    \"Pacific/Gambier\"\n    \"Pacific/Guadalcanal\"\n    \"Pacific/Guam\"\n    \"Pacific/Honolulu\"\n    \"Pacific/Johnston\"\n    \"Pacific/Kiritimati\"\n    \"Pacific/Kosrae\"\n    \"Pacific/Kwajalein\"\n    \"Pacific/Majuro\"\n    \"Pacific/Marquesas\"\n    \"Pacific/Midway\"\n    \"Pacific/Nauru\"\n    \"Pacific/Niue\"\n    \"Pacific/Norfolk\"\n    \"Pacific/Noumea\"\n    \"Pacific/Pago_Pago\"\n    \"Pacific/Palau\"\n    \"Pacific/Pitcairn\"\n    \"Pacific/Ponape\"\n    \"Pacific/Port_Moresby\"\n    \"Pacific/Rarotonga\"\n    \"Pacific/Saipan\"\n    \"Pacific/Tahiti\"\n    \"Pacific/Tarawa\"\n    \"Pacific/Tongatapu\"\n    \"Pacific/Truk\"\n    \"Pacific/Wake\"\n    \"Pacific/Wallis\"\n    \"US/Alaska\"\n    \"US/Arizona\"\n    \"US/Central\"\n    \"US/Eastern\"\n    \"US/Hawaii\"\n    \"US/Mountain\"\n    \"US/Pacific\"\n    \"UTC\"\n]\n","MainRouter = require 'routers/main_router'\nMainView = require 'views/main'\nInstance = require 'models/instance'\ncolorSet = require '../helpers/color-set'\n\n# Send client side errors to server\nwindow.onerror = (msg, url, line, col, error) ->\n    console.error msg, url, line, col, error, error?.stack\n    exception = error?.toString() or msg\n    if exception isnt window.lastError\n        data =\n            data:\n                type: 'error'\n                error:\n                    msg: msg\n                    name: error?.name\n                    full: exception\n                    stack: error?.stack\n                url: url\n                line: line\n                col: col\n                href: window.location.href\n        xhr = new XMLHttpRequest()\n        xhr.open 'POST', 'log', true\n        xhr.setRequestHeader \"Content-Type\", \"application/json;charset=UTF-8\"\n        xhr.send JSON.stringify(data)\n        window.lastError = exception\n\nclass exports.Application\n\n    constructor: ->\n        # initialize on DOMReady\n        $ @initialize\n\n    initialize: =>\n\n        try\n            @instance = window.cozy_instance or {}\n            @locale = @instance?.locale or 'en'\n\n            try\n                locales = require 'locales/' + @locale\n            catch err\n                locales = require 'locales/en'\n\n            window.app = @\n\n            # Translation\n            @polyglot = new Polyglot()\n            @polyglot.extend locales\n            window.t = @polyglot.t.bind @polyglot\n\n            #Date parser and format library\n            moment.locale(@locale)\n\n            # Defines the application's color set once\n            ColorHash.addScheme 'cozy', colorSet\n\n            # Build main view and main router.\n            @routers = {}\n            @mainView =  new MainView()\n            @routers.main = new MainRouter()\n            Backbone.history.start()\n\n            # Configure realtime (to show automatic update of applications).\n            SocketListener = require 'lib/socket_listener'\n            SocketListener.socket.on 'installerror', (err) ->\n                console.log \"An error occured while attempting to install app\"\n                console.log err\n\n        # Send client side errors to server\n        catch e\n            console.error e, e?.stack\n            exception = e.toString()\n            if exception isnt window.lastError\n                # Send client side errors to server\n                data =\n                    data:\n                        type: 'error'\n                        error:\n                            msg: e.message\n                            name: e?.name\n                            full: exception\n                            stack: e?.stack\n                        file: e?.fileName\n                        line: e?.lineNumber\n                        col: e?.columnNumber\n                        href: window.location.href\n                xhr = new XMLHttpRequest()\n                xhr.open 'POST', 'log', true\n                xhr.setRequestHeader \"Content-Type\",\n                    \"application/json;charset=UTF-8\"\n                xhr.send JSON.stringify(data)\n                window.lastError = exception\n\nnew exports.Application\n","# Base class to share common methods between collections.\nmodule.exports = class BaseCollection  extends Backbone.Collection\n\n    # Select which field from backend response to use for parsing to populate\n    # collection.\n    parse: (response) ->\n        response.rows\n","# Base class that contains commomn methods for models.\nclass exports.BaseModel extends Backbone.Model\n\n  isNew: () ->\n    @id is undefined\n","module.exports = class BaseView extends Backbone.View\n    tagName: 'section'\n\n    template: ->\n\n    initialize: ->\n        @render()\n        super()\n\n    getRenderData: ->\n        if @model? and @model.toJSON?\n            model: @model.toJSON()\n\n    render: ->\n        # console.debug \"Rendering #{@constructor.name}\", @\n        @beforeRender()\n        @$el.html @template(@getRenderData())\n        @afterRender()\n        @\n\n    beforeRender: ->\n\n    afterRender: ->\n\n    destroy: ->\n        @undelegateEvents()\n        @$el.removeData().unbind()\n        @remove()\n        Backbone.View::remove.call @\n","# Make ajax request more easy to do.\nexports.request = (type, url, data, callback) ->\n    $.ajax\n        type: type\n        url: url\n        data: if data? then JSON.stringify data else null\n        contentType: \"application/json\"\n        dataType: \"json\"\n        success: (data) ->\n            callback null, data if callback?\n        error: (data) ->\n            if data.status in [200, 201, 204, 304]\n                callback null, data if callback?\n            else if data? and data.msg? and callback?\n                callback new Error data.msg\n            else if callback?\n                callback new Error \"Server error occured\"\n\n# Sends a get request with data as body\n# Expected callbacks: success and error\nexports.get = (url, callbacks) ->\n    exports.request \"GET\", url, null, callbacks\n\n# Sends a post request with data as body\n# Expected callbacks: success and error\nexports.post = (url, data, callbacks) ->\n    exports.request \"POST\", url, data, callbacks\n\n# Sends a put request with data as body\n# Expected callbacks: success and error\nexports.put = (url, data, callbacks) ->\n    exports.request \"PUT\", url, data, callbacks\n\n# Sends a delete request with data as body\n# Expected callbacks: success and error\nexports.del = (url, callbacks) ->\n    exports.request \"DELETE\", url, null, callbacks\n","ObjectPicker = require 'views/object_picker'\n\nmodule.exports = class IntentManager\n\n\n    registerIframe : (iframe, remoteOrigin)->\n        talker = new Talker(iframe.contentWindow, remoteOrigin)\n        talker.onMessage = @handleIntent\n\n\n    handleIntent : (message) =>\n        intent = message.data\n        switch intent.type\n\n            when 'goto'\n                window.app.routers.main.navigate \"apps/#{intent.params}\", true\n\n            when 'pickObject'\n                switch intent.params.objectType\n                    when 'singlePhoto'\n                        if intent.params.isCropped\n                            new ObjectPicker(intent.params , (newPhotoChosen, dataUrl) ->\n                                message.respond(\n                                    newPhotoChosen :newPhotoChosen\n                                    dataUrl        :dataUrl\n                                )\n                            )\n                        else\n                            new ObjectPicker(intent.params , (newPhotoChosen, dataUrl) ->\n                                message.respond(\n                                    newPhotoChosen :newPhotoChosen\n                                    dataUrl        :dataUrl\n                                )\n                            )\n            # usefull to check from the client (app) that the home is there and\n            # has the intent manager available\n            when 'ping'\n                message.respond('pong')\n\n\n\n","request = require('lib/request')\nexports.get = (url, callback) ->\n    request.request('get', 'api/proxy', url, callback)","# Make ajax request easier to write.\n\n# Expected callbacks: success and error\nexports.request = (type, url, data, callback) ->\n    body = if data? then JSON.stringify data else null\n\n    fired = false\n    req = $.ajax\n        type: type\n        url: url\n        data: body\n        contentType: \"application/json\"\n        dataType: \"json\"\n        success: (data) ->\n            fired = true\n            callback null, data if callback?\n        error: (data) ->\n            fired = true\n            if data?\n                data = JSON.parse data.responseText\n                if data.msg? and callback?\n                    callback new Error data.msg, data\n                else if data.error? and callback?\n                    data.msg = data.error\n                    callback new Error data.msg, data\n            else if callback?\n                callback new Error \"Server error occured\", data\n    req.always ->\n        unless fired\n            callback new Error \"Server error occured\", data\n\n# Sends a get request with data as body\n# Expected callbacks: success and error\nexports.get = (url, callback) ->\n    exports.request \"GET\", url, null, callback\n\n# Sends a post request with data as body\n# Expected callbacks: success and error\nexports.post = (url, data, callback) ->\n    exports.request \"POST\", url, data, callback\n\n# Sends a put request with data as body\n# Expected callbacks: success and error\nexports.put = (url, data, callback) ->\n    exports.request \"PUT\", url, data, callback\n\n# Sends a delete request with data as body\n# Expected callbacks: success and error\nexports.del = (url, callback) ->\n    exports.request \"DELETE\", url, null, callback\n","Application  = require 'models/application'\nNotification = require 'models/notification'\nDevice = require 'models/device'\n\napplication_idx  = 0\nnotification_idx = 1\ndevice_idx = 2\n\nclass SocketListener extends CozySocketListener\n\n\n    models:\n        'notification': Notification\n        'device': Device\n        'application' : Application\n\n    events: [\n        'notification.create', 'notification.update', 'notification.delete',\n        'device.create', 'device.update', 'device.delete',\n        'application.create', 'application.update', 'application.delete'\n    ]\n\n    onRemoteCreate: (model) ->\n        if model instanceof Application\n            @collections[application_idx].add model\n        else if model instanceof Notification\n            @collections[notification_idx].add model\n        else if model instanceof Device\n            @collections[device_idx].add model\n\n    onRemoteDelete: (model) ->\n        if model instanceof Application\n            @collections[application_idx].remove model\n        else if model instanceof Notification\n            @collections[notification_idx].remove model\n        else if model instanceof Device\n            @collections[device_idx].remove model\n\n\nmodule.exports = new SocketListener()\n","BaseView = require 'lib/base_view'\n\n# View that display a collection of subitems\n# used to DRY views\n# Usage : new ViewCollection(collection:collection)\n# Automatically populate itself by creating a itemView for each item\n# in its collection\n\n# can use a template that will be displayed alongside the itemViews\n\n# itemView       : the Backbone.View to be used for items\n# itemViewOptions : the options that will be passed to itemViews\n\nmodule.exports = class ViewCollection extends BaseView\n\n    views: {}\n\n    itemView: null\n    itemViewOptions: ->\n\n\n    # add 'empty' class to view when there is no subview\n    checkIfEmpty: ->\n        @$el.toggleClass 'empty', _.size(@views) is 0\n\n    # can be overriden if we want to place the subviews somewhere else\n    appendView: (view) ->\n        @$el.append view.el\n\n    # can be overriden if we need to do something else\n    removeView: (view) ->\n        view.remove()\n\n    # bind listeners to the collection\n    initialize: ->\n        super\n        @views = {}\n        @listenTo @collection, \"reset\",   @onReset\n        @listenTo @collection, \"add\",     @addItem\n        @listenTo @collection, \"remove\",  @removeItem\n        @onReset @collection\n\n    # if we have views before a render call, we detach them\n    render: ->\n        view.$el.detach() for id, view of @views\n        super\n\n    # after render, we reattach the views\n    afterRender: ->\n        @appendView view for id, view of @views\n        @checkIfEmpty @views\n\n    # destroy all sub views before remove\n    remove: ->\n        @onReset []\n        super\n\n    # event listener for reset\n    onReset: (newcollection) ->\n        @removeView view for id, view of @views\n        @views = []\n        @checkIfEmpty @views\n        newcollection.forEach @addItem\n\n    # event listeners for add\n    addItem: (model) =>\n        options = _.extend {}, {model: model}, @itemViewOptions(model)\n        view = new @itemView(options)\n        @views[model.cid] = view.render()\n        @appendView view\n        @checkIfEmpty @views\n\n    # event listeners for remove\n    removeItem: (model) =>\n        @removeView @views[model.cid]\n        delete @views[model.cid]\n        @checkIfEmpty @views\n","client = require \"../helpers/client\"\n\n# Describes an application installed in mycloud.\nmodule.exports = class Application extends Backbone.Model\n\n    idAttribute: 'slug'\n\n    url: ->\n        base = \"/api/applications/\"\n        return \"#{base}byid/#{@get('id')}\" if @get('id')\n        return base\n\n    isIconSvg: ->\n        iconType = @get 'iconType'\n        if iconType\n            return iconType is 'svg'\n        else\n            icon = @get 'icon'\n            return icon?.indexOf '.svg'\n\n    isRunning: -> @get('state') is 'installed'\n    isBroken: -> @get('state') is 'broken'\n\n    # use same events as backbone to enable socket-listener\n    prepareCallbacks: (callbacks, presuccess, preerror) ->\n        {success, error} = callbacks or {}\n        presuccess ?= (data) => @set data.app\n        @trigger 'request', @, null, callbacks\n        callbacks.success = (data) =>\n            presuccess data if presuccess\n            @trigger 'sync', @, null, callbacks\n            success data    if success\n        callbacks.error = (jqXHR) =>\n            preerror jqXHR if preerror\n            @trigger 'error', @, jqXHR, {}\n            error jqXHR     if error\n\n\n    # Send to server installation request.\n    # Will create a new app in the database.\n    install: (callbacks) ->\n        @prepareCallbacks callbacks\n        params = @attributes\n        delete params.id\n        client.post '/api/applications/install', params, callbacks\n\n    # Send to server uninstallation request.\n    # Will delete the app in the database.\n    uninstall: (callbacks) =>\n        @prepareCallbacks callbacks, => @trigger 'destroy', @, @collection, {}\n        client.del \"/api/applications/#{@id}/uninstall\", callbacks\n\n    # Send to server an update request.\n    updateApp: (callbacks) ->\n        if @get('state') isnt 'broken'\n            @prepareCallbacks callbacks\n            client.put \"/api/applications/#{@id}/update\", {}, callbacks\n        else\n            client.del \"/api/applications/#{@id}/uninstall\",\n                success: =>\n                    @install callbacks\n                error: callbacks.error\n\n    # Send to server a start request\n    start: (callbacks) ->\n        return null if @isRunning()\n        @prepareCallbacks callbacks\n        client.post \"/api/applications/#{@id}/start\", {}, callbacks\n\n    # Send to server a stop request.\n    stop: (callbacks) ->\n        return null unless @isRunning()\n        @prepareCallbacks callbacks\n        client.post \"/api/applications/#{@id}/stop\", {}, callbacks\n\n    # Get application permission\n    getPermissions: (callbacks) ->\n        @prepareCallbacks callbacks\n        client.post \"/api/applications/getPermissions\", @toJSON(), callbacks\n\n    # Get application description\n    getDescription: (callbacks) ->\n        @prepareCallbacks callbacks\n        client.post \"/api/applications/getDescription\", @toJSON(), callbacks\n\n    # Get application's metadata\n    getMetaData: (callbacks) ->\n        @prepareCallbacks callbacks\n        client.post \"/api/applications/getMetaData\", @toJSON(), callbacks\n\n    # In which of the home section does this application go\n    # returns one of 'other', 'official', 'leave'\n    getSection: ->\n        section = 'misc'\n        name = @get 'slug'\n        favorite = @get 'favorite'\n\n        if favorite\n            section = 'favorite'\n        else if name in ['calendar', 'contacts', 'emails', 'files', 'photos']\n            section = 'main'\n        else if name in ['blog', 'feeds', 'bookmarks', 'quickmarks', 'zero-feeds']\n            section = 'watch'\n        else if name in [\n            'kresus', 'konnectors', 'kyou', 'databrowser', 'import-from-google'\n        ]\n            section = 'data'\n        else if name in ['todos', 'notes', 'tasky']\n            section = 'productivity'\n        else if name in ['sync']\n            section = 'platform'\n\n        return section\n\n    updateAll: (callbacks) ->\n        @prepareCallbacks callbacks\n        client.put \"/api/applications/update/all\", {}, callbacks\n\n","{BaseModel} = require 'lib/base_model'\n\n# Describes a background selectable in account section.\nmodule.exports = class Background extends BaseModel\n    urlRoot: '/api/backgrounds/'\n\n\n    # Get path to the background image (handle predefined background and\n    # background added by the user).\n    getSrc: ->\n        id = @get 'id'\n        if id.indexOf('background') > -1\n            id = id.replace '-', '_'\n            return \"/img/backgrounds/#{id}.jpg\"\n        else\n            return \"/api/backgrounds/#{id}/picture.jpg\"\n\n\n    # Get path to the background image thumbnail (handle predefined background\n    # and background added by the user).\n    getThumbSrc: ->\n        id = @get 'id'\n        if id.indexOf('background') > -1\n            id = id.replace '-', '_'\n            return \"/img/backgrounds/#{id}_th.png\"\n        else\n            return \"/api/backgrounds/#{id}/thumb.jpg\"\n\n\n","{BaseModel} = require 'lib/base_model'\n\n# Describes a device installed in mycloud.\nmodule.exports = class Device extends Backbone.Model\n\n    urlRoot: 'api/devices/'\n","request = require 'lib/request'\n\n\n# Model to describe instance options required at home startup like locale,\n# background, etc.\nmodule.exports = class Instance extends Backbone.Model\n\n    saveData: (data, callback) ->\n        @set data\n        request.post \"api/instance\", data, callback\n\n","{BaseModel} = require 'lib/base_model'\n\n# Describes a notification\nmodule.exports = class Notification extends BaseModel\n\n    urlRoot: 'api/notifications'\n","client = require('../lib/client')\n\n# A photo\n# maintains attributes src / thumbsrc depending of the state of the model\nmodule.exports = class Photo extends Backbone.Model\n\n    defaults: ()->\n        thumbsrc: 'img/loading.gif'\n        src: ''\n        orientation: 1\n\n    url: ()->\n        super + app.urlKey\n\n    # build img src attributes from id.\n    parse: (attrs) ->\n        if not attrs.id then attrs\n        else _.extend attrs,\n            thumbsrc: \"photos/thumbs/#{attrs.id}.jpg\" + app.urlKey\n            src: \"photos/#{attrs.id}.jpg\" + app.urlKey\n            orientation: attrs.orientation\n\n    # Return screen size photo src built from id.\n    getPrevSrc: ()->\n        \"photos/#{@get 'id'}.jpg\"\n\nPhoto.getMonthdistribution = (callback)->\n    client.get \"files/photo/monthdistribution\", callback\n\nPhoto.listFromFiles = (skip, limit, callback)->\n    client.get \"files/photo/range/#{skip}/#{limit}\", callback\n\n\nPhoto.makeFromFile = (fileid, attr, callback) ->\n    client.post \"files/#{fileid}/toPhoto\", attr, callback","client = require \"../helpers/client\"\n\n# Describes a stack application.\nmodule.exports = class StackApplication extends Backbone.Model\n\n    idAttribute: 'name'\n\n    url: ->\n        base = \"/api/applications/stack\"\n        return \"#{base}byid/#{@get('id')}\" if @get('id')\n        return base\n\n    # use same events as backbone to enable socket-listener\n    prepareCallbacks: (callbacks, presuccess, preerror) ->\n        {success, error} = callbacks or {}\n        presuccess ?= (data) => @set data.app\n        @trigger 'request', @, null, callbacks\n        callbacks.success = (data) =>\n            presuccess data if presuccess\n            @trigger 'sync', @, null, callbacks\n            success data    if success\n        callbacks.error = (jqXHR) =>\n            preerror jqXHR if preerror\n            @trigger 'error', @, jqXHR, {}\n            error jqXHR     if error\n\n\n    waitReboot: (step, total_step, callbacks) ->\n        {success, error} = callbacks or {}\n        client.get \"api/applications/stack\",\n            success: =>\n                if step is total_step\n                    if success?\n                        success 'ok'\n                    else\n                        callbacks() if callbacks\n                else\n                    if step is 1\n                        step += step\n                    setTimeout () =>\n                        @waitReboot step, total_step, callbacks\n                    , 500\n            error: =>\n                setTimeout () =>\n                    if step is 0 or step is 2\n                        step = step + 1\n                    @waitReboot step, total_step, callbacks\n                , 500\n\n    updateStack: (callbacks) ->\n        client.put \"/api/applications/update/stack\", {},\n            success: =>\n                @waitReboot 0, 2, callbacks\n            error: =>\n                @waitReboot 0, 2, callbacks\n\n    rebootStack: (callbacks) ->\n        client.put \"/api/applications/reboot/stack\", {},\n            success: =>\n                @waitReboot 0, 1, callbacks\n            error: =>\n                @waitReboot 0, 1, callbacks","{BaseModel} = require 'lib/base_model'\nclient = require 'helpers/client'\n\n# Describes an application installed in mycloud.\nmodule.exports = class User extends BaseModel\n\n    constructor: (@email, @password) ->\n        super()\n   \n    logout: (callbacks) ->\n        client.get \"logout/\", callbacks\n","ObjectPickerCroper = require '../views/object_picker'\n\nmodule.exports = class MainRouter extends Backbone.Router\n\n    routes :\n        \"home\"                : \"applicationList\"\n        \"customize\"           : \"applicationListEdit\"\n        \"applications\"        : \"market\"\n        \"config-applications\" : \"configApplications\"\n        \"account\"             : \"account\"\n        \"help\"                : \"help\"\n        \"logout\"              : \"logout\"\n        \"update/:slug\"        : \"updateApp\"\n        \"update-stack\"        : \"updateStack\"\n        \"apps/:slug\"          : \"application\"\n        \"apps/:slug/*hash\"    : \"application\"\n        \"*path\"               : \"applicationList\"\n        '*notFound'           : 'applicationList'\n\n    initialize: ->\n\n        # Wait for applications to send intents. Intents are sent trough\n        # messages. Messages between app and home are possible only when the\n        # app is displayed with the home top bar.\n        window.addEventListener 'message', (event) =>\n\n            return false unless event.origin is window.location.origin\n\n            intent = event.data\n            switch intent.action\n                when 'goto'\n                    @navigate \"apps/#{intent.params}\", true\n                when undefined\n                    intentType = 'application/x-talkerjs-v1+json'\n                    if JSON.parse(intent).type isnt  intentType\n                        console.log \"Weird intent, cannot handle it.\", intent\n                else\n                    console.log \"Weird intent, cannot handle it.\", intent\n\n\n    ## Route behaviors\n\n    applicationList: ->\n        app.mainView.displayApplicationsList()\n\n    configApplications: ->\n        app.mainView.displayConfigApplications()\n\n    updateApp: (slug) ->\n        app.mainView.displayUpdateApplication slug\n\n    updateStack: ->\n        app.mainView.displayUpdateStack()\n\n    help: ->\n        app.mainView.displayHelp()\n\n    market: ->\n        app.mainView.displayMarket()\n\n    account: ->\n        app.mainView.displayAccount()\n\n    application: (slug, hash) ->\n        app.mainView.displayApplication slug, hash\n\n    logout: ->\n        app.mainView.logout()\n\n","module.exports = function anonymous(locals, attrs, escape, rethrow, merge) {\nattrs = attrs || jade.attrs; escape = escape || jade.escape; rethrow = rethrow || jade.rethrow; merge = merge || jade.merge;\nvar buf = [];\nwith (locals || {}) {\nvar interp;\nbuf.push('<div id=\"account-form\" class=\"lightgrey pa2\"><div class=\"line\"><div class=\"mod left w50 pa2 personalisation\"><h4>');\nvar __val__ = t('account personalization')\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</h4><p><p>');\nvar __val__ = t('account background selection')\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</p><div class=\"background-list line mb1\"></div><button id=\"background-add-button\" class=\"btn w100\">');\nvar __val__ = t('account background add')\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</button></p></div><div class=\"mod left w50 pa2\"><h4>');\nvar __val__ = t('account identifiers')\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</h4><div class=\"input\"><p>');\nvar __val__ = t('alerts and password recovery email')\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</p><p class=\"account-field\"><input id=\"account-email-field\"/><button class=\"btn\">');\nvar __val__ = t('save')\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</button></p><p class=\"error email hide\"></p></div><div class=\"input\"><p>');\nvar __val__ = t('public name description')\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</p><p class=\"account-field\"><input id=\"account-public-name-field\"/><button class=\"btn\">');\nvar __val__ = t('save')\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</button></p><p class=\"error public-name hide\"></p></div><div class=\"input\"><p>');\nvar __val__ = t('domain name for urls and email')\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</p><p class=\"account-field\"><input id=\"account-domain-field\"/><button class=\"btn\">');\nvar __val__ = t('save')\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</button></p><p class=\"error domain hide\"></p></div><h4>');\nvar __val__ = t('account localization')\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</h4><div class=\"input\"><p>');\nvar __val__ = t('your timezone is required')\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</p><p class=\"account-field\"><select id=\"account-timezone-field\"></select><button class=\"btn\">');\nvar __val__ = t('save')\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</button></p></div><div class=\"input\"><p>');\nvar __val__ = t('Chose the language you want I use to speak with you:')\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</p><p class=\"account-field\"><select id=\"account-locale-field\"><option value=\"fr\">');\nvar __val__ = t('french')\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</option><option value=\"en\">');\nvar __val__ = t('english')\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</option><option value=\"de\">');\nvar __val__ = t('german')\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</option><option value=\"es\">');\nvar __val__ = t('spanish')\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</option></select><button class=\"btn\">');\nvar __val__ = t('save')\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</button></p></div><h4>');\nvar __val__ = t('account password')\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</h4><div id=\"change-password-form\"><p><label>');\nvar __val__ = t('input your current password')\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</label></p><input');\nbuf.push(attrs({ 'id':('account-password0-field'), 'type':(\"password\"), 'placeholder':(\"\" + (t('current password')) + \"\") }, {\"type\":true,\"placeholder\":true}));\nbuf.push('/><p><label>');\nvar __val__ = t('enter a new password')\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</label></p><input');\nbuf.push(attrs({ 'id':('account-password1-field'), 'type':(\"password\"), 'placeholder':(\"\" + (t('new password')) + \"\") }, {\"type\":true,\"placeholder\":true}));\nbuf.push('/><p><label>');\nvar __val__ = t('confirm new password')\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</label></p><input');\nbuf.push(attrs({ 'id':('account-password2-field'), 'type':(\"password\"), 'placeholder':(\"\" + (t('new password')) + \"\") }, {\"type\":true,\"placeholder\":true}));\nbuf.push('/><p><button id=\"account-form-button\" class=\"btn\">');\nvar __val__ = t('save your new password')\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</button><p class=\"loading-indicator\">&nbsp;</p><div id=\"account-info\" class=\"alert main-alert alert-success hide\"><div id=\"account-info-text\">');\nvar __val__ = t('account change password success')\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</div></div><div id=\"account-error\" class=\"alert alert-error main-alert hide\"><div id=\"account-form-error-text\">');\nvar __val__ = t('account change password error')\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</div></div></p></div></div></div></div>');\n}\nreturn buf.join(\"\");\n};","module.exports = function anonymous(locals, attrs, escape, rethrow, merge) {\nattrs = attrs || jade.attrs; escape = escape || jade.escape; rethrow = rethrow || jade.rethrow; merge = merge || jade.merge;\nvar buf = [];\nwith (locals || {}) {\nvar interp;\nbuf.push('<div class=\"albumLabel\"><img class=\"cover\"/><div class=\"label\"></div></div>');\n}\nreturn buf.join(\"\");\n};","module.exports = function anonymous(locals, attrs, escape, rethrow, merge) {\nattrs = attrs || jade.attrs; escape = escape || jade.escape; rethrow = rethrow || jade.rethrow; merge = merge || jade.merge;\nvar buf = [];\nwith (locals || {}) {\nvar interp;\nbuf.push('<iframe');\nbuf.push(attrs({ 'src':(\"apps/\" + (id) + \"/\" + (hash) + \"\"), 'id':(\"\" + (id) + \"-frame\") }, {\"src\":true,\"id\":true}));\nbuf.push('></iframe>');\n}\nreturn buf.join(\"\");\n};","module.exports = function anonymous(locals, attrs, escape, rethrow, merge) {\nattrs = attrs || jade.attrs; escape = escape || jade.escape; rethrow = rethrow || jade.rethrow; merge = merge || jade.merge;\nvar buf = [];\nwith (locals || {}) {\nvar interp;\n}\nreturn buf.join(\"\");\n};","module.exports = function anonymous(locals, attrs, escape, rethrow, merge) {\nattrs = attrs || jade.attrs; escape = escape || jade.escape; rethrow = rethrow || jade.rethrow; merge = merge || jade.merge;\nvar buf = [];\nwith (locals || {}) {\nvar interp;\nbuf.push('<button class=\"delete-background-button btn right ma1\"><i class=\"fa fa-trash\"></i></button><img');\nbuf.push(attrs({ 'src':(\"\" + (model.src) + \"\"), \"class\": ('w100') + ' ' + ('left') }, {\"src\":true}));\nbuf.push('/>');\n}\nreturn buf.join(\"\");\n};","module.exports = function anonymous(locals, attrs, escape, rethrow, merge) {\nattrs = attrs || jade.attrs; escape = escape || jade.escape; rethrow = rethrow || jade.rethrow; merge = merge || jade.merge;\nvar buf = [];\nwith (locals || {}) {\nvar interp;\nbuf.push('<div class=\"line\"><div class=\"left mod w66\"><div class=\"line\"><span class=\"favorite mr1\">');\nif ( app.favorite)\n{\nbuf.push('<i title=\"config application unmark favorite\" class=\"fa fa-star\"></i>');\n}\nelse\n{\nbuf.push('<i title=\"config application mark favorite\" class=\"fa fa-star-o\"></i>');\n}\nbuf.push('</span><strong><a');\nbuf.push(attrs({ 'href':(\"#apps/\" + (app.name) + \"\") }, {\"href\":true}));\nbuf.push('>');\nvar __val__ = app.displayName\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</a></strong>');\nif ( app.version)\n{\nbuf.push('<span>&nbsp;-&nbsp; ' + escape((interp = app.version) == null ? '' : interp) + '</span>');\n}\nbuf.push('<span>&nbsp;-&nbsp;</span>');\nif ( app.state === 'installed')\n{\nbuf.push('<span class=\"state-label\">');\nvar __val__ = t('running')\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</span>');\n}\nelse\n{\nbuf.push('<span class=\"state-label\">' + escape((interp = app.state) == null ? '' : interp) + '</span>');\n}\nbuf.push('</div><div class=\"line\">');\nif ( app.needsUpdate)\n{\nbuf.push('<span class=\"to-update-label\">');\nvar __val__ = t('update required')\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</span>');\n}\nbuf.push('</div><div class=\"line\"><div class=\"comments\"><a');\nbuf.push(attrs({ 'href':(\"\" + (app.website) + \"\"), 'target':(\"_blank\") }, {\"href\":true,\"target\":true}));\nbuf.push('>');\nvar __val__ = app.website\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</a></div><div class=\"comments\"><a>' + escape((interp = app.branch) == null ? '' : interp) + '</a></div></div></div><div class=\"buttons left mod w33\"><div><button class=\"btn update-app\"><i class=\"fa fa-refresh mr1\"></i> <span class=\"label\">');\nvar __val__ = t('update')\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</span></button></div><div><button class=\"btn remove-app\"><i class=\"fa fa-trash mr1\"></i> <span class=\"label\">');\nvar __val__ = t('remove')\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</span></button></div><div><button class=\"btn btn-large start-stop-btn\"><i class=\"fa fa-power-off mr1\"></i> <span class=\"label\">');\nvar __val__ = t('stop this app')\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</span></button></div><div><a');\nbuf.push(attrs({ 'href':(\"/logs/\" + (app.slug) + \"\"), 'target':(\"_blank\"), \"class\": ('btn') + ' ' + ('btn-large') }, {\"href\":true,\"target\":true}));\nbuf.push('><i class=\"fa fa-cog mr1\"></i> <span class=\"label\">');\nvar __val__ = t('show logs')\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</span></a></div></div></div>');\n}\nreturn buf.join(\"\");\n};","module.exports = function anonymous(locals, attrs, escape, rethrow, merge) {\nattrs = attrs || jade.attrs; escape = escape || jade.escape; rethrow = rethrow || jade.rethrow; merge = merge || jade.merge;\nvar buf = [];\nwith (locals || {}) {\nvar interp;\n}\nreturn buf.join(\"\");\n};","module.exports = function anonymous(locals, attrs, escape, rethrow, merge) {\nattrs = attrs || jade.attrs; escape = escape || jade.escape; rethrow = rethrow || jade.rethrow; merge = merge || jade.merge;\nvar buf = [];\nwith (locals || {}) {\nvar interp;\nbuf.push('<div class=\"md-overlay\"></div><div class=\"line platform-section\"><div class=\"mod left w50\"><h4>');\nvar __val__ = t('hardware consumption')\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</h4><div class=\"line\"><div class=\"disk-space mt2 left w50 mod\"><div class=\"line\"><img src=\"img/hard-drive.png\"/></div><div class=\"line\"><span class=\"amount\">0</span> / <span class=\"total\">0</span> ' + escape((interp = t('hard drive gigabytes')) == null ? '' : interp) + '</div></div><div class=\"memory-free mt2 left w50 mod\"><div class=\"line\"><img src=\"img/ram.png\"/></div><div class=\"line\"><span class=\"amount\">0</span> / <span class=\"total\">0</span> ' + escape((interp = t('memory megabytes')) == null ? '' : interp) + '</div></div></div><h4>');\nvar __val__ = t('cozy platform')\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</h4><div class=\"stack-app mt2 line\"><div class=\"mod w66 left\"><div class=\"line\"><span class=\"app\">Data System: </span><span class=\"data-system\">--</span></div><div class=\"line\"><span class=\"app\">Proxy: </span><span class=\"proxy\">--</span></div><div class=\"line\"><span class=\"app\">Home: </span><span class=\"home\">--</span></div><div class=\"line\"><span class=\"app\">Controller: </span><span class=\"controller\">--</span></div><div class=\"line\"><span class=\"refresh\">');\nvar __val__ = t('reboot stack waiting message')\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</span></div></div><div class=\"mod buttons w33 right\"><button class=\"btn update-stack\"><i class=\"fa fa-refresh mr1\"></i><span>');\nvar __val__ = t('update stack')\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</span></button><button class=\"btn update-all\"><i class=\"fa fa-refresh mr1\"></i><span>');\nvar __val__ = t('update all')\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</span></button><button class=\"btn reboot-stack\"><i class=\"fa fa-power-off mr1\"></i><span>');\nvar __val__ = t('reboot stack')\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</span></button><a href=\"/logs/home\" target=\"_blank\" class=\"btn btn-large\"><i class=\"fa fa-cog mr1\"></i> <span>');\nvar __val__ = t('show home logs')\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</span></a><a href=\"/logs/data-system\" target=\"_blank\" class=\"btn btn-large\"><i class=\"fa fa-cog mr1\"></i> <span>');\nvar __val__ = t('show data system logs')\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</span></a><a href=\"/logs/proxy\" target=\"_blank\" class=\"btn btn-large\"><i class=\"fa fa-cog mr1\"></i> <span>');\nvar __val__ = t('show proxy logs')\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</span></a></div></div><h4 class=\"title-device h4 mb3\">');\nvar __val__ = t('manage your devices')\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</h4></div><div class=\"mod left w50\"><h4 class=\"title-app h4 mb3\">');\nvar __val__ = t('manage your applications')\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</h4></div></div>');\n}\nreturn buf.join(\"\");\n};","module.exports = function anonymous(locals, attrs, escape, rethrow, merge) {\nattrs = attrs || jade.attrs; escape = escape || jade.escape; rethrow = rethrow || jade.rethrow; merge = merge || jade.merge;\nvar buf = [];\nwith (locals || {}) {\nvar interp;\nbuf.push('<div class=\"clearfix\"><div class=\"mod\"><strong>' + escape((interp = device.login) == null ? '' : interp) + '</strong></div><div class=\"buttons right w33\"><button class=\"remove-device btn w100\"><i class=\"fa fa-trash mr1\"></i> <span class=\"label\">');\nvar __val__ = t('revoke device access')\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</span></button></div></div>');\n}\nreturn buf.join(\"\");\n};","module.exports = function anonymous(locals, attrs, escape, rethrow, merge) {\nattrs = attrs || jade.attrs; escape = escape || jade.escape; rethrow = rethrow || jade.rethrow; merge = merge || jade.merge;\nvar buf = [];\nwith (locals || {}) {\nvar interp;\n}\nreturn buf.join(\"\");\n};","module.exports = function anonymous(locals, attrs, escape, rethrow, merge) {\nattrs = attrs || jade.attrs; escape = escape || jade.escape; rethrow = rethrow || jade.rethrow; merge = merge || jade.merge;\nvar buf = [];\nwith (locals || {}) {\nvar interp;\nbuf.push('<div class=\"md-content\"><div class=\"md-header clearfix\"><div class=\"line\"><h3 class=\"left\">');\nvar __val__ = t('app broken title')\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</h3></div></div><div class=\"md-body\"><strong>' + escape((interp = t('app broken')) == null ? '' : interp) + '</strong><a href=\"#config-applications\">' + escape((interp =  t('reinstall broken app')) == null ? '' : interp) + '</a><br/><span>' + escape((interp = t('app msg')) == null ? '' : interp) + '</span><br/><br/><span>' + escape((interp = errortype) == null ? '' : interp) + '</span><br/><br/><button id=\"more\" class=\"btn\">');\nvar __val__ = t('more details')\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</button><br/><br/><p class=\"details\">');\nvar __val__ = details\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</p></div><div class=\"md-footer clearfix\"><button id=\"ok\" class=\"btn right\">');\nvar __val__ = t('ok')\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</button></div></div>');\n}\nreturn buf.join(\"\");\n};","module.exports = function anonymous(locals, attrs, escape, rethrow, merge) {\nattrs = attrs || jade.attrs; escape = escape || jade.escape; rethrow = rethrow || jade.rethrow; merge = merge || jade.merge;\nvar buf = [];\nwith (locals || {}) {\nvar interp;\nbuf.push('<div class=\"line lightgrey help-section\"><div class=\"mod w50 left pa2\"><img src=\"img/contribute.jpg\" class=\"cover\"/><h4>');\nvar __val__ = t('help community title')\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</h4><div class=\"line\"><p class=\"help-text\">');\nvar __val__ = t('Register and post on our forum: ') + \" \"\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</p><P class=\"help-text\"><a href=\"https://forum.cozy.io\">forum.cozy.io</a></P><p class=\"help-text mt2\">');\nvar __val__ = t('Chat with us on IRC:') + \" \"\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</p><P class=\"help-text\"><a href=\"https://webchat.freenode.net/?channels=cozycloud\">#cozycloud (irc.freenode.net)</a></P><p class=\"help-text mt2\">');\nvar __val__ = t('help wiki title') + \" \"\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</p><P class=\"help-text\"><a href=\"https://github.com/cozy/cozy-setup/wiki\">github.com/cozy/cozy-setup/wiki</a></P></div></div><div class=\"mod w50 left pa2\"><div style=\"text-align: right;\"><a href=\"http://cozy.io\" target=\"_blank\"><img src=\"img/logo-brand.png\" class=\"w350\"/></a></div><h4>');\nvar __val__ = t('help support title')\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</h4><p class=\"help-text mt2\">');\nvar __val__ = t('help send message explanation')\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</p><textarea id=\"send-message-textarea\" class=\"mt2 w100 h400\"></textarea><p class=\"help-logs\"><input id=\"send-message-logs\" type=\"checkbox\" checked=\"checked\"/><label for=\"send-message-logs\">');\nvar __val__ = t('help send logs')\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</label></p><button id=\"send-message-button\" class=\"btn w100\">');\nvar __val__ = t('help send message action')\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</button><div id=\"send-message-error\" class=\"alert main-alert alert-error w100\">');\nvar __val__ = t('send message error')\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</div><div id=\"send-message-success\" class=\"alert main-alert alert-success w100\">');\nvar __val__ = t('send message success')\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</div><br/><br/><div class=\"line\"><p class=\"help-text mt2\">');\nvar __val__ = t('Write an email to our support team at:')\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</p><P class=\"help-text\"><a href=\"mailto:support@cozycloud.cc\">support@cozycloud.cc</a></P><p class=\"help-text mt2\">');\nvar __val__ = t('Ask your question on Twitter: ') + \" \"\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</p><P class=\"help-text\"><a href=\"https://twitter.com/mycozycloud\">@mycozycloud</a></P></div><h4>');\nvar __val__ = t('help documentation title')\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</h4><div class=\"line\"><p class=\"help-text mt2\">');\nvar __val__ = t('Visit the project website and learn to build your app:')\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</p><P class=\"help-text\"><a href=\"https://cozy.io\">cozy.io</a></P></div></div><div class=\"clearfix\"></div></div>');\n}\nreturn buf.join(\"\");\n};","module.exports = function anonymous(locals, attrs, escape, rethrow, merge) {\nattrs = attrs || jade.attrs; escape = escape || jade.escape; rethrow = rethrow || jade.rethrow; merge = merge || jade.merge;\nvar buf = [];\nwith (locals || {}) {\nvar interp;\nbuf.push('<div class=\"line\"><p class=\"help-text mt2\">');\nvar __val__ = t('The first place to find help is:')\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</p><p class=\"help-text\"><a');\nbuf.push(attrs({ 'href':(\"\" + (helpUrl) + \"\") }, {\"href\":true}));\nbuf.push('>' + escape((interp = helpUrl) == null ? '' : interp) + '</a></p></div>');\n}\nreturn buf.join(\"\");\n};","module.exports = function anonymous(locals, attrs, escape, rethrow, merge) {\nattrs = attrs || jade.attrs; escape = escape || jade.escape; rethrow = rethrow || jade.rethrow; merge = merge || jade.merge;\nvar buf = [];\nwith (locals || {}) {\nvar interp;\nbuf.push('<div id=\"no-app-message\" class=\"w600\"><div id=\"start-title\" class=\"darkbg clearfix\"><a href=\"http://cozy.io\"><img src=\"img/happycloud.png\" class=\"logo\"/></a><p class=\"biggest\">');\nvar __val__ = t('welcome to your cozy')\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</p></div><p class=\"bigger\">');\nvar __val__ = t('you have no apps')\nbuf.push(null == __val__ ? \"\" : __val__);\nbuf.push('</p><p class=\"bigger\">');\nvar __val__ = t('noapps.customize your cozy', {account: '#account', appstore: '#applications'})\nbuf.push(null == __val__ ? \"\" : __val__);\nbuf.push('</p></div><div id=\"app-list\"><section id=\"apps-favorite\" class=\"line\"><h2>');\nvar __val__ = t('home section favorites')\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</h2></section><section id=\"apps-leave\" class=\"line\"><h2>');\nvar __val__ = t('home section leave')\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</h2></section><section id=\"apps-main\" class=\"line\"><h2>');\nvar __val__ = t('home section main')\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</h2></section><section id=\"apps-productivity\" class=\"line\"><h2>');\nvar __val__ = t('home section productivity')\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</h2></section><section id=\"apps-data\" class=\"line\"><h2>');\nvar __val__ = t('home section data management')\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</h2></section><section id=\"apps-watch\" class=\"line\"><h2>');\nvar __val__ = t('home section personal watch')\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</h2></section><section id=\"apps-misc\" class=\"line\"><h2>');\nvar __val__ = t('home section misc')\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</h2></section><section id=\"apps-platform\" class=\"line show\"><h2>');\nvar __val__ = t('home section platform')\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</h2><div class=\"application mod w20 left platform-app\"><div class=\"application-inner\"><a href=\"#applications\"><img src=\"img/apps/store.svg\" class=\"icon\"/><p class=\"app-title\">');\nvar __val__ = t('app store')\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</p></a></div></div><div class=\"application mod w20 left platform-app\"><div class=\"application-inner\"><a href=\"#config-applications\"><img src=\"img/apps/state.svg\" class=\"icon svg\"/><p class=\"app-title\">');\nvar __val__ = t('app status')\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</p></a></div></div><div class=\"application mod w20 left platform-app\"><div href=\"#account\" class=\"application-inner\"><a href=\"#account\"><img src=\"img/apps/settings.svg\" class=\"icon svg\"/><p class=\"app-title\">');\nvar __val__ = t('settings')\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</p></a></div></div><div class=\"application mod w20 left platform-app\"><div href=\"#help\" class=\"application-inner\"><a href=\"#help\"><img src=\"img/apps/help.svg\" class=\"icon svg\"/><p class=\"app-title\">');\nvar __val__ = t('help')\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</p></a></div></div></section></div>');\n}\nreturn buf.join(\"\");\n};","module.exports = function anonymous(locals, attrs, escape, rethrow, merge) {\nattrs = attrs || jade.attrs; escape = escape || jade.escape; rethrow = rethrow || jade.rethrow; merge = merge || jade.merge;\nvar buf = [];\nwith (locals || {}) {\nvar interp;\nbuf.push('<div class=\"application-inner\"><div class=\"vertical-aligner\"><img src=\"\" class=\"icon\"/><img src=\"/img/spinner.svg\" class=\"spinner\"/><p class=\"app-title\">' + escape((interp = app.displayName) == null ? '' : interp) + '</p></div></div>');\n}\nreturn buf.join(\"\");\n};","module.exports = function anonymous(locals, attrs, escape, rethrow, merge) {\nattrs = attrs || jade.attrs; escape = escape || jade.escape; rethrow = rethrow || jade.rethrow; merge = merge || jade.merge;\nvar buf = [];\nwith (locals || {}) {\nvar interp;\nbuf.push('<header id=\"header\" class=\"navbar\"></header><div id=\"notifications\" class=\"right-menu\"><ul id=\"notifications-list\"><li id=\"no-notif-msg\">');\nvar __val__ = t('you have no notifications')\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</li></ul></div><div id=\"notifications-buttons\" class=\"right-menu\"><button id=\"dismiss-all\" class=\"btn\"><i class=\"fa fa-trash mr1\"></i><span>');\nvar __val__ = t('dismiss all')\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</span></button><a id=\"logout-button\" href=\"#logout\" class=\"btn\"><i class=\"fa fa-sign-out mr1\"></i><span>');\nvar __val__ = t('navbar logout')\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</span></a></div><div class=\"home-body\"><div id=\"app-frames\"></div><div id=\"content\"><!-- Preload spinners and hover icons--><img src=\"/img/spinner.svg\" class=\"hidden\"/><img src=\"/img/spinner-white.svg\" class=\"hidden\"/><img src=\"/img/notification-orange.png\" class=\"hidden\"/><div id=\"home-content\"></div></div></div>');\n}\nreturn buf.join(\"\");\n};","module.exports = function anonymous(locals, attrs, escape, rethrow, merge) {\nattrs = attrs || jade.attrs; escape = escape || jade.escape; rethrow = rethrow || jade.rethrow; merge = merge || jade.merge;\nvar buf = [];\nwith (locals || {}) {\nvar interp;\nbuf.push('<div class=\"viewPort\"><div class=\"thumbs\"></div></div><div class=\"index\"></div>');\n}\nreturn buf.join(\"\");\n};","module.exports = function anonymous(locals, attrs, escape, rethrow, merge) {\nattrs = attrs || jade.attrs; escape = escape || jade.escape; rethrow = rethrow || jade.rethrow; merge = merge || jade.merge;\nvar buf = [];\nwith (locals || {}) {\nvar interp;\nbuf.push('<div class=\"platform-section\"><p class=\"mt2\">' + escape((interp = t('introduction market')) == null ? '' : interp) + '</p><div id=\"app-market-list\"><div id=\"market-applications-list\"><div id=\"no-app-message\">');\nvar __val__ = t('installed everything')\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</div></div></div><div class=\"mt2 mb2\"><div id=\"your-app\" class=\"clearfix\"><div class=\"text\"><p>');\nvar __val__ = t('market install your app')\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('&nbsp;<a href=\"http://cozy.io/hack/getting-started/\" target=\"_blank\">');\nvar __val__ = t('market app tutorial')\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</a>.</p><p class=\"add-app-field\"><input type=\"text\" id=\"app-git-field\" placeholder=\"https://github.com/username/repository.git@branch\" class=\"span3\"/><button class=\"btn app-install-button\">');\nvar __val__ = t('install')\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</button></p><div class=\"error alert-error\"></div><div class=\"info alert\"></div></div></div></div></div><div class=\"md-overlay\"></div>');\n}\nreturn buf.join(\"\");\n};","module.exports = function anonymous(locals, attrs, escape, rethrow, merge) {\nattrs = attrs || jade.attrs; escape = escape || jade.escape; rethrow = rethrow || jade.rethrow; merge = merge || jade.merge;\nvar buf = [];\nwith (locals || {}) {\nvar interp;\nbuf.push('<div class=\"right\"><a');\nbuf.push(attrs({ 'href':(\"\" + (app.git) + \"\"), 'target':(\"_blank\"), \"class\": ('website') }, {\"href\":true,\"target\":true}));\nbuf.push('><img src=\"img/git.png\" class=\"img-btn\"/></a>');\nif ( app.website !== undefined)\n{\nbuf.push('<a');\nbuf.push(attrs({ 'href':(\"\" + (app.website) + \"\"), 'target':(\"_blank\"), \"class\": ('website') }, {\"href\":true,\"target\":true}));\nbuf.push('><img src=\"img/link.png\" class=\"img-btn\"/></a>');\n}\nbuf.push('</div><div class=\"app-img left\">');\nif ( app.svgSpriteSlug)\n{\nbuf.push('<img');\nbuf.push(attrs({ \"class\": (app.svgSpriteSlug) }, {\"class\":true}));\nbuf.push('/>');\n}\nelse\n{\nbuf.push('<img');\nbuf.push(attrs({ 'src':(\"\" + (app.icon) + \"\") }, {\"src\":true}));\nbuf.push('/>');\n}\nbuf.push('<span class=\"installing-label\">');\nvar __val__ = t(\"market app install\")\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</span></div><div class=\"app-text\"><h3>' + escape((interp = app.displayName) == null ? '' : interp) + '');\nif ( app.beta)\n{\nbuf.push('<span class=\"beta\">Beta</span>');\n}\nbuf.push('</h3><span class=\"comment\">');\nvar __val__ = t(app.comment)\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</span><p class=\"par2\">');\nvar __val__ = t(app.description)\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</p></div>');\n}\nreturn buf.join(\"\");\n};","module.exports = function anonymous(locals, attrs, escape, rethrow, merge) {\nattrs = attrs || jade.attrs; escape = escape || jade.escape; rethrow = rethrow || jade.rethrow; merge = merge || jade.merge;\nvar buf = [];\nwith (locals || {}) {\nvar interp;\nbuf.push('<a');\nbuf.push(attrs({ 'href':(\"#apps/\" + (model.slug) + \"/\") }, {\"href\":true}));\nbuf.push('>' + escape((interp = model.displayName) == null ? '' : interp) + '</a>');\n}\nreturn buf.join(\"\");\n};","module.exports = function anonymous(locals, attrs, escape, rethrow, merge) {\nattrs = attrs || jade.attrs; escape = escape || jade.escape; rethrow = rethrow || jade.rethrow; merge = merge || jade.merge;\nvar buf = [];\nwith (locals || {}) {\nvar interp;\nbuf.push('<a id=\"menu-applications-toggle\"><span id=\"current-application\"></span></a><div id=\"menu-applications\"><div id=\"home-btn\" class=\"menu-application\"></div></div><div class=\"clickcatcher\"></div>');\n}\nreturn buf.join(\"\");\n};","module.exports = function anonymous(locals, attrs, escape, rethrow, merge) {\nattrs = attrs || jade.attrs; escape = escape || jade.escape; rethrow = rethrow || jade.rethrow; merge = merge || jade.merge;\nvar buf = [];\nwith (locals || {}) {\nvar interp;\nbuf.push('<div class=\"navbar clearfix\"><div id=\"notifications-container\" class=\"right\"></div><a');\nbuf.push(attrs({ 'href':(\"#home\"), 'title':(\"\" + (t('navbar back button title')) + \"\"), \"class\": ('fa') + ' ' + ('fa-chevron-left') + ' ' + ('back-button') + ' ' + ('left') }, {\"href\":true,\"title\":true}));\nbuf.push('><span>');\nvar __val__ = t(\"navbar back button title\")\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</span></a><div id=\"menu-applications-container\"></div></div>');\n}\nreturn buf.join(\"\");\n};","module.exports = function anonymous(locals, attrs, escape, rethrow, merge) {\nattrs = attrs || jade.attrs; escape = escape || jade.escape; rethrow = rethrow || jade.rethrow; merge = merge || jade.merge;\nvar buf = [];\nwith (locals || {}) {\nvar interp;\nbuf.push('<li class=\"app-button\"><a');\nbuf.push(attrs({ 'id':(\"\" + (app.slug) + \"\"), 'href':(\"#apps/\" + (app.slug) + \"\") }, {\"id\":true,\"href\":true}));\nbuf.push('><img');\nbuf.push(attrs({ 'src':(\"/apps/\" + (app.slug) + \"/favicon.ico\") }, {\"src\":true}));\nbuf.push('/></a></li>');\n}\nreturn buf.join(\"\");\n};","module.exports = function anonymous(locals, attrs, escape, rethrow, merge) {\nattrs = attrs || jade.attrs; escape = escape || jade.escape; rethrow = rethrow || jade.rethrow; merge = merge || jade.merge;\nvar buf = [];\nwith (locals || {}) {\nvar interp;\nbuf.push('<a class=\"dismiss\">&times;</a><div class=\"notification-text\">' + escape((interp = model.text) == null ? '' : interp) + '</div><div class=\"notification-date\">' + escape((interp = model.date) == null ? '' : interp) + '</div>');\nif ( model.actionText !== undefined && model.actionText !== null)\n{\nbuf.push('<a class=\"doaction btn\">');\nvar __val__ = t(model.actionText)\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</a>');\n}\n}\nreturn buf.join(\"\");\n};","module.exports = function anonymous(locals, attrs, escape, rethrow, merge) {\nattrs = attrs || jade.attrs; escape = escape || jade.escape; rethrow = rethrow || jade.rethrow; merge = merge || jade.merge;\nvar buf = [];\nwith (locals || {}) {\nvar interp;\nbuf.push('<a');\nbuf.push(attrs({ 'id':('notifications-toggle'), 'title':(\"\" + (t('navbar notifications')) + \"\") }, {\"title\":true}));\nbuf.push('><i class=\"fa fa-bell\"></i><span id=\"notifications-counter\"></span></a><div id=\"clickcatcher\"></div>');\n}\nreturn buf.join(\"\");\n};","module.exports = function anonymous(locals, attrs, escape, rethrow, merge) {\nattrs = attrs || jade.attrs; escape = escape || jade.escape; rethrow = rethrow || jade.rethrow; merge = merge || jade.merge;\nvar buf = [];\nwith (locals || {}) {\nvar interp;\nbuf.push('<!-- never displayed, just for downloading.--><img id=\"img-result\"/><div class=\"objectPickerCont\"><nav role=\"tablist\" aria-controls=\"objectPickerCont\" class=\"fp-nav-tabs\"></nav></div><div class=\"croperCont\"><div class=\"frame-to-crop\"><div id=\"img-to-crop\"></div></div><div id=\"frame-preview\"><img id=\"img-preview\"/></div></div>');\n}\nreturn buf.join(\"\");\n};","module.exports = function anonymous(locals, attrs, escape, rethrow, merge) {\nattrs = attrs || jade.attrs; escape = escape || jade.escape; rethrow = rethrow || jade.rethrow; merge = merge || jade.merge;\nvar buf = [];\nwith (locals || {}) {\nvar interp;\nbuf.push('<div class=\"bloc-container\"><div class=\"img-container\"><div class=\"url-preview\"></div></div><input');\nbuf.push(attrs({ 'placeholder':(\"\" + (t('url of an image')) + \"\"), 'value':(\"\"), \"class\": ('modal-url-input') }, {\"placeholder\":true,\"value\":true}));\nbuf.push('/></div>');\n}\nreturn buf.join(\"\");\n};","module.exports = function anonymous(locals, attrs, escape, rethrow, merge) {\nattrs = attrs || jade.attrs; escape = escape || jade.escape; rethrow = rethrow || jade.rethrow; merge = merge || jade.merge;\nvar buf = [];\nwith (locals || {}) {\nvar interp;\nbuf.push('<div class=\"photoUpload-btn\"><button class=\"btn\">' + escape((interp = t('ObjPicker upload btn')) == null ? '' : interp) + '</button></div><div class=\"photoUpload-or\"><div>' + escape((interp = t('or')) == null ? '' : interp) + '</div></div><div class=\"modal-file-drop-zone\"><p>' + escape((interp = t('drop a file')) == null ? '' : interp) + '</p><div></div></div><input type=\"file\" style=\"display:none\" class=\"uploader\"/>');\n}\nreturn buf.join(\"\");\n};","module.exports = function anonymous(locals, attrs, escape, rethrow, merge) {\nattrs = attrs || jade.attrs; escape = escape || jade.escape; rethrow = rethrow || jade.rethrow; merge = merge || jade.merge;\nvar buf = [];\nwith (locals || {}) {\nvar interp;\nbuf.push('<div class=\"md-content\"><div class=\"md-header clearfix\"><div class=\"line\"><h3 class=\"left\">' + escape((interp = model.displayName) == null ? '' : interp) + '</h3></div>');\nif ( (model.comment !== 'official application'))\n{\nbuf.push('<div class=\"line noncozy-warning\"><i class=\"fa fa-info-circle\"></i><span>');\nvar __val__ = t('warning unofficial app')\nbuf.push(null == __val__ ? \"\" : __val__);\nbuf.push('</span></div>');\n}\nbuf.push('</div><div class=\"md-body\"></div><div class=\"md-footer clearfix\"><button id=\"confirmbtn\" class=\"btn right\">');\nvar __val__ = t('install')\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</button><button id=\"cancelbtn\" class=\"btn light-btn right\">');\nvar __val__ = t('cancel')\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</button></div></div>');\n}\nreturn buf.join(\"\");\n};","module.exports = function anonymous(locals, attrs, escape, rethrow, merge) {\nattrs = attrs || jade.attrs; escape = escape || jade.escape; rethrow = rethrow || jade.rethrow; merge = merge || jade.merge;\nvar buf = [];\nwith (locals || {}) {\nvar interp;\nbuf.push('<div class=\"md-header mt2\">');\nvar __val__ = t('Once updated, this application will require the following permissions:')\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</div><div class=\"md-body\"><div>&nbsp;</div></div><div class=\"md-footer mt2\">');\nif ( model.state === 'broken')\n{\nbuf.push('<a id=\"confirmbtn\" class=\"btn right\">');\nvar __val__ = t('confirm install')\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</a>');\n}\nelse\n{\nbuf.push('<a id=\"confirmbtn\" class=\"btn right\">');\nvar __val__ = t('confirm update')\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</a>');\n}\nbuf.push('<a id=\"cancelbtn\" class=\"btn light-btn right\">');\nvar __val__ = t('cancel')\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</a></div>');\n}\nreturn buf.join(\"\");\n};","module.exports = function anonymous(locals, attrs, escape, rethrow, merge) {\nattrs = attrs || jade.attrs; escape = escape || jade.escape; rethrow = rethrow || jade.rethrow; merge = merge || jade.merge;\nvar buf = [];\nwith (locals || {}) {\nvar interp;\nbuf.push('<!--.section-title.darkbg.bigger help--><line class=\"w800 lightgrey\"><h4 class=\"help-text darkbg pa2\">');\nvar __val__ = t('tutorial title')\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</h4><div id=\"tuto-files\" class=\"line pa2 question\"><p class=\"help-text mt2\">');\nvar __val__ = t('tutorial question files')\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</p><p class=\"center\"><button id=\"files-no\" class=\"btn\">');\nvar __val__ = t('tutorial no')\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</button><button id=\"files-yes\" class=\"btn\">');\nvar __val__ = t('tutorial yes')\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</button></p></div><div id=\"tuto-emails\" class=\"line pa2 question\"><p class=\"help-text mt2\">');\nvar __val__ = t('tutorial question emails')\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</p><p class=\"center\"><button id=\"emails-no\" class=\"btn\">');\nvar __val__ = t('tutorial no')\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</button><button id=\"emails-yes\" class=\"btn\">');\nvar __val__ = t('tutorial yes')\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</button></p></div><div id=\"tuto-calendar\" class=\"line pa2 question\"><p class=\"help-text mt2\">');\nvar __val__ = t('tutorial question calendar')\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</p><p class=\"center\"><button id=\"calendar-no\" class=\"btn\">');\nvar __val__ = t('tutorial no')\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</button><button id=\"calendar-yes\" class=\"btn\">');\nvar __val__ = t('tutorial yes')\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</button></p></div><div id=\"tuto-contacts\" class=\"line pa2 question\"><p class=\"help-text mt2\">');\nvar __val__ = t('tutorial question contacts')\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</p><p class=\"center\"><button id=\"contacts-no\" class=\"btn\">');\nvar __val__ = t('tutorial no')\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</button><button id=\"contacts-yes\" class=\"btn\">');\nvar __val__ = t('tutorial yes')\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</button></p></div><div id=\"tuto-photos\" class=\"line pa2 question\"><p class=\"help-text mt2\">');\nvar __val__ = t('tutorial question photos')\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</p><p class=\"center\"><button id=\"photos-no\" class=\"btn\">');\nvar __val__ = t('tutorial no')\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</button><button id=\"photos-yes\" class=\"btn\">');\nvar __val__ = t('tutorial yes')\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</button></p></div><div id=\"end-screen\" class=\"line pa2 question\"><p class=\"help-text mt2\">');\nvar __val__ = t('tutorial final headline')\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</p><ul><li><a href=\"http://cozy.io/mobile/files.html\">');\nvar __val__ = t('tutorial doc files link')\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</a></li><li><a href=\"http://cozy.io/mobile/contacts.html\">');\nvar __val__ = t('tutorial doc contacts link')\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</a></li><li><a href=\"http://cozy.io/mobile/calendar.html\">');\nvar __val__ = t('tutorial doc calendar link')\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</a></li></ul><p class=\"center\"><a href=\"#home\" class=\"btn\">');\nvar __val__ = t('tutorial final button')\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</a></p></div></line>');\n}\nreturn buf.join(\"\");\n};","module.exports = function anonymous(locals, attrs, escape, rethrow, merge) {\nattrs = attrs || jade.attrs; escape = escape || jade.escape; rethrow = rethrow || jade.rethrow; merge = merge || jade.merge;\nvar buf = [];\nwith (locals || {}) {\nvar interp;\nbuf.push('<div class=\"md-content\"><div class=\"md-header clearfix\"><div class=\"line\"><h3 class=\"left\">');\nvar __val__ = t('update stack modal title')\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</h3></div></div><div class=\"md-body\"><p class=\"step1\">');\nvar __val__ = t('update stack modal content')\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</p><p class=\"step2\">');\nvar __val__ = t('update stack waiting message')\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</p><p class=\"success\">');\nvar __val__ = t('update stack success')\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</p><p class=\"error\">');\nvar __val__ = t('update stack error')\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</p></div><div class=\"md-footer clearfix\"><button id=\"confirmbtn\" class=\"btn right\">');\nvar __val__ = t('update stack modal confirm')\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</button><button id=\"ok\" class=\"btn right\">');\nvar __val__ = t('ok')\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</button><button id=\"cancelbtn\" class=\"btn light-btn right\">');\nvar __val__ = t('cancel')\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</button></div></div>');\n}\nreturn buf.join(\"\");\n};","BaseView = require 'lib/base_view'\n\nBackground = require '../models/background'\ntimezones = require('helpers/timezone').timezones\nlocales =   require('helpers/locales' ).locales\nrequest = require 'lib/request'\nBackgroundList = require 'views/background_list'\nInstance = require 'models/instance'\nObjectPicker = require './object_picker'\n\n\n# View describing main screen for user once he is logged\nmodule.exports = class exports.AccountView extends BaseView\n    id: 'account-view'\n    template: require 'templates/account'\n\n    events:\n        'click #background-add-button': 'onAddBackgroundClicked'\n\n\n    afterRender: ->\n\n        # Register widgets\n        @emailField = @$ '#account-email-field'\n        @publicNameField = @$ '#account-public-name-field'\n        @timezoneField = @$ '#account-timezone-field'\n        @domainField = @$ '#account-domain-field'\n        @localeField = @$ '#account-locale-field'\n        @infoAlert = @$ '#account-info'\n        @infoAlert.hide()\n        @errorAlert = @$ '#account-error'\n        @errorAlert.hide()\n\n        @changePasswordForm = @$ '#change-password-form'\n        @accountSubmitButton = @$ '#account-form-button'\n\n        # Configure Background\n        @accountSubmitButton.click (event) =>\n            event.preventDefault()\n            @onNewPasswordSubmit()\n\n        # Fill timezone selector\n        for timezone in timezones\n            @timezoneField.append(\n                \"<option value=\\\"#{timezone}\\\">#{timezone}</option>\"\n            )\n\n        # Build and render background list. Listen to background changes.\n        @backgroundList = new BackgroundList\n            el: @$ '.background-list'\n        @backgroundList.collection.on 'change', @onBackgroundChanged\n        @backgroundAddButton = @$ '#background-add-button'\n\n        # Load data once everything is built\n        @fetchData()\n        if window.managed\n            @$('#account-domain-field')[0].disabled = true\n            @$('#account-domain-field').parent().find('.btn').hide()\n\n\n    # When password data are submited, it sends a request to backend to save\n    # them. If an error occurs, message is displayed.\n    onNewPasswordSubmit: (event) =>\n\n        form =\n            password0: @password0Field.val()\n            password1: @password1Field.val()\n            password2: @password2Field.val()\n\n        @infoAlert.hide()\n        @errorAlert.hide()\n\n        hideFunc = null\n        showError = (message) =>\n            @errorAlert.html t message\n            @errorAlert.fadeIn()\n            clearTimeout hideFunc\n            hideFunc = setTimeout =>\n                @errorAlert.fadeOut()\n            , 10000\n\n        if form.password1.length < 5\n            showError 'account change password short'\n\n        else if form.password1 isnt form.password2\n            showError 'account change password difference'\n\n        else\n\n            @accountSubmitButton.spin true\n            request.post 'api/user', form, (err, data) =>\n\n                @accountSubmitButton.spin false\n                if err\n                    @password0Field.val null\n                    @password1Field.val null\n                    @password2Field.val null\n                    @errorAlert.show()\n                    timeout =>\n                        @errorAlert.hide()\n                    , 10000\n\n                else\n                    if data.success\n                        @infoAlert.show()\n                        @password0Field.val null\n                        @password1Field.val null\n                        @password2Field.val null\n                        timeout =>\n                            @infoAlert.hide()\n                        , 10000\n                    else\n                        showError 'account change password error'\n\n    # Build a function that save given data when triggered and display\n    # a loading indicator on the save button of the field.\n    getSaveFunction: (fieldName, fieldWidget, path) ->\n        saveButton = fieldWidget.parent().find('.btn')\n        alertMsg = @$ \".error.#{fieldName}\"\n        saveFunction = ->\n            saveButton.spin true\n\n            data = {}\n            data[fieldName] = fieldWidget.val()\n            request.post \"api/#{path}\", data, (err) ->\n                saveButton.spin false\n\n                if err\n                    err = err.toString()\n                    err = err.replace 'Error: ', ''\n                    saveButton.addClass 'red'\n                    saveButton.html t 'error'\n                    alertMsg.html \"#{t(err)}\"\n                    alertMsg.show()\n                else\n                    saveButton.removeClass 'red'\n                    saveButton.addClass 'green'\n                    saveButton.html t 'saved'\n                    alertMsg.hide()\n                    if fieldName is 'locale'\n                        alert t 'changing locale requires reload'\n                        window.location.reload()\n                    setTimeout ->\n                        window.location.reload() if fieldName is 'locale'\n                    , 1000\n\n\n        saveButton.click saveFunction\n        saveFunction\n\n\n    # Fetch data from backend and fill form with collected data.\n    # Then set all listeners: listen to keyup for each field and to click\n    # for each button.\n    fetchData: ->\n\n        userData = window.cozy_user or {}\n        @emailField.val userData.email\n        @publicNameField.val userData.public_name\n        @timezoneField.val userData.timezone\n\n        saveEmail = @getSaveFunction 'email', @emailField, 'user'\n        @emailField.on 'keyup', (event) ->\n            saveEmail() if event.keyCode is 13 or event.which is 13\n\n        savePublicName = @getSaveFunction 'public_name', \\\n                                        @publicNameField, 'user'\n        @publicNameField.on 'keyup', (event) ->\n            savePublicName() if event.keyCode is 13 or event.which is 13\n\n        saveTimezone = @getSaveFunction 'timezone', @timezoneField, 'user'\n        @timezoneField.change saveTimezone\n\n        instance = window.cozy_instance or {}\n        @instance = new Instance instance\n        domain = instance?.domain or t('no domain set')\n        locale = instance?.locale or 'en'\n\n        if not window.managed\n            saveDomain = @getSaveFunction 'domain', @domainField, 'instance'\n            @domainField.on 'keyup', (event) ->\n                saveDomain() if event.keyCode is 13 or event.which is 13\n        @domainField.val domain\n\n        saveLocale = @getSaveFunction 'locale', @localeField, 'instance'\n        @localeField.change saveLocale\n        @localeField.val locale\n\n        # Don't know why password fields can't be configured too early...\n        @password0Field = @$('#account-password0-field')\n        @password1Field = @$('#account-password1-field')\n        @password2Field = @$('#account-password2-field')\n        @password0Field.keyup (event) =>\n            if event.keyCode is 13 or event.which is 13\n                @password1Field.focus()\n        @password1Field.keyup (event) =>\n            if event.keyCode is 13 or event.which is 13\n                @password2Field.focus()\n        @password2Field.keyup (event) =>\n            if event.keyCode is 13 or event.which is 13\n                @onNewPasswordSubmit()\n\n\n    # When add background button is clicked, it displays the photo selector\n    # modal. From the selector result it sends a multipart form to the server.\n    # That way the background can saved. Once it's done the background is\n    # added to the available background list.\n    onAddBackgroundClicked: ->\n        params =\n            type: 'singlePhoto'\n            defaultTab: 'photoUpload'\n\n        new ObjectPicker params, (newPhotoChosen, dataUrl) =>\n\n            if dataUrl?\n                @backgroundAddButton.spin true\n                binary = atob dataUrl.split(',')[1]\n                array = []\n                array.push binary.charCodeAt i for i in [0..binary.length]\n                blob = new Blob [new Uint8Array(array)], type: 'image/jpeg'\n\n                form = new FormData()\n                form.append 'picture', blob\n                $.ajax\n                    type: \"POST\"\n                    url: \"/api/backgrounds\"\n                    data: form\n                    contentType: false\n                    processData: false\n                    success: (data) =>\n                        background = new Background data\n                        @backgroundList.collection.add background\n                        @backgroundList.select background\n\n                    error: (data) ->\n                        alert t 'account background added error'\n                    complete: =>\n                        @backgroundAddButton.spin false\n\n\n    # When background is changed, data are saved and a backgroundChanged event\n    # is emitted. That way the main view can be notified.\n    onBackgroundChanged: (model) =>\n        data = background: model.get('id')\n        @instance.saveData data, (err) ->\n            if err\n                alert t 'account background saved error'\n            else\n                Backbone.Mediator.pub 'backgroundChanged', data.background\n\n","ViewCollection = require 'lib/view_collection'\nBackgroundListItem = require 'views/background_list_item'\nBackgroundCollection = require 'collections/background'\n\n\n\n# View to manage the list of available background in the account view.\nmodule.exports = class BackgroundList extends ViewCollection\n\n    itemView: BackgroundListItem\n    template: require 'templates/background_list'\n    collection: new BackgroundCollection\n    events: {}\n\n\n    # Init collection with default values.\n    # Add a change listener to mark the selected background as selected\n    # and remove the selection from others.\n    afterRender: ->\n        @collection.init()\n\n        @collection.on 'change', (changedModel) =>\n            @collection.map (model) =>\n                if changedModel.cid isnt model.cid\n                    model.set {'selected': false}, {silent: true}\n                    @views[model.cid].$el.removeClass 'selected'\n\n\n    # Select given background (and fire select events).\n    select: (background) ->\n        @views[background.cid].$el.click()\n\n\n    # Override to put official background first.\n    appendView: (view) ->\n        if view.model.get 'predefined'\n            @$el.prepend view.el\n        else\n            @$el.append view.el\n","BaseView = require 'lib/base_view'\n\n\n# Row displaying application name and attributes\nmodule.exports = class BackgroundListItem extends BaseView\n    className: \"mod w33 left background-button\"\n    tagName: \"div\"\n    template: require 'templates/background_list_item'\n    events:\n        'click .delete-background-button': 'onDeleteClicked'\n        'click': 'onClicked'\n\n\n    getRenderData: ->\n        model:\n            src: @model.getThumbSrc()\n\n\n    afterRender: ->\n        @deleteButton = @$ '.delete-background-button'\n        @deleteButton.hide() if @model.get 'predefined'\n        @model.on 'change', =>\n            @$el.addClass 'selected' if @model.get 'selected'\n\n\n    # When item is clicked it is marked as selected.\n    onClicked: ->\n        @model.set 'selected', true\n\n\n    # When delete button is clicked, the model is deleted remotely and the\n    # current background item is removed from DOM.\n    onDeleteClicked: ->\n        @deleteButton.spin true\n        @model.destroy()\n\n","BaseView = require 'lib/base_view'\nColorButton = require 'widgets/install_button'\nPopoverDescriptionView = require 'views/popover_description'\n\n\n# Row displaying application name and attributes\nmodule.exports = class ApplicationRow extends BaseView\n    className: \"line config-application clearfix\"\n    tagName: \"div\"\n    template: require 'templates/config_application'\n\n    getRenderData: ->\n        gitName = @model.get('git')\n        gitName = gitName[...-4] if gitName?\n        app: _.extend {}, @model.attributes,\n            website: @model.get('website') or gitName,\n            branch: @model.get('branch') or 'master'\n\n    events:\n        \"click .remove-app\": \"onRemoveClicked\"\n        \"click .update-app\": \"onUpdateClicked\"\n        \"click .start-stop-btn\": \"onStartStopClicked\"\n        \"click .app-stoppable\": \"onStoppableClicked\"\n        \"click .favorite\": \"onFavoriteClicked\"\n\n    ### Constructor ####\n\n    constructor: (options) ->\n        @id = \"app-btn-#{options.model.id}\"\n        super\n\n    initialize: ->\n        # only re-render when 'version' changes, because it's the only displayed\n        # field that can change during the update\n        @listenTo @model, 'change:version', @render\n\n    afterRender: =>\n        @updateButton = new ColorButton @$ \".update-app\"\n        @removeButton = new ColorButton @$ \".remove-app\"\n        @startStopBtn = new ColorButton @$ \".start-stop-btn\"\n        @stateLabel = @$ '.state-label'\n        @updateIcon = @$ '.update-notification-icon'\n        @appStoppable  = @$ \".app-stoppable\"\n        @updateLabel = @$ \".to-update-label\"\n\n        @listenTo @model, 'change', @onAppChanged\n        @onAppChanged @model\n\n\n    ### Listener ###\n\n    # When an app document changed, the UI is updated accordingly.\n    onAppChanged: (app) =>\n        switch @model.get 'state'\n            when 'broken'\n                @stateLabel.show().text t 'broken'\n                @removeButton.displayGrey t 'remove'\n                @updateButton.displayGrey t 'retry to install'\n                @appStoppable.hide()\n                @appStoppable.next().hide()\n                @startStopBtn.hide()\n            when 'installed'\n                @stateLabel.show().text t 'started'\n                @removeButton.displayGrey t 'remove'\n                @updateButton.displayGrey t 'update'\n                @appStoppable.show()\n                @appStoppable.next().show()\n                @startStopBtn.displayGrey t 'stop this app'\n            when 'installing'\n                @stateLabel.show().text t 'installing'\n                @removeButton.displayGrey t 'abort'\n                @updateButton.hide()\n                @appStoppable.hide()\n                @appStoppable.next().hide()\n                @startStopBtn.hide()\n            when 'stopped'\n                @stateLabel.show().text t 'stopped'\n                @removeButton.displayGrey t 'remove'\n                @updateButton.displayGrey t 'update'\n                @appStoppable.hide()\n                @appStoppable.next().hide()\n                @startStopBtn.displayGrey t 'start this app'\n\n        @updateIcon.toggle @model.get 'needsUpdate'\n        @$(\".update-app\").hide() unless @model.get('needsUpdate')\n\n        bool = @model.get 'isStoppable'\n        @$('.app-stoppable').attr 'checked', bool\n\n    onStoppableClicked: (event) =>\n        bool = not @model.get('isStoppable')\n        @model.save {isStoppable: bool},\n            success: => @$('.app-stoppable').attr 'checked', bool\n            error: =>\n                @$('.app-stoppable').attr 'checked', !bool\n\n    onRemoveClicked: (event) =>\n        event.preventDefault()\n        @removeButton.spin true\n        @stateLabel.html t 'removing'\n        @model.uninstall\n            success: =>\n                @remove()\n                Backbone.Mediator.pub 'app-state-changed', true\n            error: =>\n                @removeButton.displayRed t \"retry to install\"\n                Backbone.Mediator.pub 'app-state-changed', true\n\n    onUpdateClicked: (event) =>\n        event.preventDefault()\n        @openPopover()\n\n    openPopover: ->\n        @popover.hide() if @popover?\n\n        @popover = new PopoverDescriptionView\n            model: @model\n            label: t 'update'\n            confirm: (application) =>\n                $('#no-app-message').hide()\n                @popover.hide()\n                @popover.remove()\n                @updateApp()\n            cancel: (application) =>\n                @popover.hide()\n                @popover.remove()\n        $(\"#config-applications-view\").append @popover.$el\n        @popover.show()\n\n    onStartStopClicked: (event) =>\n        event.preventDefault()\n        @startStopBtn.spin true\n        if(@model.isRunning())\n            @model.stop\n                success: =>\n                    @startStopBtn.spin false\n                    @stateLabel.html t 'stopped'\n                    Backbone.Mediator.pub 'app-state-changed', true\n                error: =>\n                    @startStopBtn.spin false\n\n        else\n            @model.start\n                success: =>\n                    @startStopBtn.spin false\n                    @stateLabel.html t 'started'\n                    Backbone.Mediator.pub 'app-state-changed', true\n                    window.location.href = \"#apps/#{@model.get('slug')}\"\n                error: =>\n                    @startStopBtn.spin false\n                    @stateLabel.html t 'stopped'\n                    Backbone.Mediator.pub 'app-state-changed', true\n                    msg = 'This app cannot start.'\n                    errormsg = @model.get 'errormsg'\n                    msg += \" Error was : #{errormsg}\" if errormsg\n                    alert msg\n\n    remove: =>\n        return super unless @model.get('state') is 'installed'\n        @removeButton.spin false\n        @removeButton.displayGreen t \"removed\"\n        setTimeout =>\n            @$el.fadeOut =>\n                super\n        , 1000\n\n    updateApp: ->\n        Backbone.Mediator.pub 'app-state-changed', true\n        @updateButton.spin true\n        if @model.get('state') isnt 'broken'\n            @stateLabel.html t 'updating'\n        else\n            @stateLabel.html t \"installing\"\n        @model.updateApp\n            success: =>\n                @updateButton.displayGreen t \"updated\"\n                @updateButton.spin false\n                if @model.get('state') is 'installed'\n                    @stateLabel.html t 'started'\n                if @model.get('state') is 'stopped'\n                    @stateLabel.html t 'stopped'\n                Backbone.Mediator.pub 'app-state-changed', true\n                setTimeout =>\n                    @updateButton.hide()\n                    @updateLabel.hide()\n                , 1000\n\n            error: (jqXHR) =>\n                @updateButton.spin false\n                alert t 'update error'\n                @stateLabel.html t 'broken'\n                @updateButton.displayRed t \"update failed\"\n                Backbone.Mediator.pub 'app-state-changed', true\n\n\n    # When favorite button is clicked, the favorite flag is toggled.\n    # A event is published, that way the home view can refresh and display\n    # the application as a favorite.\n    onFavoriteClicked: =>\n        @model.set 'favorite', not @model.get 'favorite'\n        @model.save()\n        Backbone.Mediator.pub 'app:changed:favorite', @model\n        @render()\n\n","ViewCollection = require 'lib/view_collection'\nApplicationRow = require 'views/config_application'\nPopoverDescriptionView = require 'views/popover_description'\nApplicationsList = require '../collections/application'\n\nmodule.exports = class ApplicationsListView extends ViewCollection\n    id: 'config-application-list'\n    tagName: 'div'\n    template: require 'templates/config_application_list'\n    itemView: require 'views/config_application'\n    itemViewOptions: (model) ->\n        app = @market.get model.get('slug')\n        # By default, apps are 'community contribution'.\n        # Used for \"install from Git\"\n        comment = if app? then app.get('comment') else 'community contribution'\n        model.set 'comment', comment\n\n    constructor: (apps, market) ->\n        @apps = apps\n        @market = market\n        super collection: @apps\n\n    afterRender: =>\n        @appList = @$ \"#app-list\"\n\n    appendView: (view) ->\n        if @$el.is ':empty'\n            @$el.append view.el\n        else\n            views = _.values @views\n            sortedViews = _.sortBy views, (view) ->\n                if view?.model?.get('displayName')?\n                    return view.model.get('displayName').toLowerCase()\n                else\n                    return 'unknown'\n            index = _.indexOf(sortedViews, view) - 1\n            if index >= 0\n                previous = @$el.find \".config-application:eq(#{index})\"\n                view.$el.insertAfter previous\n\n    openUpdatePopover: (slug) ->\n        appToUpdateView = null\n        cids = Object.keys @views\n        i = 0\n        while cids[i]? and not appToUpdateView?\n            view = @views[cids[i]]\n            if view.model.get('slug') is slug\n                appToUpdateView = view\n            i++\n\n        if appToUpdateView?\n            appToUpdateView.openPopover()\n        else\n            alert t('error update uninstalled app')\n\n","request = require 'lib/request'\nBaseView = require 'lib/base_view'\nColorButton = require 'widgets/install_button'\nApplication = require 'models/application'\nStackApplication = require 'models/stack_application'\nConfigApplicationList = require './config_application_list'\nConfigDeviceList = require './config_device_list'\nUpdateStackModal = require './update_stack_modal'\nAppsCollection = require '../collections/application'\n\nmodule.exports = class ConfigApplicationsView extends BaseView\n    id: 'config-applications-view'\n    template: require 'templates/config_applications'\n\n    subscriptions:\n        'app-state-changed': 'onAppStateChanged'\n\n    events:\n        \"click .update-all\"        : \"onUpdateClicked\"\n        \"click .update-stack\"      : \"onUpdateStackClicked\"\n        \"click .reboot-stack\"      : \"onRebootStackClicked\"\n\n    constructor: (@apps, @devices, @stackApps, @market) ->\n        @listenTo @devices, 'reset', @displayDevices\n        @listenTo @stackApps, 'reset', @displayStackVersion\n        super()\n\n    afterRender: ->\n        @spanRefresh = @$ '.refresh'\n        @spanRefresh.hide()\n        @memoryFree = @$ '.memory-free'\n        @diskSpace = @$ '.disk-space'\n        @updateBtn = new ColorButton  @$ '.update-all'\n        @updateStackBtn = new ColorButton  @$ '.update-stack'\n        @rebootStackBtn = new ColorButton  @$ '.reboot-stack'\n        @fetch()\n        @applicationList = new ConfigApplicationList @apps, @market\n        @deviceList = new ConfigDeviceList @devices\n        @$el.find('.title-app').after @applicationList.$el\n        @applications = new Application()\n        @stackApps.fetch reset: true\n        @displayDevices()\n        @stackApplications = new StackApplication\n\n    openUpdatePopover: (slug) ->\n        @applicationList.openUpdatePopover slug\n\n    displayStackVersion: =>\n        for app in @stackApps.models\n            @$(\".#{app.get 'name'}\").html app.get 'version'\n            currentVersion = app.get('version').split('.')\n            lastVersion = app.get('lastVersion') or '0.0.0'\n            newVersion = lastVersion.split('.')\n            if parseInt(currentVersion[2]) < parseInt(newVersion[2])\n                @$(\".#{app.get 'name'}\").css 'font-weight', \"bold\"\n                @$(\".#{app.get 'name'}\").css 'color', \"Orange\"\n            if parseInt(currentVersion[1]) < parseInt(newVersion[1])\n                @$(\".#{app.get 'name'}\").css 'font-weight', \"bold\"\n                @$(\".#{app.get 'name'}\").css 'color', \"OrangeRed\"\n            if parseInt(currentVersion[0]) < parseInt(newVersion[0])\n                @$(\".#{app.get 'name'}\").css 'font-weight', \"bold\"\n                @$(\".#{app.get 'name'}\").css 'color', \"Red\"\n\n    displayDevices: =>\n        if not(@devices.length is 0)\n            @$el.find('.title-device').after @deviceList.$el\n        else\n            @$el.find('.title-device').after \"<p>#{t 'status no device'}</p>\"\n\n    fetch: =>\n        @$('.amount').html \"--\"\n        @$('.total').html \"--\"\n        request.get 'api/sys-data', (err, data) =>\n            if err\n                alert t 'Server error occured, infos cannot be displayed.'\n            else\n                diskUsed  = \"#{data.usedDiskSpace} #{data.usedUnit or 'G'}\"\n                diskTotal = \"#{data.totalDiskSpace} #{data.totalUnit or 'G'}\"\n                @displayMemory data.freeMem, data.totalMem\n                @displayDiskSpace diskUsed, diskTotal\n\n    displayMemory: (amount, total) ->\n        @memoryFree.find('.amount').html Math.floor((total - amount) / 1000)\n        @memoryFree.find('.total').html Math.floor(total / 1000)\n\n    displayDiskSpace: (amount, total) ->\n        @diskSpace.find('.amount').html amount\n        @diskSpace.find('.total').html total\n\n    onAppStateChanged: ->\n        setTimeout @fetch, 10000\n\n    popoverManagement: (action) ->\n        @popover.hide() if @popover?\n        @popover = new UpdateStackModal\n            confirm: (application) =>\n                action\n                    success: =>\n                        @popover.onSuccess()\n                    error: (err) =>\n                        @popover.onError(err.responseText)\n            cancel: (application) =>\n                @popover.hide()\n                @popover.remove()\n            end: (success) ->\n                if success\n                    location.reload()\n\n        $(\"#config-applications-view\").append @popover.$el\n        @popover.show()\n\n    onUpdateClicked: ->\n        action = (cb) =>\n            {success, error} = cb or {}\n            @applications.updateAll\n                success: =>\n                    @stackApplications.updateStack cb\n                error: (err) =>\n                    @stackApplications.updateStack\n                        success: ->\n                            if error\n                                error err\n                            else\n                                success \"ok\"\n                        error: (stack_err) ->\n                            err.stack = stack_err\n                            error err if error\n        @popoverManagement action\n\n    onUpdateStackClicked: ->\n        action = (cb) =>\n            @stackApplications.updateStack cb\n        @popoverManagement action\n\n    onRebootStackClicked: ->\n        @rebootStackBtn.spin true\n        @spanRefresh.show()\n        @stackApplications.rebootStack ->\n            location.reload()\n","BaseView = require 'lib/base_view'\n\n# Row displaying device name and attributes\nmodule.exports = class DeviceRow extends BaseView\n    className: \"line config-device clearfix\"\n    tagName: \"div\"\n    template: require 'templates/config_device'\n\n    events:\n        'click .remove-device': 'onRemoveClicked'\n\n    getRenderData: ->\n        device: @model.attributes\n\n    constructor: (options) ->\n        @model = options.model\n        @id = \"device-btn-#{options.model.id}\"\n        super\n\n    onRemoveClicked: (event) ->\n        if window.confirm t 'revoke device confirmation message'\n            $(event.currentTarget).spin true\n            $.ajax(\"/api/devices/#{@model.get('id')}\",\n                type: \"DELETE\"\n                success: =>\n                    @$el.fadeOut =>\n                error: =>\n                    @$('.remove-device').html t 'revoke device access'\n                    console.log \"error while revoking the device access\"\n            )\n","ViewCollection = require 'lib/view_collection'\nDeviceRow = require 'views/config_device'\n\n\nmodule.exports = class DevicesListView extends ViewCollection\n    id: 'config-device-list'\n    tagName: 'div'\n    template: require 'templates/config_device_list'\n    itemView: require 'views/config_device'\n\n    constructor: (devices) ->\n        @devices = devices\n        super collection: devices\n\n\n    afterRender: =>\n        @deviceList = @$ \"#device-list\"\n\n","BaseView = require 'lib/base_view'\n\nmodule.exports = class UpdateStackModal extends BaseView\n    id: 'market-popover-description-view'\n    className: 'modal md-modal md-effect-1'\n    tagName: 'div'\n    template: require 'templates/error_modal'\n\n    events:\n        'click #more':'onMore'\n        'click #ok':'onClose'\n\n    initialize: (options) ->\n        @errortype = options.errortype\n        @details = options.details\n        super\n        $('body').keyup(@onKeyStroke)\n\n    getRenderData: ->\n        errortype: @errortype\n        details: @details\n\n    afterRender: ->\n        @overlay = $ '.md-overlay'\n        @overlay.click => @hide()\n        @$('.details').hide()\n        @body = @$ \".md-body\"\n\n    handleContentHeight: ->\n        @body.css 'max-height', \"#{$(window).height() / 2}px\"\n        $(window).on 'resize', =>\n            @body.css 'max-height', \"#{$(window).height() / 2}px\"\n\n    show: ->\n        @$el.addClass 'md-show'\n        @overlay.addClass 'md-show'\n        $('#home-content').addClass 'md-open'\n        setTimeout =>\n            @$('.md-content').addClass 'md-show'\n        , 300\n\n    hide: ->\n        $('.md-content').fadeOut =>\n            @overlay.removeClass 'md-show'\n            @$el.removeClass 'md-show'\n            @remove()\n        $('#home-content').removeClass 'md-open'\n\n    onClose: ->\n        @hide()\n\n    onKeyStroke: (e) =>\n        e.stopPropagation()\n        if e.which in [13, 27]\n            @onClose()\n\n    onMore: ->\n        if @$('.details').css('display') is 'none'\n            @$('.details').show()\n        else\n            @$('.details').hide()","BaseView = require 'lib/base_view'\nrequest = require 'lib/request'\n\n\n# View that displays:\n# * available links to find support.\n# * a widget to send a message easily to the cozy support email.\nmodule.exports = class exports.HelpView extends BaseView\n    id: 'help-view'\n    template: require 'templates/help'\n\n    events:\n        'click #send-message-button': 'onSendMessageClicked'\n\n\n    afterRender: ->\n        @sendMessageButton = @$ '#send-message-button'\n        @sendMessageInput = @$ '#send-message-textarea'\n        @alertMessageError = @$ '#send-message-error'\n        @alertMessageSuccess = @$ '#send-message-success'\n\n        @configureHelpUrl()\n\n\n    # If a special help url is defined at the instance level, it's the one used\n    # for it.\n    configureHelpUrl: ->\n        helpUrl = window.app.instance?.helpUrl\n        if helpUrl?\n            template = require 'templates/help_url'\n            $(@$el.find('.line')[1]).prepend template helpUrl: helpUrl\n\n\n    # When send message is clicked, the content of the message textarea is\n    # send to the server. That way he can send an email to the Cozy support\n    # team.\n    onSendMessageClicked: =>\n        @alertMessageError.hide()\n        @alertMessageSuccess.hide()\n\n        messageText = @sendMessageInput.val()\n        sendLogs = @$('#send-message-logs').is(':checked')\n        if messageText.length > 0\n            @sendMessageButton.spin true\n            request.post \"help/message\", {messageText, sendLogs}, (err) =>\n                @sendMessageButton.spin false\n                if err\n                    @alertMessageError.show()\n                else\n                    @alertMessageSuccess.show()\n\n","ViewCollection = require 'lib/view_collection'\n\n# View describing main screen for user once he is logged\nmodule.exports = class ApplicationsListView extends ViewCollection\n    id: 'applications-view'\n    template: require 'templates/home'\n    itemView: require 'views/home_application'\n\n    subscriptions:\n        'app:changed:favorite': 'render'\n\n\n    ### Constructor ###\n\n\n    constructor: (apps, market) ->\n        @apps = apps\n        @market = market\n        @state = 'view'\n        @isLoading = true\n        @itemViewOptions = => market: @market\n        super collection: apps\n\n\n    initialize: =>\n        @listenTo @collection, 'request', => @isLoading = true\n        @listenTo @collection, 'reset', => @isLoading = false\n        # do not use listenTo because it prevents market view to listen to\n        # the event too.\n        @collection.on 'remove', @onAppRemoved\n\n        super\n\n\n    afterRender: =>\n        @$(\"#no-app-message\").hide()\n        $(\".menu-btn a\").click (event) =>\n            $(\".menu-btn\").removeClass 'active'\n            $(event.target).closest('.menu-btn').addClass 'active'\n\n        super\n\n\n    checkIfEmpty: ->\n        noapps = @apps.size() is 0 and not @isLoading\n        @$(\"#no-app-message\").toggle noapps\n\n\n    appendView: (view) ->\n        sectionName = view.model.getSection()\n        section = @$ \"section#apps-#{sectionName}\"\n        section.append view.$el\n        section.addClass 'show'\n        section.show()\n\n\n    # Hide section if there is no more application displayed.\n    onAppRemoved: (model) =>\n        sectionName = model.getSection()\n        section = @$ \"section#apps-#{sectionName}\"\n        if section.children().length is 2\n            section.hide()\n\n","BaseView = require 'lib/base_view'\nColorButton = require 'widgets/install_button'\nModal = require './error_modal'\n\n# Row displaying application name and attributes\nmodule.exports = class ApplicationRow extends BaseView\n    className: \"application w20 mod left\"\n    tagName: \"div\"\n\n    template: require 'templates/home_application'\n\n    getRenderData: ->\n        app: @model.attributes\n\n    events:\n        \"mouseup .application-inner\": \"onAppClicked\"\n        \"mouseover .application-inner\": \"onMouseOver\"\n        \"mouseout .application-inner\": \"onMouseOut\"\n\n    ### Constructor ####\n\n    onMouseOver: ->\n        @background.css 'background-color', '#FF9D3B'\n\n    onMouseOut: ->\n        @background.css 'background-color', @color or 'transparent'\n\n    constructor: (options) ->\n        @id = \"app-btn-#{options.model.id}\"\n        @enabled = true\n        super\n        @inMarket = options.market.findWhere slug: @model.get('slug')\n\n    afterRender: =>\n        @icon = @$ 'img.icon'\n        @stateLabel = @$ '.state-label'\n        @title = @$ '.app-title'\n        @background = @$ 'img'\n\n        @listenTo @model, 'change', @onAppChanged\n        @onAppChanged @model\n\n        # Only set a background color for SVG icons\n        if @model.isIconSvg()\n\n            # if there is no set color, we use an auto-generated one\n            @setBackgroundColor()\n            @icon.addClass 'svg'\n\n\n    ### Listener ###\n\n    onAppChanged: (app) =>\n        switch @model.get 'state'\n            when 'broken'\n                @hideSpinner()\n                @icon.attr 'src', \"img/broken.svg\"\n                @stateLabel.show().text t 'broken'\n\n            when 'installed'\n                @hideSpinner()\n                if @model.isIconSvg()\n                    @setBackgroundColor()\n                    extension = 'svg'\n                    @icon.addClass 'svg'\n                else\n                    extension = 'png'\n                    @icon.removeClass 'svg'\n\n                @icon.attr 'src', \"api/applications/#{app.id}.#{extension}\"\n                @icon.hide()\n                @icon.show()\n                @icon.removeClass 'stopped'\n                @stateLabel.hide()\n\n            when 'installing'\n                @showSpinner()\n                @stateLabel.show().text 'installing'\n                @setBackgroundColor()\n\n            when 'stopped'\n\n                if @model.isIconSvg()\n                    extension = 'svg'\n                    @icon.addClass 'svg'\n                else\n                    extension = 'png'\n                    @icon.removeClass 'svg'\n\n                @icon.attr 'src', \"api/applications/#{app.id}.#{extension}\"\n                @icon.addClass 'stopped'\n                @hideSpinner()\n                @stateLabel.hide()\n\n    onAppClicked: (event) =>\n        event.preventDefault()\n        return null unless @enabled\n        switch @model.get 'state'\n            when 'broken'\n                errortype = ''\n                if @model.get('errorcode')?\n                    errorcode = @model.get 'errorcode'\n                    switch errorcode[0]\n                        when '1' then msg += '\\n' + t('error user linux')\n                        when '2'\n                            errortype = t('error git')\n                            switch errorcode[1]\n                                when '0'\n                                    errortype += '\\n' + t('error github repo')\n                                when '1'\n                                    errortype += '\\n' + t('error github')\n                        when '3' then errortype = t('error npm')\n                        when '4' then errortype = t('error start')\n                errormsg = @model.get 'errormsg'\n                modal = new Modal\n                    title: 'Broken application'\n                    errortype: errortype\n                    details: errormsg\n                $(\"##{@id}\").append modal.$el\n                modal.show()\n            when 'installed'\n                @launchApp(event)\n            when 'installing'\n                alert t 'this app is being installed. Wait a little'\n            when 'stopped'\n                @showSpinner()\n                @model.start\n                    success: =>\n                        @launchApp(event)\n                        @hideSpinner()\n                    error: =>\n                        @hideSpinner()\n                        msg = 'This app cannot start.'\n                        errormsg = @model.get 'errormsg'\n                        msg += \" Error was : #{errormsg}\" if errormsg\n                        alert msg\n\n\n    ### Functions ###\n\n    launchApp: (e) =>\n        # if ctrl or middle click or small device\n        if e.which is 2 or e.ctrlKey or e.metaKey or $(window).width() <= 640\n            window.open \"apps/#{@model.id}/\", \"_blank\"\n        else if e.which is 1 # left click\n            window.app.routers.main.navigate \"apps/#{@model.id}/\", true\n\n\n    setBackgroundColor: ->\n        slug = @model.get 'slug'\n        color = @model.get 'color'\n        unless color?\n            hashColor = ColorHash.getColor slug, 'cozy'\n\n            # By default, look for the color in the market.\n            color = @inMarket?.get('color') or hashColor\n        @color = color\n        @background.css 'background-color', color\n\n\n    showSpinner: =>\n        @icon.hide()\n        @$('.spinner').show()\n\n\n    hideSpinner: ->\n        @$('.spinner').hide()\n        @icon.show()\n\n","Photo  = require '../models/photo'\n\n################################################################################\n# -- USAGE --\n#\n#   # creation :\n#       longList = new LongList(viewPortElement)\n#       doActions() ...\n#\n#   # if the the viewPortElement is not initialy attached in the DOM, then call\n#   resizeHandler when the viewPortElement is attached :\n#       longList.resizeHandler()\n#\n#   # if we want to anticipate the loading of the thumbs before we attach the\n#   list inf the dom, we can give the size that will be available for list with:\n#       longList.setInitialDimensions(pan.clientWidth, pan.clientHeight)\n#\n#   # when the geometry of the parent :\n#       longList.resizeHandler()\n#\n#\n# -- SEMANTIC & CONVENTIONS --\n#\n# 1/ syntax\n#   . a variable name ending with a '$' is a reference to a node in the DOM\n#   . in a variable name, \"Rk\" means \"rank\"\n#   . in a variable name, Pt means \"Pointer\". The safe zone is define by a\n#     start pointer and an end pointer, themselves defined\n#     by a rank, y monthRk and inMonthRk\n#\n#\n# 2/ @months\n#   [ {nPhotos:45, month:\"201503\"}, ... ]\n# array of all the months having a photo.\n# months.length = number of months having a photo\n# months[n] = {\n#   nPhotos : number of photo of this month\n#   month   : string, the month, format : \"201503\"\n#   label$  : element in the DOM in the header of the month\n#   nRows   : number of rows in the month\n#   height  : in px\n#   y       : y from the top of the thumbs container (@thumbs$), in px\n#   yBottom : in px\n#   firstRk : integer, rank of the first photo of the month\n#   lastRk  : integer, rank of the last  photo of the month\n# }\n#\n#\n# 3/ @nPhotos\n#   Total number of images in the long list.\n#\n#\n# 4/ \"rank\"\n#   all images are indexed by their rank being their position in the ordered\n#   list of images.\n#   The most recent image rank is 0, the oldest rank is nPhoto - 1\n#\n#\n# 5/ inMonthRank\n#   The rank of the image in the chronological list of images of the same month\n#\n#\n# 6/ buffer :\n#\n#   The buffer lists all the created thumbs, keep a reference on the first (top\n#   most) and the last (bottom most) cells.\n#   The data structure of the buffer is a closed double linked chain.\n#   Each element of the chain is a \"thumb\" with a previous (prev) and next\n#   (next) element.\n#   \"closed\" means that buffer.last.prev == buffer.first\n#\n#   data structure :\n#      first   : {thumb}   # top most thumb\n#      firstRk : {integer} # rank of the first image of the buffer\n#      last    : {thumb}   # bottom most thumb\n#      lastRk  : {integer} # rank of the last image of the buffer\n#      nThumbs : {integer} # number of thumbs in the buffer\n#      # the following data are the coordonates of the thumb that would be just\n#      # after the last of the buffer.\n#      nextLastRk      : {integer}\n#      nextLastCol     : {integer}\n#      nextLastY       : {integer}\n#      nextLastMonthRk : {integer}\n#      # the following data are the coordonates of the thumb that would be just\n#      # before the last of the buffer.\n#      nextFirstCol     : {integer}\n#      nextFirstMonthRk : {integer}\n#      nextFirstRk      : {integer}\n#      nextFirstY       : {integer}\n#\n#\n# 7/ thumb\n#      prev    : {thumb}   # previous thumb in the buffer    : older, lower in the list\n#      next    : {thumb}   # next thumb in the buffer    : more recent, higher in the list\n#      el      : {thumb$}  # element in the DOM of the thumb\n#      rank    : {integer} # rank of the corresponding image\n#      monthRk : monthRk\n#      id      : {integer} # id of the corresponding image\n#   Element of the buffer, keeps a reference (el) to the thumb element inserted\n#   in the DOM.\n#\n#\n# 8/ safeZone\n#   A range of thumbs starting before the viewport and going after. The number\n#   of thumbs before and after the viewport depends of SAFE_ZONE_COEF.\n#   The safe zone is computed by _adaptBuffer\n#   data structure :\n#      firstCol             : {integer}\n#      firstInMonthRow      : {integer}\n#      firstMonthRk         : {integer}\n#      firstRk              : {integer}\n#      firstThumbRkToUpdate : {integer}\n#      firstThumbToUpdate   : {thumb}\n#      firstVisibleRk       : {integer}\n#      firstY               : {integer}\n#      lastRk               : {integer}\n#      endCol               : {integer}\n#      endMonthRk           : {integer}\n#      endY                 : {integer}\n#\n#\n################################################################################\n\n\n################################################################################\n## CONSTANTS ##\n#\n# minimum duration between two refresh of the buffer (_adaptBuffer)\nTHROTTLE            = 450\n# minimum duration between two refresh of the index (_adaptIndex)\nTHROTTLE_INDEX      = 300\n# n = max number of viewport height by seconds\nMAX_SPEED           = 1.5 * THROTTLE / 1000\n# number of \"screens\" before and after the viewport in the buffer.\n# (ex : 1.5 => 1+2*1.5=4 screens always ready)\nBUFFER_COEF         = 3\n# number of \"screens\" before and after the viewport corresponding to\n# the safe zone. The Safe Zone is the rows where viewport can go\n# without trigering the movement of the buffer.\n# ! !  Must be smaller than BUFFER_COEF  ! !\nSAFE_ZONE_COEF      = 2\n# unit used for the dimensions (px,em or rem)\nTHUMB_DIM_UNIT      = 'em'\n# space between 2 months\nMONTH_HEADER_HEIGHT = 2.5\n# padding in pixels between thumbs\nCELL_PADDING        = 0.6\n# guess :-)\nTHUMB_HEIGHT        = 10\n# height from top of the month to the top of the month label\nMONTH_LABEL_TOP     = 0.8\n\n\n\n\nmodule.exports = class LongList\n\n################################################################################\n## PUBLIC SECTION ##\n#\n    constructor: (@externalViewPort$, @modal) ->\n        ####\n        # init state\n        @selected = {} # selected.photoID = thumb = {rank, id,name,thumbEl}\n        ####\n        # get elements (name ends with '$')\n        @viewPort$ = document.createElement('div')\n        @viewPort$.classList.add('viewport')\n        @externalViewPort$.appendChild(@viewPort$)\n        @thumbs$   = document.createElement('div')\n        @thumbs$.classList.add('thumbs')\n        @viewPort$.appendChild(@thumbs$)\n        @index$    = document.createElement('div')\n        @index$.classList.add('long-list-index')\n        @externalViewPort$.appendChild(@index$)\n        ####\n        # set position\n        @viewPort$.style.position = 'relative'\n        @index$.style.position    = 'absolute'\n        @index$.style.top         = 0\n        @index$.style.bottom      = 0\n        @index$.style.right       = @_getScrollBarWidth()+'px'\n        ####\n        # keep track of the last selected column during navigation with keyboard\n        @_lastSelectedCol = null\n        ####\n        # Get from the server the array of distribution of the photos and then\n        # adapt the buffer to the initial geometry\n        @isInited = @isPhotoArrayLoaded = false\n        Photo.getMonthdistribution (error, res) =>\n            @isPhotoArrayLoaded = true\n            @months  = res\n            @_DOM_controlerInit()\n            return true\n\n\n    ###*\n     * To compute the geometry we mus know the the width and height of the\n     * externalViewPort$.\n     * This is possible only if this element is inserted in the DOM of we give\n     * the dimension that will be available with the following function.\n     * @param {Integer} width  in px of the externalViewPort$ when it will be\n     *                  inserted\n     * @param {Integer} heigth in px of the externalViewPort$ when it will be\n     *                  inserted\n    ###\n    setInitialDimensions : (width, heigth)->\n        @initialWidth  = width\n        @initialHeight = heigth\n        @_resizeHandler()\n\n\n    ###*\n     * returns the selected \"file\", ie the same document as in Couch\n     * {id, name, path, lastModification, binary, class, docType, mime,\n     * creationDate, size, tags}\n    ###\n    getSelectedFile : () =>\n        for k, thumb$ of @.selected\n            if thumb$\n                return thumb$.file\n        return null\n\n\n    ###*\n     * There is an event delegation, so the parent (externalViewPort$ or above)\n     * are in charge of listening and transmitting the event with this function.\n     * @param  {Event} e Event\n    ###\n    keyHandler : (e)->\n        switch e.which\n            when 39 # right key\n                e.stopPropagation()\n                e.preventDefault()\n                @_selectNextThumb()\n            when 37 # left key\n                e.stopPropagation()\n                e.preventDefault()\n                @_selectPreviousThumb()\n            when 38 # up key\n                e.stopPropagation()\n                e.preventDefault()\n                @_selectThumbUp()\n            when 40 # down key\n                e.stopPropagation()\n                e.preventDefault()\n                @_selectThumbDown()\n            when 36 # start line key\n                e.stopPropagation()\n                e.preventDefault()\n                @_selectStartLineThumb()\n            when 35 # end line key\n                e.stopPropagation()\n                e.preventDefault()\n                @_selectEndLineThumb()\n            when 34 # page down key\n                e.stopPropagation()\n                e.preventDefault()\n                @_selectPageDownThumb()\n            when 33 # page up key\n                e.stopPropagation()\n                e.preventDefault()\n                @_selectPageUpThumb()\n            else\n                return false\n        return\n\n\n    ###*\n     * Must be called when the goemetry of the parent (externalViewPort$) of the\n     * long list changes.\n    ###\n    resizeHandler: () ->\n        # will be defined during _DOM_controlerInit, when we get the\n        # distribution array of photos.\n        # If it is called too early, don't do anything, a resizeHandler call\n        # will occur when the distribution array will arrive.\n\n\n\n################################################################################\n## PRIVATE SECTION ##\n\n\n    ###*\n     * This is the main procedure. Its scope contains all the functions used to\n     * update the buffer and the shared variables between those functions. This\n     * approach has been chosen for performance reasons (acces to scope\n     * variables faster than to nested properties of objects). It's not an\n     * obvious choice.\n     * Called only when we get from the server the month distribution\n     * (Photo.getMonthdistribution)\n    ###\n    _DOM_controlerInit: () ->\n\n        #######################\n        # global variables\n        months                 = @months\n        buffer                 = null\n        previousWidth          = null\n        bufferAlreadyAdapted   = false\n        cellPadding            = null\n        monthHeaderHeight      = null\n        monthTopPadding        = null\n        marginLeft             = null\n        thumbWidth             = null\n        thumbHeight            = null\n        colWidth               = null\n        rowHeight              = null\n        nThumbsPerRow          = null\n        nRowsInSafeZoneMargin  = null\n        nThumbsInSafeZone      = null\n        nThumbsInBufferMargin  = null\n        nThumbsInBuffer        = null\n        viewPortHeight         = null\n        indexHeight            = null\n        indexVisible           = null\n        currentIndexRkSelected = 0\n        thumbs$Height          = null\n        monthLabelTop          = null\n        lastOnScroll_Y         = null\n        current_scrollTop      = null\n        safeZone =\n            firstRk              : null\n            firstMonthRk         : null\n            firstInMonthRow      : null\n            firstCol             : null\n            firstVisibleRk       : null\n            firstY               : null\n            lastRk               : null\n            endCol               : null\n            endMonthRk           : null\n            endY                 : null\n            firstThumbToUpdate   : null\n            firstThumbRkToUpdate : null\n\n        # should the first thumb be selected right after instanciation ? (could\n        # be an option)\n        isDefaultToSelect = true\n\n\n\n        ###*\n         * called after a scroll, will launch _adaptBuffer and _adaptIndex\n         * (both throttled)\n        ###\n        _scrollHandler = (e) =>\n            if @noScrollScheduled\n                lastOnScroll_Y = @viewPort$.scrollTop\n                setTimeout(_adaptBuffer,THROTTLE)\n                @noScrollScheduled = false\n            if @noIndexScrollScheduled\n                setTimeout(_adaptIndex,THROTTLE_INDEX)\n                @noIndexScrollScheduled = false\n            if !indexVisible\n                @index$.classList.add('visible')\n                indexVisible = true\n\n        @_scrollHandler = _scrollHandler\n\n\n\n        ###*\n         * called once for all during _DOM_controlerInit\n         * computes the static parameters of the geometry\n        ###\n        _getStaticDimensions = () =>\n            thumbHeight       = _getDimInPixels(THUMB_HEIGHT)\n            cellPadding       = _getDimInPixels(CELL_PADDING)\n            @thumbHeight      = thumbHeight\n            thumbWidth        = thumbHeight\n            colWidth          = thumbWidth  + cellPadding\n            rowHeight         = thumbHeight + cellPadding\n            monthHeaderHeight = _getDimInPixels(MONTH_HEADER_HEIGHT)\n            monthTopPadding   = monthHeaderHeight + cellPadding\n            monthLabelTop     = _getDimInPixels(MONTH_LABEL_TOP)\n            @monthLabelTop    = monthLabelTop\n\n\n\n        ###*\n         * returns the font-size in px of a given element (context) or of the\n         * root element of the document if no context is provided.\n         * @param  {element} context Optionnal: an elemment to get the font-size\n         * @return {integer}         the font-size\n        ###\n        _getElementFontSize=( context )->\n            # Returns a number\n            return parseFloat(\n                # of the computed font-size, so in px\n                    # for the given context\n                    # or the root <html> element\n                getComputedStyle( context or document.documentElement ).fontSize\n            )\n\n\n\n        _remToPixels=(value)->\n            return _emToPixels(value)\n\n\n\n        _emToPixels=(value, context)->\n            return Math.round(value * _getElementFontSize(context))\n\n\n\n        _getDimInPixels = (value)=>\n            switch THUMB_DIM_UNIT\n                when 'px'\n                    return value\n                when 'em'\n                    return _emToPixels(value, @viewPort$)\n                when 'rem'\n                    return _remToPixels(value)\n\n\n\n        ###*\n         * Compute all the geometry after a resize or when the list in inserted\n         * in the DOM.\n         * _adaptBuffer will be executed at the end except if\n         *     1- the distribution array of photo has not been received.\n         *     2- the geometry could not be computed (for instance if the width\n         *     of the list is null when the list is not visible)\n        ###\n        _resizeHandler= ()=>\n            if !@isPhotoArrayLoaded\n                return\n            ##\n            # 1/ GET DIMENSIONS.\n            # It is possible only when the longList is inserted into the DOM, that's\n            # why we had to wait for _init() which occurs after both the reception\n            # of the array of photo and after the parent view has launched init().\n            viewPortHeight = @viewPort$.clientHeight\n            VP_width       = @viewPort$.clientWidth\n            # the list has no width or height : geometry can not be computed\n            # except if some initial width and height has been given\n            if VP_width <= 0 || viewPortHeight <= 0\n                if @initialWidth and @initialHeight\n                    VP_width       = @initialWidth\n                    viewPortHeight = @initialHeight\n                else\n                    return false\n            # if the width of viewport has not change, we can directly adapt\n            # buffer\n            if VP_width == previousWidth\n                _adaptBuffer()\n                return\n            previousWidth  = VP_width\n            # compute thumbs per row & margin\n            nThumbsPerRow  = Math.floor((VP_width-cellPadding)/colWidth)\n            @nThumbsPerRow = nThumbsPerRow\n            marginLeft = cellPadding +                                         \\\n                         Math.round(                                           \\\n                           (VP_width - nThumbsPerRow*colWidth - cellPadding)/2 \\\n                         )\n            # compute the safe zone margin\n            nRowsInViewPort       = Math.ceil(viewPortHeight/rowHeight)\n            nRowsInSafeZoneMargin = Math.round(SAFE_ZONE_COEF * nRowsInViewPort)\n            nThumbsInSZ_Margin    = nRowsInSafeZoneMargin * nThumbsPerRow\n            nThumbsInViewPort     = nRowsInViewPort * nThumbsPerRow\n            nThumbsInSafeZone     = nThumbsInSZ_Margin*2 + nThumbsInViewPort\n            # compute the buffer margin\n            nRowsInBufferMargin   = Math.round(BUFFER_COEF * nRowsInViewPort)\n            nThumbsInBufferMargin = nRowsInBufferMargin * nThumbsPerRow\n            nThumbsInBuffer       = nThumbsInViewPort + 2*nThumbsInBufferMargin\n            ##\n            # 2/ COMPUTE THE PROPERTIES OF EACH MONTH\n            nextY   = 0\n            nPhotos = 0\n            minMonthHeight  = Infinity\n            minMonthNphotos = Infinity\n            for month in @months\n                nPhotosInMonth     = month.nPhotos\n                month.nRows        = Math.ceil(nPhotosInMonth / nThumbsPerRow)\n                month.height       = monthTopPadding + month.nRows*rowHeight\n                month.y            = nextY\n                month.yBottom      = nextY + month.height\n                month.firstRk      = nPhotos\n                month.lastRk       = nPhotos + nPhotosInMonth - 1\n                month.lastThumbCol = (nPhotosInMonth-1) % nThumbsPerRow\n                month.date         = moment(month.month,'YYYYMM')\n                nextY   += month.height\n                nPhotos += nPhotosInMonth\n                minMonthHeight  = Math.min(minMonthHeight,month.height)\n                minMonthNphotos = Math.min(minMonthNphotos,month.nPhotos)\n            @nPhotos = nPhotos\n            thumbs$Height = nextY\n            @thumbs$.style.setProperty('height', thumbs$Height + 'px')\n            ##\n            # 3/ POSITION INDEX\n            MONTH_LABEL_HEIGHT = 27 # TODO : should be computed live, not static\n            minimumIndexHeight = @months.length * MONTH_LABEL_HEIGHT\n            if minimumIndexHeight*1.3 <= viewPortHeight\n                indexHeight = viewPortHeight\n            else\n                indexHeight = 1.5*minimumIndexHeight\n            y = 0\n            c = indexHeight - @months.length * MONTH_LABEL_HEIGHT\n            d = nPhotos - minMonthNphotos * @months.length\n            for month, rk in @months\n                txt = month.date.format('MMM YYYY')\n                h = c * (month.nPhotos - minMonthNphotos)\n                h = h / d\n                h += MONTH_LABEL_HEIGHT\n                y += h\n                label$ = $(\"<div style='height:#{h}px; right:0px'>#{txt}</div>\")[0]\n                label$.dataset.monthRk = rk\n                @index$.appendChild(label$)\n            ##\n            # the first call of _resizeHandler it is not necessary to\n            # positionnate the thumbs. After the first call, the thumbs are\n            # always repositionated\n            if bufferAlreadyAdapted\n                _rePositionThumbs()\n                _adaptBuffer()\n            bufferAlreadyAdapted = true\n\n        @resizeHandler = _resizeHandler\n\n\n\n        ###*\n         * Initialize the buffer.\n         * The buffer lists all the created thumbs, keep a reference on the\n         * first (top most) and the last (bottom most) thumb.\n         * The buffer is a closed double linked chain.\n         * Each element of the chain is a \"thumb\" with a previous (prev) and\n         * next (next) element.\n         * \"closed\" means that buffer.last.prev == buffer.first\n         * data structure : see the beginning of this file.\n        ###\n        _initBuffer = ()=>\n            nToCreate = Math.min(@nPhotos, nThumbsInBuffer)\n            firstCreatedThb = {}\n            previousCreatedThb = firstCreatedThb\n            rowY     = monthTopPadding\n            col      = 0\n            monthRk  = 0\n            month    = @months[0]\n            localRk  = 0\n            # loop to create the thumbs\n            for rk in [0..nToCreate-1] by 1\n                if localRk == 0 then _insertMonthLabel(month)\n                thumbImg$ = document.createElement('img')\n                thumb$ = document.createElement('div')\n                thumb$.appendChild(thumbImg$)\n                thumb$.setAttribute('class', 'long-list-thumb thumb')\n                thumb$.style.height = thumbHeight + 'px'\n                thumb$.style.width  = thumbHeight + 'px'\n                thumb =\n                    prev : null\n                    next : previousCreatedThb\n                    el   : thumb$\n                    rank : rk\n                    monthRk : monthRk\n                    id   : null\n                previousCreatedThb.prev = thumb\n                previousCreatedThb = thumb\n                thumb$.style.cssText = \"top:#{rowY}px;left:#{marginLeft + col*colWidth}px;height:#{thumbHeight}px;width:#{thumbHeight}px;\"\n                @thumbs$.appendChild(thumb$)\n                localRk += 1\n                if localRk == month.nPhotos\n                    # jump to a new month\n                    monthRk += 1\n                    month    = @months[monthRk]\n                    localRk  = 0\n                    col      = 0\n                    rowY    += rowHeight + monthTopPadding\n                else\n                    # go to next column or to a new row if we are at last column\n                    col  += 1\n                    if col is nThumbsPerRow\n                        rowY += rowHeight\n                        col   = 0\n            # create the buffer\n            buffer =\n                    first   : firstCreatedThb.prev  # top most thumb\n                    firstRk : 0           # rank of the first imge of the buffer\n                    last    : thumb       # bottom most thumb\n                    lastRk  : nToCreate-1 # rank of the last image of the buffer\n                    nThumbs :  1          # number of thumbs in the buffer\n                    # the following data are the coordonates of the thumb that\n                    # would be just after the last of the buffer.\n                    nextLastRk      : null\n                    nextLastCol     : null\n                    nextLastY       : null\n                    nextLastMonthRk : null\n                    # the following data are the coordonates of the thumb that\n                    # would be just before the last of the buffer.\n                    nextFirstCol     : null\n                    nextFirstMonthRk : null\n                    nextFirstRk      : null\n                    nextFirstY       : null\n            buffer.first.next = buffer.last\n            buffer.last.prev  = buffer.first\n            @buffer = buffer\n            safeZone.firstThumbToUpdate = buffer.first\n            # request the photo documents from server\n            Photo.listFromFiles 0, nToCreate, (error, res) ->\n                if error\n                    console.error error\n                _updateThumb(res.files, res.firstRank)\n\n\n\n        ###*\n         * called by onscroll (throttled), adapt the position of the index (top)\n         * according to the new scroll position\n        ###\n        _adaptIndex = () =>\n            y = @viewPort$.scrollTop\n            H = thumbs$Height\n            vph = viewPortHeight\n            C =  (H - vph) / (indexHeight - vph)\n            td_a = Math.round( (vph*C-vph) / 2)\n            td_b = H - td_a - vph\n            C_bis = (indexHeight - vph) / (td_b - td_a)\n            if td_b < td_a\n                td_a = Math.round((H-vph)/2)\n                td_b = td_a\n            if td_a < y and y < td_b\n                @index$.style.top = - Math.round(C_bis*(y-td_a)) + 'px'\n                return\n            if y < td_a\n                @index$.style.top = 0\n            if td_b < y\n                @index$.style.top = - (indexHeight - vph) + 'px'\n\n\n\n        ###*\n         * modify the apperence of the index label corresponding of the first\n         * month displayed in the viewPort\n        ###\n        _selectCurrentIndex = (monthRk) =>\n            @index$.children[currentIndexRkSelected].classList.remove('current')\n            @index$.children[monthRk].classList.add('current')\n            currentIndexRkSelected = monthRk\n\n        ###*\n         * will hide the index 2s after its last call\n        ###\n        lazyHideIndex =  _.debounce () =>\n                @index$.classList.remove('visible')\n                indexVisible = false\n            , 2000\n\n\n\n        ###*\n         * Adapt the buffer when the viewport has moved.\n         * Launched at init and by _scrollHandler\n        ###\n        _adaptBuffer = () =>\n            @noScrollScheduled      = true\n            @noIndexScrollScheduled = true\n            lazyHideIndex()\n\n            # test speed, if too high, relaunch a _scrollHandler\n            current_scrollTop = @viewPort$.scrollTop\n            speed = Math.abs(current_scrollTop - lastOnScroll_Y) / viewPortHeight\n            if speed > MAX_SPEED\n                _scrollHandler()\n                return\n\n            bufr = buffer\n            # re init safeZone but keep a reference on the\n            # previous firstThumbToUpdate and firstThumbRkToUpdate\n            safeZone.firstRk              = null\n            safeZone.firstMonthRk         = null\n            safeZone.firstInMonthRow      = null\n            safeZone.firstCol             = null\n            safeZone.firstVisibleRk       = null\n            safeZone.firstY               = null\n            safeZone.lastRk               = null\n            safeZone.endCol               = null\n            safeZone.endMonthRk           = null\n            safeZone.endY                 = null\n            previous_firstThumbToUpdate   = safeZone.firstThumbToUpdate\n            safeZone.firstThumbToUpdate   = null\n            safeZone.firstThumbRkToUpdate = null\n\n            _computeSafeZone()\n\n            if safeZone.lastRk > bufr.lastRk\n                # 1/ the safeZone is going down and the bottom of the safeZone\n                # is bellow the bottom of the buffer\n                #\n                # nToMove = number of thumbs to move from the top of the\n                # buffer in order to fill its bottom\n                nToMove = \\\n                    Math.min(safeZone.lastRk - bufr.lastRk, nThumbsInSafeZone)\n                if safeZone.firstRk <= bufr.lastRk\n                    # part of the buffer is in the safe zone : add thumbs after\n                    # the last thumb of the buffer\n                    _getBufferNextLast()\n                    targetRk      = bufr.nextLastRk\n                    targetMonthRk = bufr.nextLastMonthRk\n                    targetCol     = bufr.nextLastCol\n                    targetY       = bufr.nextLastY\n\n                else\n                    # the safeZone is completely bellow the buffer : add thumbs\n                    # bellow the top of the safeZone.\n                    targetRk      = safeZone.firstRk\n                    targetMonthRk = safeZone.firstMonthRk\n                    targetCol     = safeZone.firstCol\n                    targetY       = safeZone.firstY\n\n                if nToMove > 0\n                    Photo.listFromFiles targetRk, nToMove, (error, res) ->\n                        _updateThumb(res.files, res.firstRank)\n                    _moveBufferToBottom( nToMove        ,\n                                          targetRk      ,\n                                          targetCol     ,\n                                          targetY       ,\n                                          targetMonthRk  )\n\n            else if safeZone.firstRk < bufr.firstRk\n                # 2/ the safeZone is going up and the top of the safeZone is\n                # above the buffer\n                #\n                # nToMove = number of thumbs to move by reusing thumbs from the\n                # bottom of the buffer in order to fill its top\n                nToMove = Math.min(bufr.firstRk - safeZone.firstRk, nThumbsInSafeZone)\n\n                if safeZone.lastRk >= bufr.firstRk\n                    # part of the buffer is in the safe zone : add thumbs above\n                    # the first thumb of the buffer\n                    _getBufferNextFirst()\n                    targetRk      = bufr.nextFirstRk\n                    targetMonthRk = bufr.nextFirstMonthRk\n                    targetCol     = bufr.nextFirstCol\n                    targetY       = bufr.nextFirstY\n\n                else\n                    # the safeZone is completely above the buffer : add thumbs\n                    # above the bottom of the safeZone.\n                    targetRk      = safeZone.lastRk\n                    targetCol     = safeZone.endCol\n                    targetMonthRk = safeZone.endMonthRk\n                    targetY       = safeZone.endY\n\n                if nToMove > 0\n                    Photo.listFromFiles targetRk - nToMove + 1 , nToMove, (error, res) ->\n                        if error\n                            console.error error\n                        _updateThumb(res.files, res.firstRank)\n                    _moveBufferToTop( nToMove       ,\n                                      targetRk      ,\n                                      targetCol     ,\n                                      targetY       ,\n                                      targetMonthRk  )\n            if !nToMove?\n                # The buffer was inside the safe zone, there was no modification\n                # of the buffer\n                safeZone.firstThumbToUpdate   = previous_firstThumbToUpdate\n\n\n        _rePositionThumbs = () =>\n            bufr      = buffer\n            thumb     = bufr.first\n            thumb$    = thumb.el\n            monthRk   = thumb.monthRk\n            scrollTop = @viewPort$.scrollTop\n\n            month   = months[monthRk]\n            startRk = thumb.rank\n            localRk = startRk - monthRk\n            row     = Math.floor(localRk / nThumbsPerRow)\n            rowY    = month.y + monthTopPadding + row * rowHeight\n            col      = localRk % nThumbsPerRow\n\n            firstVisibleThumb = null\n            lastLast          = bufr.last\n            for rk in [0..buffer.nThumbs-1] by 1\n                if localRk == 0 then _insertMonthLabel(month)\n                if !firstVisibleThumb and parseInt(thumb.el.style.top)>scrollTop\n                    #keep info on the first visible thumb in order to adjust\n                    # viewport.scrollTop in order to keep this thum on the same\n                    # line\n                    firstVisibleThumb=\n                        top : parseInt(thumb.el.style.top)\n                        el  : thumb.el\n                style        = thumb.el.style\n                style.top    = rowY + 'px'\n                style.left   = (marginLeft + col*colWidth) + 'px'\n                localRk += 1\n                if localRk == month.nPhotos\n                    # jump to a new month\n                    monthRk += 1\n                    month    = months[monthRk]\n                    localRk  = 0\n                    col      = 0\n                    rowY    += rowHeight + monthTopPadding\n                else\n                    # go to next column or to a new row if we are at last column\n                    col  += 1\n                    if col is nThumbsPerRow\n                        rowY += rowHeight\n                        col   = 0\n                thumb = thumb.prev\n            if firstVisibleThumb\n                # move viewPort in order to keep the same area visible after\n                # having moved the thumbs\n                deltaTop =   firstVisibleThumb.top   \\\n                           - parseInt(firstVisibleThumb.el.style.top)\n                @viewPort$.scrollTop -= deltaTop\n\n\n        ###*\n         * Called when we get from the server the ids of the thumbs that have\n         * been created or moved\n         * @param  {Array} files     [{id},..,{id}] in chronological order\n         * @param  {Integer} fstFileRk The rank of the first file of files\n        ###\n        _updateThumb = (files, fstFileRk)=>\n            lstFileRk = fstFileRk + files.length - 1\n            bufr      = buffer\n            thumb     = bufr.first\n            firstThumbToUpdate   = safeZone.firstThumbToUpdate\n            firstThumbRkToUpdate = firstThumbToUpdate.rank\n            last  = bufr.last\n            first = bufr.first\n            ##\n            # 1/ if firstThumbRkToUpdate is not in the files range (can happen\n            # if the safeZone has been updated while waiting for the list of\n            # files from the server), then move firstThumbRkToUpdate to the\n            # thumb corresponding to first or last file of files.\n            if firstThumbRkToUpdate < fstFileRk\n                th = firstThumbToUpdate.prev\n                while true\n                    if th == bufr.first\n                        return\n                    if th.rank == fstFileRk\n                        firstThumbToUpdate   = th\n                        firstThumbRkToUpdate = th.rank\n                        break\n                    th = th.prev\n            if lstFileRk < firstThumbRkToUpdate\n                th = firstThumbToUpdate.next\n                while true\n                    if th == bufr.last\n                        return\n                    if th.rank == lstFileRk\n                        firstThumbToUpdate   = th\n                        firstThumbRkToUpdate = th.rank\n                        break\n                    th = th.next\n            ##\n            # 2/ update src of thumbs that are after the firstThumbRkToUpdate\n            thumb = firstThumbToUpdate\n            for file_i in [firstThumbRkToUpdate-fstFileRk..files.length-1] by 1\n                file                         = files[file_i]\n                fileId                       = file.id\n                thumb$                       = thumb.el\n                thumb$.file                  = file\n                thumb$.firstElementChild.src = \"files/photo/thumbs/#{fileId}.jpg\"\n                # thumb$.src                 = 'files/photo/thumbs/fast/#{fileId}'\n                thumb$.dataset.id            = fileId\n                thumb.id                     = fileId\n                thumb                        = thumb.prev\n                if @.selected[fileId]\n                    thumb$.setAttribute('aria-selected', true)\n                    @selected[fileId] = thumb$\n                else\n                    thumb$.setAttribute('aria-selected', false)\n            ##\n            # 3/ update src of thumbs that are before the firstThumbRkToUpdate\n            thumb = firstThumbToUpdate.next\n            for file_i in [firstThumbRkToUpdate-fstFileRk-1..0] by -1\n                file   = files[file_i]\n                fileId = file.id\n                thumb$            = thumb.el\n                thumb$.file       = file\n                thumb$.src        = \"files/photo/thumbs/#{fileId}.jpg\"\n                # thumb$.src        = \"files/photo/thumbs/fast/#{fileId}\"\n                thumb$.dataset.id = fileId\n                thumb.id          = fileId\n                thumb             = thumb.next\n                if @selected[fileId]\n                    thumb$.setAttribute('aria-selected', true)\n                    @selected[fileId] = thumb$\n                else\n                    thumb$.setAttribute('aria-selected', false)\n            ##\n            # 3/ default selection management : can not be done before the id of\n            # the first thumb is given by the server, that's why it is done here\n            if isDefaultToSelect\n                @_toggleOnThumb$(bufr.first.el)\n                isDefaultToSelect = false\n\n\n        _getBufferNextFirst = ()=>\n            bufr = buffer\n            nextFirstRk     = bufr.firstRk - 1\n            if nextFirstRk == -1\n                return\n            bufr.nextFirstRk     = nextFirstRk\n\n            initMonthRk = safeZone.endMonthRk\n            for monthRk in [initMonthRk..0] by -1\n                month = months[monthRk]\n                if month.firstRk <= nextFirstRk\n                    break\n            bufr.nextFirstMonthRk = monthRk\n            localRk               = nextFirstRk - month.firstRk\n            inMonthRow            = Math.floor(localRk/nThumbsPerRow)\n            bufr.nextFirstY       = month.y + monthTopPadding + inMonthRow*rowHeight\n            bufr.nextFirstCol     = localRk % nThumbsPerRow\n\n\n        _getBufferNextLast = ()=>\n            bufr = buffer\n            nextLastRk     = bufr.lastRk + 1\n            if nextLastRk == @nPhotos\n                return\n            bufr.nextLastRk = nextLastRk\n\n            initMonthRk = safeZone.firstMonthRk\n            for monthRk in [initMonthRk..months.length-1] by 1\n                month = months[monthRk]\n                if nextLastRk <= month.lastRk\n                    break\n            bufr.nextLastMonthRk = monthRk\n            localRk              = nextLastRk - month.firstRk\n            inMonthRow           = Math.floor(localRk/nThumbsPerRow)\n            bufr.nextLastY       = month.y + monthTopPadding + inMonthRow*rowHeight\n            bufr.nextLastCol     = localRk % nThumbsPerRow\n\n        ###*\n         * after a scroll throttle, will compute the safe zone\n        ###\n        _computeSafeZone = () =>\n            # 1/ init the start of the safe zone at the start of the viewport\n            _SZ_initStartPoint()\n            # 2/ move the start of the safe zone in order to have a margin\n            _SZ_setMarginAtStart()\n            # 3/ init the end of the safe zone: start of SZ + nb of thumbs in SZ\n            hasReachedLastPhoto = _SZ_initEndPoint()\n            # 4/ if the end of SZ is at the last photo, move up the start of the\n            # SZ in order to have if possible nThumbsInSafeZone\n            if hasReachedLastPhoto\n                _SZ_bottomCase()\n\n        ###*\n         * set the start of the safe zone on the top of the viewport.\n        ###\n        _SZ_initStartPoint = ()=>\n            SZ = safeZone\n            Y  = current_scrollTop\n            for month, monthRk in @months\n                if month.yBottom > Y\n                    break\n            inMonthRow = Math.floor((Y-month.y-monthTopPadding)/rowHeight)\n            if inMonthRow < 0\n                # happens if the viewport is in the header of a month\n                inMonthRow = 0\n            SZ.firstRk            = month.firstRk + inMonthRow * nThumbsPerRow\n            SZ.firstY             = month.y + monthTopPadding + inMonthRow * rowHeight\n            SZ.firstMonthRk       = monthRk\n            SZ.firstCol           = 0\n            SZ.firstThumbToUpdate = null\n            SZ.firstInMonthRow    = inMonthRow\n            SZ.firstVisibleRk     = SZ.firstRk # true because it is the init of SZ\n            _selectCurrentIndex(monthRk)\n\n\n        ###*\n         * move up the start of the safe zone of 'nRowsInSafeZoneMargin' rows\n         * @return {[type]} [description]\n        ###\n        _SZ_setMarginAtStart= () =>\n            SZ = safeZone\n            inMonthRow = SZ.firstInMonthRow - nRowsInSafeZoneMargin\n\n            if inMonthRow >= 0\n                # the row that we are looking for is in the current month\n                # (monthRk and col are not changed then)\n                month = @months[SZ.firstMonthRk]\n                SZ.firstRk = month.firstRk + inMonthRow * nThumbsPerRow\n                SZ.firstY  = month.y + monthTopPadding + inMonthRow*rowHeight\n                SZ.firstInMonthRow = inMonthRow\n                return\n\n            else\n                # the row that we are looking for is before the current month\n                # (col remains 0)\n                rowsSeen = SZ.firstInMonthRow\n                for j in [SZ.firstMonthRk-1..0] by -1\n                    month = @months[j]\n                    if rowsSeen + month.nRows >= nRowsInSafeZoneMargin\n                        inMonthRow         = month.nRows - nRowsInSafeZoneMargin + rowsSeen\n                        SZ.firstRk         = month.firstRk + inMonthRow * nThumbsPerRow\n                        SZ.firstY          = month.y + monthTopPadding + inMonthRow*rowHeight\n                        SZ.firstInMonthRow = inMonthRow\n                        SZ.firstMonthRk    = j\n                        return\n\n                    else\n                        rowsSeen += month.nRows\n\n            SZ.firstRk         = 0\n            SZ.firstMonthRk    = 0\n            SZ.firstInMonthRow = 0\n            SZ.firstCol        = 0\n            SZ.firstY          = monthTopPadding\n\n\n        ###*\n         * Finds the end point of the safeZone, which is 'nThumbsInSafeZone'\n         * after the first thumb of the SZ (the number of thumb in the safe zone\n         * and in the buffer is constant)\n         * Returns true if the safeZone end pointer should be after the last\n         * thumb\n        ###\n        _SZ_initEndPoint = () =>\n            SZ = safeZone\n            lastRk = SZ.firstRk + nThumbsInSafeZone - 1\n            # 1/ check if end of safeZone should be after the last thumb\n            if lastRk >= @nPhotos\n                lastRk = @nPhotos - 1\n                safeZone.lastRk = lastRk\n                # other safeZone end info are useless (safeZone is going down)\n                return true\n            # 2/ otherwise find the month containing the last thumb of the SZ\n            for monthRk in [SZ.firstMonthRk..months.length-1]\n                month = months[monthRk]\n                if lastRk <= month.lastRk\n                    break\n            # 3/ update safeZoone data\n            inMonthRk  = lastRk - month.firstRk\n            inMonthRow = Math.floor(inMonthRk/nThumbsPerRow)\n            safeZone.lastRk     = lastRk\n            safeZone.endMonthRk = monthRk\n            safeZone.endCol     = inMonthRk % nThumbsPerRow\n            safeZone.endY       = month.y         +\n                                  monthTopPadding +\n                                  inMonthRow*rowHeight\n            return false\n\n        ###*\n         * if the safe zone is bellow the last thumb => move up the safe zone\n        ###\n        _SZ_bottomCase = ()=>\n            SZ = safeZone\n            months       = @months\n            monthRk      = months.length - 1\n            thumbsSeen   = 0\n            thumbsTarget = nThumbsInSafeZone\n            for monthRk in [monthRk..0] by -1\n                month = months[monthRk]\n                thumbsSeen += month.nPhotos\n                if thumbsSeen >= thumbsTarget\n                    break\n            if thumbsSeen < thumbsTarget\n                # happens if the number of photo is smaller than the number\n                # in safezone (nThumbsInSafeZone), it means that safe zone\n                # begins at the first photo\n                SZ.firstMonthRk    = 0\n                SZ.firstInMonthRow = 0\n                SZ.firstRk         = 0\n                SZ.firstY          = month.y + cellPadding + monthHeaderHeight\n            else\n                rk         = @nPhotos - thumbsTarget\n                inMonthRk  = rk - month.firstRk\n                inMonthRow = Math.floor(inMonthRk / nThumbsPerRow)\n\n                SZ.firstMonthRk    = monthRk\n                SZ.firstInMonthRow = inMonthRow\n                SZ.firstCol        = inMonthRk % nThumbsPerRow\n                SZ.firstRk         = rk\n                SZ.firstY          = month.y           +\n                                     cellPadding       +\n                                     monthHeaderHeight +\n                                     inMonthRow * rowHeight\n\n\n\n        _moveBufferToBottom= (nToMove, startRk, startCol, startY, monthRk)=>\n            monthRk_initial = monthRk\n            rowY    = startY\n            col     = startCol\n            month   = @months[monthRk]\n            localRk = startRk - month.firstRk\n\n            # by default the firstThumbToUpdate will be the first moved down\n            # (ie buffer.first :-)\n            if safeZone.firstThumbToUpdate == null\n                safeZone.firstThumbToUpdate = buffer.first\n\n            for rk in [startRk..startRk+nToMove-1] by 1\n                if localRk == 0\n                    _insertMonthLabel(month)\n                thumb = buffer.first\n                thumb$              = thumb.el\n                thumb$.dataset.rank = rk\n                thumb.rank          = rk\n                thumb.monthRk       = monthRk\n                thumb$.src          = ''\n                thumb$.dataset.id   = ''\n                style      = thumb$.style\n                style.top  = rowY + 'px'\n                style.left = (marginLeft + col*colWidth) + 'px'\n                # if during the move of the thumbs we meet the thumb with the\n                # firstVisibleRk, then this thumb is the firstThumbToUpdate\n                if rk == safeZone.firstVisibleRk\n                    safeZone.firstThumbToUpdate = thumb\n                buffer.last      = buffer.first\n                buffer.first     = buffer.first.prev\n                buffer.firstRk   = buffer.first.rank\n                buffer.last.rank = rk\n                localRk += 1\n                if localRk == month.nPhotos\n                    # jump to a new month\n                    monthRk += 1\n                    month    = @months[monthRk]\n                    localRk  = 0\n                    col      = 0\n                    rowY    += rowHeight + monthTopPadding\n                else\n                    # go to next column or to a new row if we are at last column\n                    col  += 1\n                    if col is nThumbsPerRow\n                        rowY += rowHeight\n                        col   = 0\n\n            buffer.lastRk  = rk - 1\n            buffer.firstRk = buffer.first.rank\n            # store the parameters of the thumb that is just after the last one\n            buffer.nextLastRk      = rk\n            buffer.nextLastCol     = col\n            buffer.nextLastY       = rowY\n            buffer.nextLastMonthRk = monthRk\n\n\n\n        _moveBufferToTop= (nToMove, startRk, startCol, startY, monthRk)=>\n            rowY    = startY\n            col     = startCol\n            month   = @months[monthRk]\n            localRk = startRk - month.firstRk\n\n            # by default the firstThumbToUpdate will be the first moved down\n            # (ie buffer.first :-)\n            if safeZone.firstThumbToUpdate == null\n                safeZone.firstThumbToUpdate = buffer.last\n\n            for rk in [startRk..startRk-nToMove+1] by -1\n                thumb               = buffer.last\n                thumb$              = thumb.el\n                thumb$.dataset.rank = rk\n                thumb.rank          = rk\n                thumb.monthRk       = monthRk\n                thumb$.src          = ''\n                thumb$.dataset.id   = ''\n                style               = thumb$.style\n                style.top           = rowY + 'px'\n                style.left          = (marginLeft + col*colWidth) + 'px'\n                # if during the move of the thumbs we meet the thumb with the\n                # firstVisibleRk, then this thumb is the firstThumbToUpdate\n                if rk == safeZone.firstVisibleRk\n                    safeZone.firstThumbToUpdate = thumb\n                buffer.first      = buffer.last\n                buffer.last       = buffer.last.next\n                buffer.lastRk     = buffer.last.rank\n                buffer.first.rank = rk\n                localRk          -= 1\n                if localRk == -1\n                    if rk == 0\n                        rk = -1\n                        break\n                    # jump to a new month\n                    _insertMonthLabel(month)\n                    monthRk -= 1\n                    month    = @months[monthRk]\n                    localRk  = month.nPhotos - 1\n                    col      = month.lastThumbCol\n                    rowY    -= cellPadding + monthHeaderHeight + rowHeight\n                else\n                    # go to next column or to a new row if we are at last column\n                    col  -= 1\n                    if col is -1\n                        rowY -= rowHeight\n                        col   = nThumbsPerRow - 1\n\n            buffer.firstRk = rk + 1\n            buffer.lastRk  = buffer.last.rank\n\n\n\n        _insertMonthLabel = (month)=>\n            if month.label$\n                label$ = month.label$\n            else\n                label$ = document.createElement('div')\n                label$.classList.add('long-list-month-label')\n                @thumbs$.appendChild(label$)\n                month.label$ = label$\n            label$.textContent = month.date.format('MMMM YYYY')\n            label$.style.top   = (month.y + monthLabelTop) + 'px'\n            label$.style.left  = Math.round(marginLeft/2) + 'px'\n\n\n\n        _indexClickHandler = (e) =>\n            monthRk = e.target.dataset.monthRk\n            if monthRk\n                @viewPort$.scrollTop = @months[monthRk].y\n                _adaptIndex()\n\n\n\n        _indexMouseEnter = () =>\n            @index$.classList.add('hardVisible')\n            indexVisible = false\n\n\n\n        _indexMouseLeave = () =>\n            @index$.classList.add('visible')\n            @index$.classList.remove('hardVisible')\n            lazyHideIndex()\n\n        ####\n        # END of _DOM_controlerInit\n        _getStaticDimensions()\n        _resizeHandler()       # compute buffer and safeZone sizes\n        _initBuffer()          # initialize the buffer\n        @noScrollScheduled      = true\n\n        ####\n        # bind events\n        @thumbs$.addEventListener(   'click'      , @_clickHandler    )\n        @thumbs$.addEventListener(   'dblclick'   , @_dblclickHandler )\n        @viewPort$.addEventListener( 'scroll'     , _scrollHandler    )\n        @index$.addEventListener(    'click'      , _indexClickHandler)\n        @index$.addEventListener(    'mouseenter' , _indexMouseEnter  )\n        @index$.addEventListener(    'mouseleave' , _indexMouseLeave  )\n\n\n\n################################################################################\n## MOUSE AND KEYBOARD EVENTS ##\n\n\n    _clickHandler: (e) =>\n        th = e.target\n        while (not th.classList.contains('thumb'))\n            th = th.parentElement\n            return if th.classList.contains('thumbs')\n\n        if !@_toggleOnThumb$(th) then return null\n        @_lastSelectedCol = @_coordonate.left(th)\n        viewPortTopY    = @viewPort$.scrollTop\n        viewPortBottomY = viewPortTopY + @viewPort$.clientHeight\n        thTopY    = @_coordonate.top(th)\n        thBottomY = thTopY + @thumbHeight\n        if viewPortBottomY < thBottomY\n            th.scrollIntoView(false)\n        if thTopY < viewPortTopY\n            th.scrollIntoView(true)\n\n\n    _dblclickHandler: (e) =>\n        th = e.target\n        while (not th.classList.contains('thumb'))\n            th = th.parentElement\n            return if th.classList.contains('thumbs')\n\n        @_toggleOnThumb$(th)\n        @_lastSelectedCol = @_coordonate.left(th)\n        @modal.onYes()\n\n\n    ###*\n     * toogles on a thumb.\n     * Returns null if the thumb is already selected or if there is no image id\n     * associated yet\n    ###\n    _toggleOnThumb$: (thumb$)->\n        # the thumb is empty (no image yet)=> we can't select it\n        if thumb$.dataset.id == ''\n            return null\n        # the thums is already selected => we can't select it again\n        if @selected[thumb$.dataset.id]\n            return null\n        # otherwise we can toggle\n        @_unselectAll()\n        thumb$.setAttribute('aria-selected', true)\n        @selected[thumb$.dataset.id] = thumb$\n\n\n    _unselectAll: () =>\n        for id, thumb$ of @selected\n            if typeof(thumb$) == 'object'\n                thumb$.setAttribute('aria-selected', false)\n                @selected[id] = false\n\n\n    _getSelectedThumb$: ()->\n        for id, thumb$ of @selected\n            if typeof(thumb$) == 'object'\n                return thumb$\n        return null\n\n\n    _selectNextThumb: ()->\n        # 1/ look for the selected thumb element\n        for id, thumb$ of @selected\n            if typeof(thumb$) == 'object'\n                break\n        # 2/ get next thumb$ and toggle\n        nextThumb$ = @_getNextThumb$(thumb$)\n        if nextThumb$ == null then return null\n        @_lastSelectedCol = @_coordonate.left(nextThumb$)\n        if !@_toggleOnThumb$(nextThumb$) then return null\n        @_moveViewportToBottomOfThumb$(nextThumb$)\n\n\n    _selectPreviousThumb: ()->\n        # 1/ look for the selected thumb element\n        thumb$ = @_getSelectedThumb$()\n        # 2/ get previous thumb$ and toggle\n        prevThumb$ = @_getPreviousThumb$(thumb$)\n        if prevThumb$ == null then return null\n        @_lastSelectedCol = @_coordonate.left(prevThumb$)\n        if !@_toggleOnThumb$(prevThumb$) then return null\n        @_moveViewportToTopOfThumb$(prevThumb$)\n\n\n    _selectThumbUp: ()->\n        thumb$ = @_getSelectedThumb$()\n        if thumb$ == null\n            return null\n        if thumb$.dataset.rank == '0'\n            return null\n        if @_lastSelectedCol == null\n            left = @_coordonate.left(thumb$)\n        else\n            left = @_lastSelectedCol\n        top  = thumb$.style.top\n        th   = @_getPreviousThumb$(thumb$)\n        if th == null then return null\n        while th.style.left != left\n            if th.dataset.rank == '0'\n                @_lastSelectedCol = @_coordonate.left(th)\n                if !@_toggleOnThumb$(th) then return null\n                @_moveViewportToTopOfThumb$(th)\n                return th\n            if th.style.top != top\n                # we changed of row, continue only if there are thumbs on the\n                # right\n                if @_coordonate.left(th) <= left\n                    if !@_toggleOnThumb$(th) then return null\n                    @_moveViewportToTopOfThumb$(th)\n                    return th\n            th = @_getPreviousThumb$(th)\n            if th == null then return null\n        if !@_toggleOnThumb$(th) then return null\n        @_moveViewportToTopOfThumb$(th)\n        return th\n\n\n    _selectThumbDown: ()->\n        thumb$ = @_getSelectedThumb$()\n        if thumb$ == null\n            return null\n        if @_coordonate.rank(thumb$) == @nPhotos - 1\n            return null\n        if @_lastSelectedCol == null\n            left = @_coordonate.left(thumb$)\n        else\n            left = @_lastSelectedCol\n        top  = thumb$.style.top\n        th   = @_getNextThumb$(thumb$)\n        if th == null then return null\n        hasAlreadyChangedOfRow = false\n        while @_coordonate.left(th) != left\n            if @_coordonate.rank(th) == @nPhotos - 1\n                @_lastSelectedCol = @_coordonate.left(th)\n                if !@_toggleOnThumb$(th) then return null\n                @_moveViewportToBottomOfThumb$(th)\n                return th\n            if th.style.top != top\n                # we changed of row, continue only if there are thumbs on the\n                # right\n                if hasAlreadyChangedOfRow\n                    th = @_getPreviousThumb$(th)\n                    if th == null then return null\n                    if !@_toggleOnThumb$(th) then return null\n                    @_moveViewportToBottomOfThumb$(th)\n                    return th\n                hasAlreadyChangedOfRow = true\n                top = th.style.top\n                if @_coordonate.left(th) >= left\n                    if !@_toggleOnThumb$(th) then return null\n                    @_moveViewportToBottomOfThumb$(th)\n                    return th\n            th = @_getNextThumb$(th)\n            if th == null then return null\n        if !@_toggleOnThumb$(th) then return null\n        @_moveViewportToBottomOfThumb$(th)\n        return th\n\n\n    _selectEndLineThumb: ()->\n        thumb$ = @_getSelectedThumb$()\n        if thumb$ == null\n            return\n        if @_coordonate.rank(thumb$) == @nPhotos - 1\n            return\n        if @_lastSelectedCol == null\n            left = @_coordonate.left(thumb$)\n        else\n            left = @_lastSelectedCol\n        top  = thumb$.style.top\n        th   = @_getNextThumb$(thumb$)\n        if th == null then return null\n        while th.style.top == top\n            if @_coordonate.rank(th) == @nPhotos - 1\n                @_lastSelectedCol = @_coordonate.left(th)\n                if !@_toggleOnThumb$(th) then return null\n                @_moveViewportToBottomOfThumb$(th)\n                return\n            th = @_getNextThumb$(th)\n            if th == null then return null\n        th = @_getPreviousThumb$(th)\n        if th == null then return null\n        @_lastSelectedCol = @_coordonate.left(th)\n        if !@_toggleOnThumb$(th) then return null\n        @_moveViewportToBottomOfThumb$(th)\n        return\n\n\n    _selectStartLineThumb: ()->\n        thumb$ = @_getSelectedThumb$()\n        if thumb$ == null\n            return\n        if Number(thumb$.dataset.rank) == 0\n            return\n        if @_lastSelectedCol == null\n            left = @_coordonate.left(thumb$)\n        else\n            left = @_lastSelectedCol\n        top = thumb$.style.top\n        th  = @_getPreviousThumb$(thumb$)\n        if th == null then return null\n        while th.style.top == top\n            if @_coordonate.rank(th) == 0\n                @_lastSelectedCol = @_coordonate.left(th)\n                if !@_toggleOnThumb$(th) then return null\n                @_moveViewportToBottomOfThumb$(th)\n                return\n            th = @_getPreviousThumb$(th)\n        th = @_getNextThumb$(th)\n        if th == null then return null\n        @_lastSelectedCol = @_coordonate.left(th)\n        if !@_toggleOnThumb$(th) then return null\n        @_moveViewportToBottomOfThumb$(th)\n        return\n\n\n    _coordonate:\n        top: (thumb$)->\n            return parseInt(thumb$.style.top, 10)\n        left: (thumb$)->\n            return parseInt(thumb$.style.left, 10)\n        rank: (thumb$)->\n            return thumb$.dataset.rank\n\n\n    _selectPageDownThumb: () ->\n        viewPortBottomY = @viewPort$.scrollTop + @viewPort$.clientHeight\n        thumb$    = @_getSelectedThumb$()\n        if thumb$ == null then return\n        th        = thumb$\n        thTopY    = @_coordonate.top(th)\n        thBottomY = thTopY + @thumbHeight\n        while thBottomY <= viewPortBottomY\n            th = @_selectThumbDown()\n            if th == null then return\n            thTopY    = @_coordonate.top(th)\n            thBottomY = thTopY + @thumbHeight\n        th.scrollIntoView(true)\n        @_moveViewportToTopOfThumb$(th)\n\n\n    _selectPageUpThumb: () ->\n        viewPortTopY = @viewPort$.scrollTop\n        thumb$ = @_getSelectedThumb$()\n        th     = thumb$\n        thTopY = @_coordonate.top(th)\n        while thTopY >= viewPortTopY\n            th = @_selectThumbUp()\n            if th == null\n                return\n            thTopY    = @_coordonate.top(th)\n        th.scrollIntoView(false)\n\n\n    _moveViewportToBottomOfThumb$: (thumb$)=>\n        thumb$Top       = @_coordonate.top(thumb$)\n        thumb$Bottom    = thumb$Top + @thumbHeight\n        viewPortBottomY = @viewPort$.scrollTop + @viewPort$.clientHeight\n        if viewPortBottomY < thumb$Bottom\n            thumb$.scrollIntoView(false)\n            @_scrollHandler()\n\n    ###*\n     * will move the viewport so that the top of the given thumb is at the top\n     * of the viewport, but only if the top of the thumb is above the viewport\n     * @param  {element} thumb$ # the thumb\n    ###\n    _moveViewportToTopOfThumb$: (thumb$)->\n        thumb$Top   = @_coordonate.top(thumb$)\n        viewPortTop = @viewPort$.scrollTop\n        # find the in month row\n        thumbRk = parseInt(thumb$.dataset.rank)\n        for month, monthRk in @months\n            if thumbRk <= month.lastRk\n                break\n        inMonthRow = Math.floor((thumbRk - month.firstRk) / @nThumbsPerRow)\n\n        if inMonthRow == 0\n            if month.y + @monthLabelTop < @viewPort$.scrollTop\n                @viewPort$.scrollTop = month.y + @monthLabelTop\n                @_scrollHandler()\n        else\n            if thumb$Top < viewPortTop\n                thumb$.scrollIntoView(true)\n                @_scrollHandler()\n                return\n\n\n\n    ###*\n     * @param  {Element} thumb$ # the element corresponding to the thumb\n     * @return {null}        # return null if on first thumb\n     * @return {Element}     # the previous element thumb or null if on first\n     *                         thumb of first of the buffer\n    ###\n    _getPreviousThumb$: (thumb$) ->\n        # 1/ check we are not on the first thumb\n        return null if thumb$.dataset.rank is '0'\n        # 2/ check we are not on the first displayed by the buffer\n        return null if thumb$ is @buffer.first.el\n        # 3/ get the previous thumb\n        th = thumb$.previousElementSibling\n        unless th?\n            # case if thumb$ is the first element => jump to the last one\n            # (what does not means it is the first displayed)\n            th = thumb$.parentNode.lastElementChild\n            # case there is only one photo\n            return null if th is thumb$\n\n        while not th.classList.contains 'thumb'\n            # case of a month label\n            th = th.previousElementSibling\n            unless th?\n                # case if thumb$ is the first element => jump to the last one\n                # (what does not means it is the first displayed)\n                th = thumb$.parentNode.lastElementChild\n                # case there is only one photo\n                return null if th is thumb$\n\n        return th\n\n    ###*\n     *\n     * @param  {Element} thumb$ # the start thumb element\n     * @return {Element|null}   # returns an element or null if on the last\n     *                            thumb or the last of the buffer\n    ###\n    _getNextThumb$: (thumb$) ->\n        # 1/ check we are not on the last thumb\n        return null if @_coordonate.rank(thumb$) is @nPhotos - 1\n        # 2/ check we are not on the last displayed by the buffer\n        return null if thumb$ is @buffer.last.el\n        # 3/ get the next thumb\n        th = thumb$.nextElementSibling\n        unless th?\n            # case if thumb$ is the last element => jump to the first one\n            # (what does not means it is the oldest displayed)\n            th = thumb$.parentNode.firstElementChild\n            # case there is only one photo\n            return null if th is thumb$\n\n        while not th.classList.contains 'thumb'\n            # case of a month label\n            th = th.nextElementSibling\n            unless th?\n                # case if thumb$ is the last element => jump to the first one\n                # (what does not means it is the oldest displayed)\n                th = thumb$.parentNode.firstElementChild\n                # case there is only one photo\n                return null if th is thumb$\n\n        return th\n\n    ###*\n     * a helper in charge of getting the width in px of the scrollbar this one\n     * appears\n    ###\n    _getScrollBarWidth : ()->\n      inner = document.createElement('p')\n      inner.style.width  = \"100%\"\n      inner.style.height = \"200px\"\n\n      outer = document.createElement('div')\n      outer.style.position   = \"absolute\"\n      outer.style.top        = \"0px\"\n      outer.style.left       = \"0px\"\n      outer.style.visibility = \"hidden\"\n      outer.style.width      = \"200px\"\n      outer.style.height     = \"150px\"\n      outer.style.overflow   = \"hidden\"\n      outer.appendChild (inner)\n\n      document.body.appendChild (outer)\n      w1 = inner.offsetWidth\n      outer.style.overflow = 'scroll'\n      w2 = inner.offsetWidth\n      if (w1 == w2)\n        w2 = outer.clientWidth\n\n      document.body.removeChild (outer)\n\n      return (w1 - w2)\n\n","BaseView               = require 'lib/base_view'\nappIframeTemplate      = require 'templates/application_iframe'\nAppCollection          = require 'collections/application'\nStackAppCollection     = require 'collections/stackApplication'\nNotificationCollection = require 'collections/notifications'\nDeviceCollection       = require 'collections/device'\nNavbarView             = require 'views/navbar'\nAccountView            = require 'views/account'\nHelpView               = require 'views/help'\nConfigApplicationsView = require 'views/config_applications'\nMarketView             = require 'views/market'\nApplicationsListView   = require 'views/home'\nSocketListener         = require 'lib/socket_listener'\nUser                   = require 'models/user'\nIntentManager          = require 'lib/intent_manager'\n\n# View describing main screen for user once he is logged\nmodule.exports = class HomeView extends BaseView\n    el: 'body'\n\n    template: require 'templates/layout'\n\n    subscriptions:\n        'backgroundChanged': 'changeBackground'\n\n\n    constructor: ->\n        @apps          = new AppCollection window.applications\n        @stackApps     = new StackAppCollection window.stack_applications\n        @devices       = new DeviceCollection window.devices\n        @market        = new AppCollection window.market_applications\n        @notifications = new NotificationCollection()\n        @intentManager = new IntentManager()\n        SocketListener.watch @apps\n        SocketListener.watch @notifications\n        SocketListener.watch @devices\n        super\n\n\n    afterRender: =>\n        @navbar = new NavbarView @apps, @notifications\n        @applicationListView = new ApplicationsListView @apps, @market\n        @configApplications = new ConfigApplicationsView(\n            @apps, @devices, @stackApps, @market)\n        @accountView = new AccountView()\n        @helpView = new HelpView()\n        @marketView = new MarketView @apps, @market\n\n        @frames = @$ '#app-frames'\n        @content = @$ '#content'\n        @changeBackground window.app.instance.background\n        @backButton = @$ '.back-button'\n        @backButton.hide()\n\n        $(window).resize @forceIframeRendering\n        @forceIframeRendering()\n\n\n    ### Functions ###\n\n\n    # Change the background of the content element. It builds the background\n    # image url with given value. If no param is given of default background is\n    # given, background image is removed.\n    changeBackground: (background='background_07') ->\n        if background is undefined or background is null\n            @content.css 'background_07.jpg', 'none'\n        if background is 'background-none'\n            @content.css 'background-image', 'none'\n        else\n            # It's a pre-defined background\n            if background.indexOf('background') > -1\n                name = background.replace '-', '_'\n                val = \"url('/img/backgrounds/#{name}.jpg')\"\n            else\n                val = \"url('/api/backgrounds/#{background}/picture.jpg')\"\n\n            @content.css 'background-image', val\n\n\n    # Send a logout request to server then reload current window to redirect\n    # user to automatically redirect user to login page (he's not logged\n    # anymore, so cozy proxy will do the redirection).\n    logout: (event) =>\n        user = new User()\n        user.logout\n            success: (data) =>\n                window.location = window.location.origin + '/login/'\n            error: =>\n                alert 'Server error occured, logout failed.'\n\n    displayView: (view, title) =>\n\n        if title?\n            title = title.substring 6\n        else\n            title ?= t 'home'\n\n        window.document.title = title\n        $('#current-application').html title\n\n        if view is @applicationListView\n            @backButton.hide()\n        else\n            @backButton.show()\n\n\n        displayView = =>\n            @frames.hide()\n            view.$el.hide()\n            @content.show()\n            $('#home-content').append view.$el\n            view.$el.show()\n\n            @currentView = view\n            @forceIframeRendering()\n            @content.scrollTop 0\n\n        if @currentView?\n\n            if view is @currentView\n                @frames.hide()\n                @content.show()\n                @forceIframeRendering()\n                return\n\n            @currentView.$el.hide()\n            @currentView.$el.detach()\n            displayView()\n        else\n            displayView()\n\n    # Display application manager page, hides app frames, active home button.\n    displayApplicationsList: =>\n        @displayView @applicationListView\n        window.document.title = t \"cozy home title\"\n\n    displayApplicationsListEdit: =>\n        @displayView @applicationListView, t \"cozy home title\"\n\n    # Display application manager page, hides app frames, active home button.\n    displayMarket: =>\n        @displayView @marketView, t \"cozy app store title\"\n\n    # Display account manager page, hides app frames, active account button.\n    displayAccount: =>\n        @displayView @accountView, t 'cozy account title'\n\n    displayHelp: =>\n        @displayView @helpView, t \"cozy help title\"\n\n    displayConfigApplications: =>\n        @displayView @configApplications, t \"cozy applications title\"\n\n\n    displayUpdateApplication: (slug) =>\n        @displayView @configApplications, t \"cozy applications title\"\n        window.app.routers.main.navigate 'config-applications', false\n\n        # When the route is called on browser loading, it must wait for\n        # apps list to be retrieved\n        method = @configApplications.openUpdatePopover\n        action = method.bind @configApplications, slug\n        timeout = null\n\n        if @apps.length is 0\n            @listenToOnce @apps, 'reset', ->\n                # stop the timeout so the action is not executed twice\n                clearTimeout timeout\n                action()\n\n            # if there is no app installed, this timeout will trigger\n            # the action\n            timeout = setTimeout action, 1500\n        else\n            # wait for 500ms before triggering the popover opening, because\n            # the configApplications view is not completely rendered yet (??)\n            setTimeout action, 500\n\n\n    displayUpdateStack: ->\n        @displayView @configApplications\n        window.document.title = t \"cozy applications title\"\n        window.app.routers.main.navigate 'config-applications', false\n\n        # wait for 500ms before triggering the popover opening, because\n        # the configApplications view is not completely rendered yet (??)\n        setTimeout =>\n            @configApplications.onUpdateStackClicked()\n        , 500\n\n\n    # Get frame corresponding to slug if it exists, create before either.\n    # Then this frame is displayed while we hide content div and other app\n    # iframes. Then currently selected frame is registered\n    #\n    # Display a spinner if it's the first time that the application is loaded.\n    displayApplication: (slug, hash) ->\n        if @apps.length is 0\n            @apps.once 'reset', =>\n                @displayApplication slug, hash\n            return null\n\n        @$(\"#app-btn-#{slug} .spinner\").show()\n        @$(\"#app-btn-#{slug} .icon\").hide()\n\n        frame = @$(\"##{slug}-frame\")\n        onLoad = =>\n\n            # We display back the iframes\n            @frames.css 'top', '0'\n            @frames.css 'left', '0'\n            @frames.css 'position', 'inherit'\n            @frames.show()\n\n            @content.hide()\n            @backButton.show()\n\n            @$('#app-frames').find('iframe').hide()\n            frame.show()\n\n            @selectedApp = slug\n\n            name = @apps.get(slug).get('name')\n            name = '' if not name?\n            window.document.title = \"Cozy - #{name}\"\n            $(\"#current-application\").html name\n\n            @$(\"#app-btn-#{slug} .spinner\").hide()\n            @$(\"#app-btn-#{slug} .icon\").show()\n\n\n        if frame.length is 0\n            frame = @createApplicationIframe slug, hash\n\n            # We show frames right now because to load properly the app\n            # requires a proper height.\n            @frames.show()\n\n            # Then we hide the frames by moving them far.\n            @frames.css 'top', '-9999px'\n            @frames.css 'left', '-9999px'\n            @frames.css 'position', 'absolute'\n\n            frame.once 'load', onLoad\n\n        # if the app was already open, we want to change its hash\n        # only if there is a hash in the home given url.\n        else if hash\n            contentWindow = frame.prop('contentWindow')\n            currentHash = contentWindow.location.hash.substring 1\n            onLoad()\n\n        else if frame.is(':visible')\n            frame.prop('contentWindow').location.hash = ''\n            onLoad()\n\n        else\n            onLoad()\n\n    createApplicationIframe: (slug, hash=\"\") ->\n\n        # prepends '#' only if there is an actual hash\n        hash = \"##{hash}\" if hash?.length > 0\n\n        iframeHTML = appIframeTemplate(id: slug, hash:hash)\n        iframe     = @frames.append(iframeHTML)[0].lastChild\n        iframe$    = $(iframe)\n        iframe$.prop('contentWindow').addEventListener 'hashchange', =>\n            location = iframe$.prop('contentWindow').location\n            newhash  = location.hash.replace '#', ''\n            @onAppHashChanged slug, newhash\n\n        @forceIframeRendering()\n        # declare the iframe to the intent manager.\n        # TODO : when each iFrame will\n        # have its own domain, then precise it\n        # (ex : https://app1.joe.cozycloud.cc:8080)\n        @intentManager.registerIframe iframe, '*'\n\n        return iframe$\n\n    onAppHashChanged: (slug, newhash) =>\n        if slug is @selectedApp\n            currentHash = location.hash.substring \"#apps/#{slug}/\".length\n            if currentHash isnt newhash\n                app?.routers.main.navigate \"apps/#{slug}/#{newhash}\", false\n\n            # Ugly trick required because app state changes sometime\n            # breaks the iframe layout.\n            @forceIframeRendering()\n\n    ### Configuration ###\n\n    # Ugly trick for redrawing iframes. It's required because sometimes the\n    # browser breaks the Iframe layout (I didn't find any reason for that).\n    forceIframeRendering: =>\n        @frames.find('iframe').height \"99%\"\n        setTimeout =>\n            @frames.find('iframe').height \"100%\"\n        , 10\n\n","BaseView = require 'lib/base_view'\nPopoverDescriptionView = require 'views/popover_description'\nApplicationRow = require 'views/market_application'\nColorButton = require 'widgets/install_button'\nAppCollection = require 'collections/application'\nApplication = require 'models/application'\nslugify = require 'helpers/slugify'\n\nREPOREGEX =  /// ^\n    (https?://)?                   #protocol\n    ([\\da-z\\.-]+\\.[a-z\\.]{2,6})    #domain\n    (:[0-9]{1,5})?                 #optional domain's port\n    ([/\\w \\.-]*)*                  #path to repo\n    (?:\\.git)?                     #.git extension\n    (@[\\da-zA-Z/-]+)?              #branch\n     $ ///\n\nmodule.exports = class MarketView extends BaseView\n    id: 'market-view'\n    template: require 'templates/market'\n    tagName: 'div'\n\n    events:\n        'keyup #app-git-field':'onEnterPressed'\n        \"click #your-app .app-install-button\": \"onInstallClicked\"\n\n    ### Constructor ###\n\n    constructor: (installedApps, marketApps) ->\n        @marketApps = marketApps\n        @installedApps = installedApps\n        super()\n\n\n    afterRender: =>\n        @appList = @$ '#market-applications-list'\n        @appGitField = @$ \"#app-git-field\"\n        @installInfo = @$ \"#add-app-modal .loading-indicator\"\n        @infoAlert = @$ \"#your-app .info\"\n        @infoAlert.hide()\n        @errorAlert = @$ \"#your-app .error\"\n        @errorAlert.hide()\n        @noAppMessage = @$ '#no-app-message'\n        @installAppButton = new ColorButton @$ \"#add-app-submit\"\n        @onAppListsChanged()\n\n        @listenTo @installedApps, 'reset',  @onAppListsChanged\n        @listenTo @installedApps, 'change',  @onAppListsChanged\n        @listenTo @installedApps, 'remove', @onAppListsChanged\n        @listenTo @marketApps, 'reset',  @onAppListsChanged\n\n    # Display only apps with state equals to installed or broken.\n    onAppListsChanged: =>\n        installedApps = new AppCollection @installedApps.filter (app) ->\n            app.get('state') in ['installed', 'stopped', 'broken']\n        installeds = installedApps.pluck 'slug'\n\n        @$('.cozy-app').remove()\n        @marketApps.each (app) =>\n            slug = app.get 'slug'\n            if installeds.indexOf(slug) is -1\n                if @$(\"#market-app-#{app.get 'slug'}\").length is 0\n                    @addApplication app\n\n        if @$('.cozy-app').length is 0\n            @noAppMessage.show()\n\n\n    # Add an application row to the app list.\n    addApplication: (application) =>\n        row = new ApplicationRow(application, @)\n        @noAppMessage.hide()\n        @appList.append row.el\n        appButton = @$(row.el)\n\n    onEnterPressed: (event) =>\n        if event.which is 13 and not @popover?.$el.is(':visible')\n            @onInstallClicked(event)\n        else if event.which is 13\n            @popover?.confirmCallback()\n\n    onInstallClicked: (event) =>\n        data = git: @$(\"#app-git-field\").val()\n\n        @parsedGit data\n        event.preventDefault()\n\n    # parse git url before install application\n    parsedGit: (app) ->\n        parsed = @parseGitUrl app.git\n        if parsed.error\n            @displayError parsed.msg\n        else\n            @hideError()\n            application = new Application(parsed)\n            if @marketApps._byId[application.id]\n                icon = @marketApps._byId[application.id].get 'icon'\n                application.set 'icon', icon\n            data =\n                app: application\n            @showDescription data\n\n    # pop up with application description\n    showDescription: (appWidget) ->\n        @popover = new PopoverDescriptionView\n            model: appWidget.app\n            confirm: (application) =>\n                $('#no-app-message').hide()\n                @popover.hide()\n                @appList.show()\n                if appWidget.$el\n                    @waitApplication appWidget, true\n                    appWidget.$el.addClass 'install'\n                    @runInstallation appWidget.app\n                    , =>\n                        console.log 'application installed', appWidget.app\n                    , =>\n                        @waitApplication appWidget, false\n                else\n                    appWidget.app\n                    @runInstallation appWidget.app\n            cancel: (application) =>\n                @popover.hide()\n                @appList.show()\n        @$el.append @popover.$el\n        @popover.show()\n\n        if $(window).width() <= 640\n            @appList.hide()\n\n\n    waitApplication: (appWidget, toggle = true) ->\n        if toggle\n            appWidget.installInProgress = true\n            appWidget.$('.app-img img').attr 'src', '/img/spinner.svg'\n\n        else\n            appWidget.installInProgress = false\n            appWidget.$('.app-img img').attr 'src', ''\n            appWidget.$el.removeClass 'install'\n\n\n\n    hideApplication: (appWidget, callback) =>\n        # Test if application is installed by the market\n        # or directly with a repo github\n        if appWidget.$el?\n            appWidget.$el.fadeOut =>\n                setTimeout =>\n                    callback() if typeof callback is 'function'\n                , 600\n        else\n            callback()\n\n    runInstallation: (application, shouldRedirect = true, errCallback) =>\n        @hideError()\n\n        cb = shouldRedirect if typeof shouldRedirect is 'function'\n\n        application.install\n            ignoreMySocketNotification: true\n            success: (data) =>\n                if (data?.state is \"broken\") or not data.success\n                    alert data.message\n                else\n                    @resetForm()\n\n                if cb\n                    cb()\n                else if shouldRedirect\n                    app?.routers.main.navigate 'home', true\n\n            error: (jqXHR) =>\n                alert t JSON.parse(jqXHR.responseText).message\n                errCallback() if typeof errCallback is 'function'\n\n    parseGitUrl: (url) ->\n        url = url.trim()\n        url = url.replace 'git@github.com:', 'https://github.com/'\n        url = url.replace 'git://', 'https://'\n        parsed = REPOREGEX.exec url\n        unless parsed?\n            error =\n                error: true\n                msg: t \"Git url should be of form https://.../my-repo.git\"\n            return error\n        [git, proto, domain, port, path, branch] = parsed\n        path = path.replace '.git', ''\n        parts = path.split \"/\"\n        name = parts[parts.length - 1]\n        name = name.replace /-|_/g, \" \"\n        name = name.replace 'cozy ', ''\n\n        slug = slugify(name)\n        port = \"\" unless port?\n        git = proto + domain + port + path + '.git'\n        branch = branch.substring(1) if branch?\n\n        out = git:git, name:name, slug:slug\n        out.branch = branch if branch?\n        return out\n\n    # Display message inside info box.\n    displayInfo: (msg) =>\n        @errorAlert.hide()\n        @infoAlert.html msg\n        @infoAlert.show()\n\n    # Display message inside error box.\n    displayError: (msg) =>\n        @infoAlert.hide()\n        @errorAlert.html msg\n        @errorAlert.show()\n\n    hideError: =>\n        @errorAlert.hide()\n\n    resetForm: =>\n        @appGitField.val ''\n","BaseView = require 'lib/base_view'\nColorButton = require 'widgets/install_button'\n\nREGEXP_SPRITED_SVG = ///img/apps/(.*)\\.svg///\n\nmodule.exports = class ApplicationRow extends BaseView\n    tagName: \"div\"\n    className: \"cozy-app\"\n    template: require 'templates/market_application'\n\n    events:\n        \"click .website\": \"onWebsiteClicked\"\n        \"click .btn\": \"onInstallClicked\"\n        \"click\": \"onInstallClicked\"\n\n    getRenderData: ->\n        app = @app.toJSON()\n        if match = app.icon.match(REGEXP_SPRITED_SVG)\n            [all, slug] = match\n            app = _.extend {}, app, svgSpriteSlug: 'svg-' + slug\n\n        return {app}\n\n    constructor: (@app, @marketView) ->\n        super()\n        @mouseOut = true\n        @installInProgress = false\n\n    afterRender: =>\n        @$el.attr 'id', \"market-app-#{@app.get 'slug'}\"\n        @installButton = new ColorButton(@$ \"#add-#{@app.id}-install\")\n        if @app.get('comment') is 'official application'\n            @$el.addClass 'official'\n\n        slug = @app.get 'slug'\n        color = @app.get 'color'\n\n        # Only set a background color for SVG icons\n        if @app.get('icon').indexOf('.svg') isnt -1\n            # if there is no set color, we use an auto-generated one\n            unless color?\n                color = ColorHash.getColor slug, 'cozy'\n\n            iconNode = @$ '.app-img img'\n            iconNode.addClass 'svg'\n            iconNode.css 'background-color', color\n\n    onInstallClicked: =>\n        return if @installInProgress\n        @marketView.showDescription this, @installButton\n\n    onWebsiteClicked: (e) ->\n        # prevent starting installation when clicking on Github or website links\n        e.stopPropagation()\n","BaseView = require 'lib/base_view'\n\nmodule.exports = class ApplicationView extends BaseView\n\n    tagName: 'div'\n    className: 'menu-application clearfix'\n    template: require 'templates/menu_application'\n\n","ViewCollection = require 'lib/view_collection'\n\nmodule.exports = class AppsMenu extends ViewCollection\n\n    el:'#menu-applications-container'\n    itemView: require 'views/menu_application'\n    template: require 'templates/menu_applications'\n\n\n    constructor: (@collection) ->\n        super\n\n    appendView: (view) ->\n\n","class Modal extends Backbone.View\n\n    id:'modal-dialog'\n    className:'modalCY fade'\n    attributes:\n        'data-backdrop': \"static\" #prevent bs closing by backdrop\n        'data-keyboard': \"false\"  #prevent bs closing by esc\n\n    initialize: (options) ->\n        @title ?= options.title\n        @content ?= options.content\n        @yes ?= options.yes or t('ok')\n        @no ?= options.no or t('cancel')\n        @back = options.back or t('chooseAgain')\n        @cb ?= options.cb or ->\n        @render()\n        if options.cssSpaceName?\n            @el.classList.add(options.cssSpaceName)\n        @saving = false\n        @el.tabIndex = 0\n        @el.focus()\n\n        # cut default bootstrap behaviour. Done here rather than in\n        # delegateEvents to be run before bootstrap callback.\n        @$('button.close').click (event) =>\n            event.stopPropagation()\n            @onNo()\n\n        @$el.on 'keyup', @onKeyStroke\n\n    events: ->\n        \"click #modal-dialog-no\"  : 'onNo'\n        \"click #modal-dialog-yes\" : 'onYes'\n        'click'                   : 'onClickAnywhere'\n\n    onNo: ->\n        @close()\n        @cb false\n\n    onYes: ->\n        @close()\n        @cb true\n\n    close: ->\n        return if @closing\n        @closing = true\n        @backdrop.parentElement.removeChild(@backdrop)\n        @el.classList.remove('in')\n        @el.classList.add('out')\n        setTimeout( (=> @remove()), 500 )\n\n    onKeyStroke: (e) =>\n        e.stopPropagation()\n        if e.which is 27\n            @onNo()\n            return false\n\n    remove: ->\n        @$el.off 'keyup', @onKeyStroke\n        super\n\n    render: ->\n        close = $('<button class=\"close fa fa-close\" data-dismiss=\"modal\"/>')\n        title = $('<p>').text @title\n        head  = $('<div class=\"modalCY-header\">').append close, title\n\n        body  = $('<div class=\"modalCY-body\"></div>').append @renderContent()\n\n        foot  = $('<div class=\"modalCY-footer\">')\n        backBtn = $(\"\"\"\n            <button id=\"modal-dialog-back\" class=\"btn light-btn left back\">\n                <i class=\"fa fa-chevron-left\"/> #{@back}\n            </button>\n        \"\"\").appendTo foot\n        yesBtn= $('<button id=\"modal-dialog-yes\" class=\"btn right\"/>')\n                .text(@yes)\n                .appendTo foot\n        noBtn = if @no\n            $('<button id=\"modal-dialog-no\" class=\"btn light-btn right\"/>')\n            .text(@no)\n            .appendTo foot\n\n        @backdrop = document.createElement('div')\n        @backdrop.classList.add('modalCY-backdrop')\n\n        $(\"body\").append(@backdrop)\n        $(\"body\").append @$el.append head, body, foot\n        # force the evaluation of the initial value of the CSS properties so\n        # that the transition is applied on them\n        window.getComputedStyle(@el).opacity\n        window.getComputedStyle(@el).top\n        @$el.addClass('in')\n\n    renderContent: -> @content\n\n    # if the target is not a child element, the click targets the backdrop\n    onClickAnywhere: (event) -> @onNo() if event.target.id is @id\n\nModal.alert = (title, content, cb) ->\n    new Modal {title, content, yes: 'ok', no: null, cb}\n\nModal.confirm = (title, content, yesMsg, noMsg, cb) ->\n    new Modal {title, content, yes: yesMsg, no:noMsg, cb}\n\nModal.error = (text, cb) ->\n    new Modal\n        title: t 'modal error'\n        content: text\n        yes: t 'modal ok'\n        no: false\n        cb: cb\n\nmodule.exports = Modal\n","BaseView = require 'lib/base_view'\nappButtonTemplate = require \"templates/navbar_app_btn\"\nNotificationsView = require './notifications_view'\nAppsMenu = require './menu_applications'\n\nmodule.exports = class NavbarView extends BaseView\n\n    el:'.navbar'\n    template: require 'templates/navbar'\n\n    constructor: (apps, notifications) ->\n        @apps = apps\n        @notifications = notifications\n        super()\n\n    afterRender: =>\n        @notifications = new NotificationsView collection: @notifications\n        @appMenu = new AppsMenu @apps\n","BaseView = require 'lib/base_view'\n\n\n# Line displayed in the notification list.\nmodule.exports = class NotificationView extends BaseView\n\n    tagName: 'li'\n    className: 'notification clearfix'\n    template: require 'templates/notification'\n    events:\n        \"click .doaction\": \"onActionClicked\"\n        \"click .dismiss\" : \"onDismissClicked\"\n\n\n    # Add action text related to action fired by action url given in the model.\n    # Add a date field that aims to display the publication date.\n    getRenderData: ->\n        model: _.extend @model.attributes,\n            actionText: @actionText or null\n            date: moment(parseInt @model.get 'publishDate').fromNow()\n\n\n    # On initialize, it:\n    # * Add a listener to rerender on model change.\n    # * Prepare the action text depending on the URL.\n    initialize: ->\n        @listenTo @model, 'change', @render\n        action = @model.get 'resource'\n\n        if action?\n\n            if action.app? and action.app isnt 'home'\n                @actionText = 'notification open application'\n\n            else if action.url?\n\n                if action.url.indexOf('update-stack') >= 0\n                    @actionText = 'notification update stack'\n\n                else if action.url.indexOf('update') >= 0\n                    @actionText = 'notification update application'\n\n\n    # Depending on given parameters for action, it builds the correct URL to\n    # navigate on when the action button is clicked.\n    onActionClicked: ->\n        action = @model.get 'resource'\n\n        unless action?\n            action = app: home\n\n        if typeof action is 'string'\n            url = action\n\n        else if action.app?\n            # .replace is a quickfix\n            url = if action.app is 'home' then \"/\" else \"/apps/#{action.app}/\"\n            url += action.url or ''\n            url = url.replace '//', '/'\n            $('.right-menu').hide()\n            @model.destroy()\n\n        else\n            url = null\n\n        window.app.routers.main.navigate url, true if url\n\n\n    # Destroy current model.\n    onDismissClicked: (event) ->\n        event?.preventDefault()\n        event?.stopPropagation()\n        @model.destroy()\n","ViewCollection = require 'lib/view_collection'\nSocketListener = require 'lib/socket_listener'\nNotification = require 'models/notification'\n\nSocketListener = require '../lib/socket_listener'\n\nmodule.exports = class NotificationsView extends ViewCollection\n\n    el:'#notifications-container'\n    itemView: require 'views/notification_view'\n    template: require 'templates/notifications'\n\n    events:\n        \"click #notifications-toggle\": \"showNotifList\"\n        \"click #clickcatcher\": \"hideNotifList\"\n\n    initialize: ->\n        super\n        @initializing = true\n\n    appendView: (view) ->\n        @notifList ?= $ '#notifications-list'\n        @notifList.prepend view.el\n        @sound.play() unless @initializing\n\n    afterRender: =>\n        @counter = @$ '#notifications-counter'\n        @counter.html '0'\n        @clickcatcher = @$ '#clickcatcher'\n        @clickcatcher.hide()\n        @noNotifMsg = $ '#no-notif-msg'\n        @notifList  = $ '#notifications-list'\n        @hideNotifList()\n        @sound = $('#notification-sound')[0]\n        @dismissButton = $ \"#dismiss-all\"\n        @dismissButton.click @dismissAll\n\n        super\n        @initializing = false\n        @collection.fetch()\n        if window.cozy_user?\n            @noNotifMsg.html t 'you have no notifications',\n                name: window.cozy_user.public_name or ''\n\n    remove: =>\n        super\n\n    checkIfEmpty: =>\n        newCount = @collection.length\n        @noNotifMsg.toggle(newCount is 0)\n        if newCount is 0 # hide 0 counter\n            @counter.html \"\"\n            @counter.hide()\n        else\n            @counter.html newCount\n            @counter.show()\n\n    windowClicked: =>\n        if event? and @$el.has($(event.target)).length is 0\n            @hideNotifList()\n\n    showNotifList: =>\n        if $('.right-menu').is ':visible'\n            @hideNotifList()\n        else\n            $('.right-menu').show()\n            @clickcatcher.show()\n\n    hideNotifList: (event) =>\n        $('.right-menu').hide()\n        @clickcatcher.hide()\n\n    dismissAll: =>\n        @dismissButton.spin true\n        @collection.removeAll\n            success: =>\n                @dismissButton.spin false\n            error: =>\n                @dismissButton.spin false\n\n","Modal                = require '../views/modal'\ntemplate             = require '../templates/object_picker'\nObjectPickerPhotoURL = require './object_picker_photourl'\nObjectPickerUpload   = require './object_picker_upload'\nObjectPickerImage    = require './object_picker_image'\nObjectPickerAlbum    = require './object_picker_album'\ntabControler         = require 'views/tab-controler'\n\n\nMARGIN_BETWEEN_IMG_AND_CROPED = 30 # px\nTHUMB_WIDTH                   = 100 # px\nTHUMB_HEIGHT                  = 100 # px\n\nmodule.exports = class PhotoPickerCroper extends Modal\n\n################################################################################\n## PUBLIC SECTION\n\n#Class attributes\n\n\n# Methods\n\n    events: -> _.extend super,\n        'click a.next': 'displayMore'\n        'click a.prev': 'displayPrevPage'\n        'click .back':  '_chooseAgain'\n\n\n    initialize: (params, cb) ->\n        ####\n        # init config & state and super\n        @id     = 'object-picker'\n        @title  = t('pick from files')\n        @config =\n            cssSpaceName    : \"object-picker\"\n            singleSelection : true # tells if user can select one or more photo\n            numPerPage      : 50   # number of thumbs preloaded per request\n            yes             : t 'modal ok'\n            no              : t 'modal cancel'\n            cb              : cb  # will be called by onYes\n            target_h        : 100 # height of the img-preview div\n            target_w        : 100 # width  of the img-preview div\n        @params = params\n        @state =\n            currentStep : 'objectPicker' # 2 states : 'croper' & 'objectPicker'\n            img_naturalW: 0  # natural width  (px) of the selected file\n            img_naturalH: 0  # natural height (px) of the selected file\n        @el.dataset.step = @state.currentStep\n        super(@config)\n        ####\n        # get elements\n        body              = @el.querySelector '.modalCY-body'\n        body.innerHTML    = template()\n        @body             = body\n        @objectPickerCont = body.querySelector '.objectPickerCont'\n        @tablist          = body.querySelector '[role=tablist]'\n        @imgResult        = body.querySelector '#img-result'\n        @cropper$         = @el.querySelector '.croperCont'\n        @framePreview     = @cropper$.querySelector '#frame-preview'\n        @frameToCrop      = @cropper$.querySelector '.frame-to-crop'\n        @imgToCrop        = @cropper$.querySelector '#img-to-crop'\n        @imgPreview       = @cropper$.querySelector '#img-preview'\n        @chooseAgain      = @el.querySelector '.back'\n        ####\n        # initialise tabs and panels\n        @panelsControlers = {} # {tab1.name : tab1Controler, tab2... }\n        # image panel\n        #@imagePanel = new ObjectPickerImage(this)\n        #tabControler.addTab @objectPickerCont, @tablist, @imagePanel\n        #@panelsControlers[@imagePanel.name] = @imagePanel\n        ## album panel\n        #@albumPanel = new ObjectPickerAlbum(this)\n        #tabControler.addTab @objectPickerCont, @tablist, @albumPanel\n        #@panelsControlers[@albumPanel.name] = @albumPanel\n        # upload panel\n        @uploadPanel = new ObjectPickerUpload(this)\n        tabControler.addTab @objectPickerCont, @tablist, @uploadPanel\n        @panelsControlers[@uploadPanel.name] = @uploadPanel\n        # photoURL panel\n        @photoURLpanel = new ObjectPickerPhotoURL()\n        tabControler.addTab @objectPickerCont, @tablist, @photoURLpanel\n        @panelsControlers[@photoURLpanel.name] = @photoURLpanel\n        # init tabs\n        tabControler.initializeTabs(body)\n        @_listenTabsSelection()\n        tab = @params.defaultTab\n        tab = @imagePanel.name if not tab? and @imagePanel?\n        tab ?= @uploadPanel.name\n        @_selectDefaultTab tab\n        ####\n        # init the cropper\n        @imgToCrop.addEventListener('load', @_onImgToCropLoaded, false)\n        @cropper$.setAttribute('aria-hidden', true)\n        @framePreview.style.width  = THUMB_WIDTH  + 'px'\n        @framePreview.style.height = THUMB_HEIGHT + 'px'\n        previewTops = @cropper$.clientHeight - THUMB_HEIGHT\n\n        ####\n        # detect when the result image is loaded, then send the corresponding\n        # data url as a response\n        @imgResult.addEventListener('load', @_onImgResultLoaded, false)\n\n        window.addEventListener('resize', @resizeHandler)\n\n        return true\n\n\n    # overload the modal behavour : \"ok\" leads to the cropping step\n    onYes: ->\n        # expected object :\n        #    {dataUrl:string}\n        # or {id:file.id, docType: 'file', name:file.name}\n        # or {urlToFetch: string}\n        obj = @state.activePanel.getObject()\n\n        # cropping is not requested by the app, directly transmit the result\n        if !@params.isCropped\n            @_sendResult(obj)\n            return\n\n        # cropping is requested by the app, go to the cropping step\n        if @state.currentStep == 'objectPicker'\n            url = @_getUrlForCropping obj\n            if url\n                @_showCropingTool url\n        else\n            # Cropping is finished, get the coordinates to crop\n            # the original image.\n            dimension = @_getCroppedDimensions()\n\n            # Send result.\n            @cb true, @_getResultDataURL @imgPreview, dimension\n            @close()\n\n    resizeHandler: (event) =>\n        if @state.activePanel.resizeHandler\n            @state.activePanel.resizeHandler()\n\n\n\n\n################################################################################\n## PRIVATE SECTION ##\n#\n\n    _sendResult: (obj) ->\n        if obj.dataUrl\n            @cb(true,obj.dataUrl)\n            @close()\n            return\n        if obj.urlToFetch\n            @imgResult.src = obj.urlToFetch\n            # _onImgResultLoaded will then send the response\n            return\n        if obj.docType? and obj.docType == 'file' and obj.id?\n            if obj.id\n                @imgResult.src = \"files/photo/#{obj.id}.jpg\"\n                # _onImgResultLoaded will then send the response\n                return\n\n\n    _getUrlForCropping: (obj) ->\n        if obj.urlToFetch\n            return obj.urlToFetch\n        if obj.dataUrl\n            return obj.dataUrl\n        if obj.docType? and obj.docType == 'file' and obj.id?\n            return \"files/photo/screens/#{obj.id}.jpg\"\n\n\n    _onImgResultLoaded: (e) =>\n        @cb(true, @_getResultDataURL(@imgResult, null))\n        @close()\n\n\n    ###*\n     * returns the coordonates of the region to cropp into the original image\n     * (imgPreview)\n     * @return {Object} #\n     *   # sx      : x of the top left corner\n     *   # sy      : y of the top left corner\n     *   # sWidth  : widht of the region to crop\n     *   # sHeight : height of the region to crop\n    ###\n    _getCroppedDimensions: ()->\n            s = @imgPreview.style\n            r = @state.img_naturalW / @imgPreview.width\n            d =\n                sx      : Math.round(- parseInt(s.marginLeft)*r)\n                sy      : Math.round(- parseInt(s.marginTop )*r)\n                sWidth  : Math.round(@config.target_h*r)\n                sHeight : Math.round(@config.target_w*r)\n            # check the size of the cropped image is strictly into imgPreview\n            if d.sx < 0 then d.sx = 0\n            if d.sy < 0 then d.sy = 0\n            if d.sx + d.sWidth > @imgPreview.naturalWidth\n                d.sWidth = @imgPreview.naturalWidth - d.sx\n            if d.sy + d.sHeight > @imgPreview.naturalHeight\n                d.sHeight = @imgPreview.naturalHeight - d.sy\n            return d\n\n\n    _getResultDataURL:(img, dimensions)->\n        IMAGE_DIMENSION = 600\n        # use canvas to resize the image and return the urldata\n        canvas = document.createElement 'canvas'\n        ctx = canvas.getContext '2d'\n        if dimensions\n            canvas.height = canvas.width = IMAGE_DIMENSION\n            d = dimensions\n            ctx.drawImage( img, d.sx, d.sy, d.sWidth,\n                           d.sHeight, 0, 0, IMAGE_DIMENSION, IMAGE_DIMENSION)\n        else\n            canvas.width  = img.naturalWidth\n            canvas.height = img.naturalHeight\n            ctx.drawImage img, 0, 0\n        return dataUrl =  canvas.toDataURL 'image/jpeg'\n\n\n    onKeyStroke: (e)->\n    # overloads the modal onKeyStroke\n        if e.which == 13 # return key => validate modal\n            e.stopPropagation()\n            @onYes()\n            return\n        if e.which is 27 # escape key => choose another photo\n            e.stopPropagation()\n            if @state.currentStep == 'croper'\n                @_chooseAgain()\n            else #@state.currentStep == 'objectPicker'\n                @.onNo()\n            return\n        @state.activePanel?.keyHandler(e)\n\n\n\n    #\n    _showCropingTool: (url)=>\n        @state.currentStep  = 'croper'\n        @currentPhotoScroll = @body.scrollTop\n        @el.dataset.step = @state.currentStep\n        @objectPickerCont.setAttribute 'aria-hidden', true\n        @cropper$.setAttribute 'aria-hidden', false\n        @_imgToCropTemp = new Image()\n        @_imgToCropTemp.id = 'img-to-crop'\n        @_imgToCropTemp.addEventListener( 'load', @_onImgToCropLoaded  , false)\n        @_imgToCropTemp.src = url\n        @imgPreview.src = url\n\n\n    ###*\n     * triggered when the image to crop is loaded, will compute the geometry\n     * and initialize jCrop\n    ###\n    _onImgToCropLoaded: =>\n        console.debug @_imgToCropTemp\n        natural_h =   @_imgToCropTemp.naturalHeight\n        natural_w =   @_imgToCropTemp.naturalWidth\n        frame_H   =   @cropper$.clientHeight\n        frame_W   =   @cropper$.clientWidth               \\\n                    - MARGIN_BETWEEN_IMG_AND_CROPED       \\\n                    - THUMB_WIDTH\n\n        # determine the image to crop size so that it fits in cropper$\n        if frame_H < natural_h or frame_W < natural_w\n            if frame_H / frame_W > natural_h / natural_w\n                img_w = Math.round(frame_W)\n                img_h = Math.round(frame_W * natural_h / natural_w)\n            else\n                img_h = Math.round(frame_H)\n                img_w = Math.round(frame_H * natural_w / natural_h)\n            @_imgToCropTemp.style.width  = img_w + 'px'\n            @_imgToCropTemp.style.height = img_h + 'px'\n        else\n            img_w  = natural_w\n            img_h  = natural_h\n        @frameToCrop.style.width  = img_w + 'px'\n        @frameToCrop.style.height = img_h + 'px'\n\n        # keep a reference of the geometry for _updateCropedPreview\n        # and _getCroppedDimensions\n        @img_w = img_w\n        @img_h = img_h\n        @state.img_naturalW = natural_w\n        @state.img_naturalH = natural_h\n\n        # insert the new img to crop\n        @imgToCrop.parentElement.appendChild(@_imgToCropTemp)\n        @imgToCrop.parentElement.removeChild(@imgToCrop)\n        @imgToCrop = @_imgToCropTemp\n\n\n        margin                    = Math.round((frame_W-img_w)/2)\n        @frameToCrop.style.left   = margin + 'px'\n        cropTop                   = Math.round((frame_H-img_h)/2)\n        @frameToCrop.style.top    = cropTop + 'px'\n        @framePreview.style.top   = cropTop + 'px'\n        @framePreview.style.right = margin + 'px'\n\n\n        selection_w   = Math.round(Math.min(@img_h,@img_w)*1)\n        x = Math.round( (@img_w-selection_w)/2 )\n        y = Math.round( (@img_h-selection_w)/2 )\n        options =\n            onChange    : @_updateCropedPreview\n            onSelect    : @_updateCropedPreview\n            aspectRatio : 1\n            setSelect   : [ x, y, x+selection_w, y+selection_w ]\n        t = this\n        # force a reflow so that jCrop works properly\n        @imgToCrop.offsetHeight\n        $(@imgToCrop).Jcrop( options, ()->\n            t.jcrop_api = this\n        )\n        t.jcrop_api.focus()\n\n\n    _updateCropedPreview: (coords) =>\n        prev_w = @img_w / coords.w * @config.target_w\n        prev_h = @img_h / coords.h * @config.target_h\n        prev_x = @config.target_w  / coords.w * coords.x\n        prev_y = @config.target_h  / coords.h * coords.y\n        s            = @imgPreview.style\n        s.width      = Math.round(prev_w) + 'px'\n        s.height     = Math.round(prev_h) + 'px'\n        s.marginLeft = '-' + Math.round(prev_x) + 'px'\n        s.marginTop  = '-' + Math.round(prev_y) + 'px'\n        return true\n\n\n    _chooseAgain : ()->\n    # brings back from cropping step to the objectPicker step\n        @state.currentStep = 'objectPicker'\n        @jcrop_api.destroy()\n        @imgToCrop.removeAttribute('style')\n        @imgToCrop.src = ''\n        @objectPickerCont.setAttribute 'aria-hidden', false\n        @cropper$.setAttribute 'aria-hidden', true\n        @body.scrollTop = @currentPhotoScroll\n        @el.dataset.step = @state.currentStep\n        # manage focus wich was on the jcrop element\n        @_setFocus()\n\n\n    _setFocus: ()->\n        if !@state.activePanel.setFocusIfExpected\n            return\n        if !@state.activePanel.setFocusIfExpected()\n            @el.focus()\n\n\n    _listenTabsSelection: ()->\n        @objectPickerCont.addEventListener('panelSelect',(event)=>\n            @_activatePanel(event.target.classList[0])\n        )\n\n\n    _selectDefaultTab:(panelClassName)->\n        @tablist.querySelector(\"[aria-controls=#{panelClassName}]\")?.click()\n\n\n    _activatePanel: (panelClassName)->\n        @state.activePanel = @panelsControlers[panelClassName]\n        if @state.activePanel.resizeHandler\n            @state.activePanel.resizeHandler()\n        @_setFocus()\n","Photo    = require '../models/photo'\nBaseView = require 'lib/base_view'\nclient   = require('../lib/client')\n\n\nmodule.exports = class ObjectPickerAlbum extends BaseView\n\n    tagName   : \"section\"\n\n    ####################\n    ## PUBLIC SECTION ##\n    #\n\n    constructor: (modal) ->\n        @modal = modal\n        super()\n\n\n    initialize : () ->\n        ####\n        # init state\n        @name     = 'albumPicker'\n        @tabLabel = 'album'\n        ####\n        # get elements (name ends with '$')\n        @tab      = $(\"<div class='fa fa-book'>#{@tabLabel}</div>\")[0]\n        @panel    = @el\n        @albums$  = $('<div class=\"albums\"></div>')[0]\n        @thumbs$  = $(\"\"\"\n            <div class=\"thumbs\">\n                <div class=\"thumb\"><img/></div>\n            </div>\n        \"\"\")[0]\n        @panel.appendChild @albums$\n        @panel.appendChild @thumbs$\n        ####\n        # construct the list of albums\n        @_getAlbums()\n        ####\n        # A dictionnary to store the selected photos\n        # selected.photoID = thumb = {rank, id,name,thumbEl}\n        @selectedThumbs = {}\n\n        ####\n        # listeners\n        @thumbs$.addEventListener 'click', @_clickHandler\n        @thumbs$.addEventListener 'dblclick', @_dblclickHandler\n\n\n    getObject : () ->\n        for id, thumb$ of @selectedThumbs\n            if thumb$\n                break\n        photo = thumb$.photo\n        res =\n            id         : photo.id\n            docType    : 'photo'\n            name       : photo.title\n            urlToFetch : \"photos/raws/#{photo.id}.jpg\"\n        return res\n\n\n    setFocusIfExpected : () ->\n        # the panel doesn't want the focus because otherwise the arrows keys\n        # makes thumbs scroll\n        return false\n\n\n    keyHandler : (e)->\n        return\n\n\n    resizeHandler: () ->\n        thumbStyle = window.getComputedStyle(@thumbs$.children[0])\n        colWidth   =   parseInt(thumbStyle.width)       \\\n                     + parseInt(thumbStyle.marginLeft)  \\\n                     + parseInt(thumbStyle.marginRight) \\\n                     + 2\n        width = @thumbs$.clientWidth\n        margin = Math.floor((width % colWidth)/2)\n\n\n    #####################\n    ## PRIVATE SECTION ##\n    #\n\n    _dblclickHandler: (e) =>\n        thumb$ = e.target\n        if !@_toggleOnThumb$(thumb$)\n            return\n        @modal.onYes()\n\n\n    _clickHandler: (e) =>\n        th = e.target\n        while (not th.classList.contains('thumb'))\n            th = th.parentElement\n            return if th.classList.contains('thumbs')\n\n        if !@_toggleOnThumb$(th) then return null\n        th.setAttribute('aria-selected', true)\n\n\n    _toggleOnThumb$: (thumb$)=>\n        if thumb$.getAttribute('aria-selected') is 'true'\n            return true\n        @_unselectAll()\n        thumb$.setAttribute('aria-selected', true)\n        @selectedThumbs[thumb$.dataset.id] = thumb$\n        return true\n\n\n    _unselectAll: () =>\n        for id, thumb$ of @selectedThumbs\n            if typeof(thumb$) == 'object'\n                thumb$.setAttribute('aria-selected', false)\n                @selectedThumbs[id] = false\n\n\n    _getAlbums: () ->\n        client.get \"albums/?\", (err, res) =>\n            if err\n                console.error err\n                return\n            # if true\n            if res.length == 0\n                @panel.removeChild(@albums$)\n                @panel.removeChild(@thumbs$)\n                @panel.classList.add('noAlbum')\n                $(@panel).append(\"\"\"\n                    <div></div>\n                    <div class='noAlbumDisclaimer'>\n                        #{t('you have no album')}\n                    </div>\n                    <div></div>\n                \"\"\")\n                return\n            n = 0\n            for album in res\n                albumLabel$ = @_initAlbum(album)\n                if n == 0\n                    @previousSelectedAlbum$ = albumLabel$\n                    albumLabel$.setAttribute('aria-selected', true)\n                    @_getAlbumPhotos(album.id)\n                n += 1\n            @resizeHandler()\n\n\n    _initAlbum: (album)=>\n        el = $( require('../templates/album_thumb')() )[0]\n        cover = el.querySelector('.cover')\n        label = el.querySelector('.label')\n        cover.src = \"photos/thumbs/#{album.coverPicture}.jpg\"\n        label.textContent = album.title\n        @albums$.appendChild(el)\n        el.addEventListener 'click', (event) =>\n            @previousSelectedAlbum$.setAttribute('aria-selected', false)\n            el.setAttribute('aria-selected', true)\n            @previousSelectedAlbum$ = el\n            @_getAlbumPhotos(album.id)\n        return el\n\n\n    _getAlbumPhotos: (albumId) =>\n        client.get \"albums/#{albumId}\", (err, res) =>\n            if err then return\n            @_updateThumbs(res)\n            @_toggleOnThumb$(@thumbs$.children[0])\n\n\n    _updateThumbs: (res)=>\n        photos = res.photos\n        nPhoto = photos.length\n        photoRank = 0\n        for thumb in @thumbs$.children\n            if photoRank >= nPhoto\n                thumb.setAttribute('aria-hidden', true)\n                thumb.firstElementChild.src = ''\n                thumb.dataset.id            = ''\n                thumb.photo                 = null\n            else\n                thumb.setAttribute('aria-hidden', false)\n                thumb.dataset.id            = photoId = photos[photoRank].id\n                thumb.firstElementChild.src = \"photos/thumbs/#{photoId}.jpg\"\n                thumb.photo                 = photos[photoRank]\n            photoRank += 1\n\n        for photoRank in [photoRank..nPhoto-1] by 1\n            thumbImg     = document.createElement 'img'\n            thumbImg.src = \"photos/thumbs/#{photos[photoRank].id}.jpg\"\n            thumb        = document.createElement 'div'\n            thumb.appendChild thumbImg\n            thumb.classList.add 'thumb'\n            thumb.photo      = photos[photoRank]\n            thumb.dataset.id = photos[photoRank].id\n            @thumbs$.appendChild thumb\n\n","Photo    = require '../models/photo'\nLongList = require 'views/long-list-images'\nBaseView = require 'lib/base_view'\n\n\nmodule.exports = class ObjectPickerImage extends BaseView\n\n    tagName   : \"section\"\n\n####################\n## PUBLIC SECTION ##\n#\n\n    constructor: (modal) ->\n        @modal = modal\n        super()\n\n\n    initialize : () ->\n        ####\n        # init state\n        @name     = 'thumbPicker'\n        @tabLabel = 'image'\n        ####\n        # get elements (name ends with '$')\n        @tab      = $(\"<div class='fa fa-photo'>#{@tabLabel}</div>\")[0]\n        @panel    = @el\n        ####\n        # construct the long list of images\n        @el.addEventListener 'panelSelect', =>\n            @longList = new LongList(@panel, @modal)\n\n\n    getObject : () ->\n        file = @longList.getSelectedFile()\n        if file\n            return id:file.id, docType: 'file', name:file.name\n        return false\n\n\n    setFocusIfExpected : () ->\n        # the panel doesn't want the focus because otherwise the arrows keys\n        # makes thumbs scroll\n        return false\n\n    setInitialDimensions : (width, heigth) ->\n        @longList.setInitialDimensions(width, heigth)\n\n\n\n    keyHandler : (e)->\n        @longList.keyHandler(e)\n        return\n\n\n    resizeHandler: () ->\n        @longList.resizeHandler()\n","proxyclient = require 'lib/proxyclient'\nBaseView    = require 'lib/base_view'\n\n\nmodule.exports = class ObjectPickerPhotoURL extends BaseView\n\n    template : require '../templates/object_picker_photourl'\n    tagName  : 'section'\n\n####################\n## PUBLIC SECTION ##\n#\n    initialize: () ->\n        @render()\n        @name     = 'urlPhotoUpload'\n        @tabLabel = 'url'\n        @tab      = $(\"<div class='fa fa-link'>#{@tabLabel}</div>\")[0]\n        @panel    = @el\n        @img      = @panel.querySelector('.url-preview')\n        @blocContainer=@panel.querySelector('.bloc-container')\n        @url      = undefined\n        @input    = @panel.querySelector('.modal-url-input')\n        @_setupInput()\n\n    getObject : () ->\n        if @url\n            return urlToFetch: @url\n        else\n            return false\n\n    setFocusIfExpected : () ->\n        @input.focus()\n        @input.select()\n        return true\n\n    keyHandler : (e)->\n        return false\n\n#####################\n## PRIVATE SECTION ##\n#\n    ###*\n     * manages the url typed in the input and update image\n    ###\n    _setupInput: ()->\n        img = @img\n        urlRegexp = /// \\b\n            (https?|ftp|file)://\n            [\\-A-Z0-9+&@#/%?=~_|$!:,.;]*\n            [A-Z0-9+&@#/%=~_|$]\n        ///i\n        imgTmp = new Image()\n\n        imgTmp.onerror =  () ->\n            img.style.backgroundImage = \"\"\n            @url = undefined\n\n        imgTmp.onload =  () =>\n            img.style.maxWidth  = imgTmp.naturalWidth  + 'px'\n            img.style.maxHeight = imgTmp.naturalHeight + 'px'\n            img.parentElement.style.display = 'flex'\n            img.style.backgroundImage = 'url(' + imgTmp.src + ')'\n            @url = imgTmp.src\n            @blocContainer.style.height = (imgTmp.naturalHeight+40) + 'px'\n\n        preloadImage = (src) ->\n            imgTmp.src = src\n\n        @input.addEventListener('input',(e)->\n            newurl = e.target.value\n            if urlRegexp.test(newurl)\n                url = 'api/proxy/?url=' + encodeURIComponent(newurl)\n                preloadImage(url)\n            else\n                img.style.backgroundImage = \"\"\n                @url = undefined\n        ,false)\n","BaseView    = require 'lib/base_view'\n\n\nmodule.exports = class ObjectPickerUpload extends BaseView\n\n    template : require '../templates/object_picker_upload'\n    tagName  : \"section\"\n\n\n####################\n## PUBLIC SECTION ##\n#\n    constructor: (objectPicker) ->\n        super()\n        @objectPicker = objectPicker\n\n    initialize: () ->\n        @render()\n        # get elements\n\n        @name     = 'photoUpload'\n        @tabLabel = 'upload'\n        @tab      = @_createTab()\n        @panel    = @el\n        # bind events\n        @_bindFileDropZone()\n        btn = @panel.querySelector('.photoUpload-btn')\n        btn.addEventListener('click', @_changePhotoFromUpload)\n        @btn = btn\n        @uploader = @panel.querySelector('.uploader')\n        @uploader.addEventListener('change', @_handleUploaderChange)\n\n\n    getObject : () ->\n        return dataUrl: @dataUrl\n\n    setFocusIfExpected : () ->\n        @btn.focus()\n        return true\n\n    keyHandler : (e)=>\n        return false\n\n\n#####################\n## PRIVATE SECTION ##\n#\n    _createTab : () ->\n        return $(\"<div class='fa fa-upload'>#{@tabLabel}</div>\")[0]\n\n\n    _bindFileDropZone: ()->\n\n        dropbox = @panel.querySelector(\".modal-file-drop-zone>div\")\n        hasEnteredText = false\n\n        dropbox.addEventListener(\"dragenter\", (e)->\n            e.stopPropagation()\n            e.preventDefault()\n            dropbox.classList.add('dragging')\n        ,false)\n\n        dropbox.addEventListener(\"dragleave\", (e)->\n            e.stopPropagation()\n            e.preventDefault()\n            dropbox.classList.remove('dragging')\n        , false)\n\n        dragenter = (e)->\n            e.stopPropagation()\n            e.preventDefault()\n\n        drop = (e) =>\n            e.stopPropagation()\n            e.preventDefault()\n            dt = e.dataTransfer\n            files = dt.files\n            @_handleFile(files[0])\n\n        dragover = dragenter\n        dropbox.addEventListener(\"dragover\", dragover, false);\n        dropbox.addEventListener(\"drop\", drop, false);\n\n\n    _changePhotoFromUpload: () =>\n        @uploadPopupOpened = true\n        # pb : is not set to false if the user close the popup by clicking on\n        # the close button => will close the modal too...\n        @uploader.click()\n\n\n    _handleUploaderChange: () =>\n        file = @uploader.files[0]\n        @_handleFile(file)\n\n\n    _handleFile: (file) =>\n        unless file.type.match /image\\/.*/\n            return alert t 'This is not an image'\n        reader = new FileReader()\n        img = new Image()\n        reader.readAsDataURL file\n        reader.onloadend = =>\n            @dataUrl = reader.result\n            @objectPicker.onYes()\n\n","BaseView = require 'lib/base_view'\nrequest = require 'lib/request'\n\nmodule.exports = class PopoverDescriptionView extends BaseView\n    id: 'market-popover-description-view'\n    className: 'modal md-modal md-effect-1'\n    tagName: 'div'\n    template: require 'templates/popover_description'\n\n    events:\n        'click #cancelbtn':'onCancelClicked'\n        'click #confirmbtn':'onConfirmClicked'\n\n    initialize: (options) ->\n        super\n        @confirmCallback = options.confirm\n        @cancelCallback = options.cancel\n        @label = if options.label? then options.label else t 'install'\n        @$(\"#confirmbtn\").html @label\n\n\n    afterRender: ->\n        @model.set \"description\", \"\"\n        @body = @$ \".md-body\"\n        @header = @$ \".md-header h3\"\n        @header.html @model.get 'displayName'\n\n        @body.addClass 'loading'\n        @body.html t('please wait data retrieval') + '<div class=\"spinner-container\" />'\n        @body.find('.spinner-container').spin true\n        @model.getMetaData\n            success: =>\n                @body.removeClass 'loading'\n                @renderDescription()\n            error: (error) =>\n                @body.removeClass 'loading'\n                @body.addClass 'error'\n                if error.responseText.indexOf('Not Found') isnt -1\n                    @body.html t 'package.json not found'\n                else\n                    @body.html t 'error connectivity issue'\n\n        @overlay = $ '.md-overlay'\n        @overlay.click =>\n            @hide()\n\n    renderDescription: =>\n\n        @body.html \"\"\n\n        description = @model.get \"description\"\n        @header.parent().append \"<p class=\\\"line left\\\"> #{description} </p>\"\n\n        if Object.keys(@model.get(\"permissions\")).length is 0\n            permissionsDiv = $ \"\"\"\n                <div class='permissionsLine'>\n                    <h4>#{t('no specific permissions needed')} </h4>\n                </div>\n            \"\"\"\n            @body.append permissionsDiv\n        else\n            @body.append \"<h4>#{t('required permissions')}</h4>\"\n            for docType, permission of @model.get(\"permissions\")\n                permissionsDiv = $ \"<div class='permissionsLine'> <strong> #{docType} </strong> <p> #{permission.description} </p> </div>\"\n                @body.append permissionsDiv\n\n        @handleContentHeight()\n        @body.slideDown()\n        #@body.niceScroll() # must be done in the end to avoid weird render\n\n    handleContentHeight: ->\n        @body.css 'max-height', \"#{$(window).height() / 2}px\"\n        $(window).on 'resize', =>\n            @body.css 'max-height', \"#{$(window).height() / 2}px\"\n\n\n    show: =>\n        @$el.addClass 'md-show'\n        @overlay.addClass 'md-show'\n        setTimeout =>\n            @$('.md-content').addClass 'md-show'\n        , 300\n        document.addEventListener 'keydown', @onCancelClicked\n\n    hide: =>\n        @body.getNiceScroll().hide()\n        $('.md-content').fadeOut =>\n            @overlay.removeClass 'md-show'\n            @$el.removeClass 'md-show'\n            @remove()\n        $('#home-content').removeClass 'md-open'\n        document.removeEventListener 'keydown', @onCancelClicked\n\n    onCancelClicked: (event) =>\n        return if event.keyCode? and event.keyCode isnt 27\n        @hide()\n        @cancelCallback(@model)\n\n    onConfirmClicked: () =>\n        @confirmCallback(@model)\n","#  ------------------------------------------------\n#  -- structure of the tablists, tabs and panels --\n#  ------------------------------------------------\n#\n# tablists : somewhere in the dom :\n#     div(role='tablist', aria-controls='panelsCont')\n#       # aria-controls is the class of the element containing the tabpanels\n#\n#  panelsContainers : anywhere else a div with the class 'panelsCont'\n#  containing the tabpanel (role='tabpanel', aria-hidden='false')\n#     .panelsCont\n#          div(role='tabpanel', aria-hidden='false')\n#               # content\n#           div(role='tabpanel', aria-hidden='true')\n#               # content\n#           ... as many tabpanels\n#\n#  Question : shouldn't the panelCont be designated by its ID rather than\n#  its class ?\n#\n#  use case 1 : static html\n#   . create the html with the different tab lists (you can create as many as\n#     want)\n#   . tabControler = require 'path/to/tabConroler'\n#   . tabConroler.initializeTabs( rootElementContainingAllTabLists )\n#   . done !\n#\n#  use case 2 : decide dynamically the tabs you need and insert them one by one\n#   . NOTE : when the tabs are initialized you can NOT add new tabs.panel\n#   . create the html with the empty tabllists and divs that will contain\n#     the panels\n#   . create divs for tabs and panels and declare them ex :\n#       . tab = document.createElement('div')\n#         tab.textContent = 'my first tab'\n#         panel = document.createElement('div')\n#         tab.textContent = 'my first panel'\n#         tabControler = require 'path/to/tabConroler'\n#         params =\n#           tab   : tab\n#           panel : panel\n#           name  : 'panel-class-name'\n#         tabControler.addTab(panelsContainer, tabsContainer,params)\n#         # add as many tabs as expected and initialize\n#         tabConroler.initializeTabs( rootElementContainingAllTabLists )\n#\n\nmodule.exports = tabControler =\n    initializeTabs:(element) ->\n        tablists = element.querySelectorAll('[role=tablist]')\n        Array.prototype.forEach.call( tablists, (tablist)->\n            panelList = tablist.getAttribute('aria-controls')\n            panelList = document.querySelector(\".#{panelList}\")\n            tablist.addEventListener 'click', (event) =>\n                if event.target.getAttribute('role') != 'tab'\n                    return\n                panelName = event.target.getAttribute 'aria-controls'\n                panel     = panelList.querySelector(\".#{panelName}\")\n                # hide the panels that are not selected\n                for pan in panelList.children\n                    if pan.getAttribute('role') != 'tabpanel'\n                        continue\n                    if pan != panel\n                        pan.setAttribute('aria-hidden',true)\n                # show the selected panel\n                panel.setAttribute('aria-hidden',false)\n                panelSelectEvt = new Event('panelSelect',\n                                            bubbles:true,\n                                            cancelable:false)\n                panel.dispatchEvent(panelSelectEvt)\n                # hide or show the tabs\n                for tab in tablist.querySelectorAll('[role=tab]')\n                    if tab == event.target\n                        event.target.setAttribute('aria-selected',true)\n                    else\n                        tab.setAttribute('aria-selected', false)\n        )\n\n\n    #\n    # panelsContainer : [element] # element containing the panels\n    # tabsContainer   : [element] # element containing the tabs\n    # params =\n    #     tab         : [element] # the tab element to insert\n    #     panel       : [element] # the panel element to insert\n    #     name        : [String]  # class name of the panel\n    #\n    addTab: (panelsContainer, tabsContainer, params) ->\n        tab = params.tab\n        tab.setAttribute('role','tab')\n        tab.setAttribute('aria-controls', params.name)\n        tab.setAttribute('aria-selected', false)\n        tabsContainer.appendChild(tab)\n        panel = params.panel\n        panel.classList.add(params.name)\n        panel.setAttribute('role','tabpanel')\n        panel.setAttribute('aria-hidden', true)\n        panel.setAttribute('aria-selected', true)\n        panelsContainer.appendChild(panel)\n\n","BaseView = require 'lib/base_view'\nrequest = require 'lib/request'\nApplicationCollection = require '../collections/application'\n\nmodule.exports = class UpdateStackModal extends BaseView\n    id: 'market-popover-description-view'\n    className: 'modal md-modal md-effect-1'\n    tagName: 'div'\n    template: require 'templates/update_stack_modal'\n\n\n    events:\n        'click #cancelbtn':'onCancelClicked'\n        'click #confirmbtn':'onConfirmClicked'\n        'click #ok':'onClose'\n\n\n    initialize: (options) ->\n        super\n        @confirmCallback = options.confirm\n        @cancelCallback = options.cancel\n        @endCallback = options.end\n\n\n    afterRender: ->\n        @overlay = $ '.md-overlay'\n        @overlay.click => @hide()\n        @$('.step2').hide()\n        @$('.success').hide()\n        @$('.error').hide()\n        @$('#ok').hide()\n        @body = @$ \".md-body\"\n\n    handleContentHeight: ->\n        @body.css 'max-height', \"#{$(window).height() / 2}px\"\n        $(window).on 'resize', =>\n            @body.css 'max-height', \"#{$(window).height() / 2}px\"\n\n\n    show: ->\n        @$el.addClass 'md-show'\n        @overlay.addClass 'md-show'\n        $('#home-content').addClass 'md-open'\n        setTimeout =>\n            @$('.md-content').addClass 'md-show'\n        , 300\n\n\n    hide: ->\n        $('.md-content').fadeOut =>\n            @overlay.removeClass 'md-show'\n            @$el.removeClass 'md-show'\n            @remove()\n        $('#home-content').removeClass 'md-open'\n\n    onSuccess: ->\n        @$('.step2').hide()\n        @$('.success').show()\n        @$('#ok').show()\n        @$('#confirmbtn').hide()\n\n    onError: (err) ->\n        @$('.step2').hide()\n        @$('.error').show()\n        @$('#ok').show()\n        @$('#confirmbtn').hide()\n        @endCallback false\n        err = JSON.parse err\n        if Object.keys(err.message).length > 0\n            appError = $ \"\"\"\n                <div class='app-broken'>\n                    <h5> #{t('applications broken')}: </h5>\n                </div>\n            \"\"\"\n            @body.append appError\n            for app in Object.keys(err.message)\n                appError = $ \"\"\"\n                    <div class='app-broken'>\n                        #{app}\n                    </div>\n                \"\"\"\n                @body.append appError\n\n\n    onClose: ->\n        @hide()\n        @endCallback true\n\n    onCancelClicked: ->\n        @hide()\n        @cancelCallback()\n\n\n    onConfirmClicked: ->\n        @confirmCallback()\n        @$('.step1').hide()\n        @$('.step2').show()\n        @$('#confirmbtn').spin true\n        @$('#cancelbtn').hide()\n","# Small widget used to changed installatio button style easily\nmodule.exports = class ColorButton\n\n    constructor: (@button) ->\n        @label = @button.find '.label' or @button\n\n    displayGrey: (text) ->\n        @button.show()\n        @label.html text\n        @button.removeClass \"btn-red\"\n        @button.removeClass \"btn-green\"\n        @button.removeClass \"btn-orange\"\n\n\n    displayOrange: (text) ->\n        @button.show()\n        @label.html text\n        @button.removeClass \"btn-red\"\n        @button.removeClass \"btn-green\"\n        @button.addClass \"btn-orange\"\n\n    displayGreen: (text) ->\n        @button.show()\n        @label.html text\n        @button.addClass \"btn-green\"\n        @button.removeClass \"btn-red\"\n        @button.removeClass \"btn-orange\"\n\n    displayRed: (text) ->\n        @button.show()\n        @label.html text\n        @button.removeClass \"btn-green\"\n        @button.addClass  \"btn-red\"\n        @button.removeClass \"btn-orange\"\n\n    hide: ->\n        @button.hide()\n\n    show: ->\n        @button.show()\n\n    isGreen: ->\n        @button.hasClass \"btn-green\"\n\n    spin: (toggle) ->\n        @button.spin toggle\n\n    isHidden: ->\n        return not @button.is(\":visible\")\n\n\n"]}