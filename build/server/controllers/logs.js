// Generated by CoffeeScript 1.9.1
var fs, logs;

fs = require('fs');

logs = require('../lib/logs');

module.exports = {
  logs: function(req, res, next) {
    var filepath;
    filepath = logs.getLogPath(req.params.moduleslug);
    return fs.exists(filepath, function(exists) {
      var stream;
      if (exists) {
        stream = fs.createReadStream("" + filepath);
        stream.on('data', function(data) {
          return res.write(data.toString().replace(logs.colors, ''));
        });
        return stream.on('end', function() {
          return res.end();
        });
      } else {
        return res.status(404).send('File not found');
      }
    });
  }
};
