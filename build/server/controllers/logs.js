// Generated by CoffeeScript 1.9.3
var fs, log, logs;

fs = require('fs');

logs = require('../lib/logs');

log = require('printit')({
  prefix: 'home:client'
});

module.exports = {
  logs: function(req, res, next) {
    var filepath;
    filepath = logs.getLogPath(req.params.moduleslug);
    return fs.exists(filepath, function(exists) {
      var stream;
      if (exists) {
        stream = fs.createReadStream("" + filepath);
        stream.on('data', function(data) {
          return res.write(data.toString().replace(logs.colors, ''));
        });
        return stream.on('end', function() {
          return res.end();
        });
      } else {
        return res.status(404).send('File not found');
      }
    });
  },
  logClient: function(req, res) {
    var ref;
    log.error(req.body.data);
    log.error((ref = req.body.data.error) != null ? ref.stack : void 0);
    return res.send('ok');
  }
};
